(()=>{var Ts=Object.defineProperty;var Ot=Object.getOwnPropertySymbols;var Ps=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable;var Ft=(t,y,e)=>y in t?Ts(t,y,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[y]=e,pe=(t,y)=>{for(var e in y||(y={}))Ps.call(y,e)&&Ft(t,e,y[e]);if(Ot)for(var e of Ot(y))Ds.call(y,e)&&Ft(t,e,y[e]);return t};var I=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(y,e)=>(typeof require!="undefined"?require:y)[e]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var A=(t,y)=>()=>(y||t((y={exports:{}}).exports,y),y.exports);var H=A((bf,Ct)=>{var Us=Array.isArray;Ct.exports=Us});var je=A((Ef,Lt)=>{var Rs=typeof window=="object"&&window&&window.Object===Object&&window;Lt.exports=Rs});var B=A((Af,It)=>{var Ns=je(),xs=typeof self=="object"&&self&&self.Object===Object&&self,ks=Ns||xs||Function("return this")();It.exports=ks});var fe=A((Mf,Tt)=>{var Ws=B(),js=Ws.Symbol;Tt.exports=js});var Rt=A((Sf,Ut)=>{var Pt=fe(),Dt=Object.prototype,Gs=Dt.hasOwnProperty,Vs=Dt.toString,he=Pt?Pt.toStringTag:void 0;function Hs(t){var y=Gs.call(t,he),e=t[he];try{t[he]=void 0;var r=!0}catch(p){}var g=Vs.call(t);return r&&(y?t[he]=e:delete t[he]),g}Ut.exports=Hs});var xt=A((Of,Nt)=>{var qs=Object.prototype,Bs=qs.toString;function $s(t){return Bs.call(t)}Nt.exports=$s});var K=A((Ff,jt)=>{var kt=fe(),zs=Rt(),Ks=xt(),Js="[object Null]",Ys="[object Undefined]",Wt=kt?kt.toStringTag:void 0;function Qs(t){return t==null?t===void 0?Ys:Js:Wt&&Wt in Object(t)?zs(t):Ks(t)}jt.exports=Qs});var J=A((Cf,Gt)=>{function Zs(t){return t!=null&&typeof t=="object"}Gt.exports=Zs});var Fe=A((Lf,Vt)=>{var Xs=K(),el=J(),tl="[object Symbol]";function ol(t){return typeof t=="symbol"||el(t)&&Xs(t)==tl}Vt.exports=ol});var Ce=A((If,Ht)=>{var nl=H(),rl=Fe(),il=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sl=/^\w*$/;function ll(t,y){if(nl(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||rl(t)?!0:sl.test(t)||!il.test(t)||y!=null&&t in Object(y)}Ht.exports=ll});var Le=A((Tf,qt)=>{function al(t){var y=typeof t;return t!=null&&(y=="object"||y=="function")}qt.exports=al});var Ge=A((Pf,Bt)=>{var ul=K(),dl=Le(),cl="[object AsyncFunction]",gl="[object Function]",pl="[object GeneratorFunction]",fl="[object Proxy]";function hl(t){if(!dl(t))return!1;var y=ul(t);return y==gl||y==pl||y==cl||y==fl}Bt.exports=hl});var zt=A((Df,$t)=>{var ml=B(),yl=ml["__core-js_shared__"];$t.exports=yl});var Yt=A((Uf,Jt)=>{var Ve=zt(),Kt=function(){var t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vl(t){return!!Kt&&Kt in t}Jt.exports=vl});var He=A((Rf,Qt)=>{var _l=Function.prototype,wl=_l.toString;function bl(t){if(t!=null){try{return wl.call(t)}catch(y){}try{return t+""}catch(y){}}return""}Qt.exports=bl});var Xt=A((Nf,Zt)=>{var El=Ge(),Al=Yt(),Ml=Le(),Sl=He(),Ol=/[\\^$.*+?()[\]{}|]/g,Fl=/^\[object .+?Constructor\]$/,Cl=Function.prototype,Ll=Object.prototype,Il=Cl.toString,Tl=Ll.hasOwnProperty,Pl=RegExp("^"+Il.call(Tl).replace(Ol,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dl(t){if(!Ml(t)||Al(t))return!1;var y=El(t)?Pl:Fl;return y.test(Sl(t))}Zt.exports=Dl});var to=A((xf,eo)=>{function Ul(t,y){return t==null?void 0:t[y]}eo.exports=Ul});var ee=A((kf,oo)=>{var Rl=Xt(),Nl=to();function xl(t,y){var e=Nl(t,y);return Rl(e)?e:void 0}oo.exports=xl});var me=A((Wf,no)=>{var kl=ee(),Wl=kl(Object,"create");no.exports=Wl});var so=A((jf,io)=>{var ro=me();function jl(){this.__data__=ro?ro(null):{},this.size=0}io.exports=jl});var ao=A((Gf,lo)=>{function Gl(t){var y=this.has(t)&&delete this.__data__[t];return this.size-=y?1:0,y}lo.exports=Gl});var co=A((Vf,uo)=>{var Vl=me(),Hl="__lodash_hash_undefined__",ql=Object.prototype,Bl=ql.hasOwnProperty;function $l(t){var y=this.__data__;if(Vl){var e=y[t];return e===Hl?void 0:e}return Bl.call(y,t)?y[t]:void 0}uo.exports=$l});var po=A((Hf,go)=>{var zl=me(),Kl=Object.prototype,Jl=Kl.hasOwnProperty;function Yl(t){var y=this.__data__;return zl?y[t]!==void 0:Jl.call(y,t)}go.exports=Yl});var ho=A((qf,fo)=>{var Ql=me(),Zl="__lodash_hash_undefined__";function Xl(t,y){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Ql&&y===void 0?Zl:y,this}fo.exports=Xl});var yo=A((Bf,mo)=>{var ea=so(),ta=ao(),oa=co(),na=po(),ra=ho();function ie(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var r=t[y];this.set(r[0],r[1])}}ie.prototype.clear=ea;ie.prototype.delete=ta;ie.prototype.get=oa;ie.prototype.has=na;ie.prototype.set=ra;mo.exports=ie});var _o=A(($f,vo)=>{function ia(){this.__data__=[],this.size=0}vo.exports=ia});var qe=A((zf,wo)=>{function sa(t,y){return t===y||t!==t&&y!==y}wo.exports=sa});var ye=A((Kf,bo)=>{var la=qe();function aa(t,y){for(var e=t.length;e--;)if(la(t[e][0],y))return e;return-1}bo.exports=aa});var Ao=A((Jf,Eo)=>{var ua=ye(),da=Array.prototype,ca=da.splice;function ga(t){var y=this.__data__,e=ua(y,t);if(e<0)return!1;var r=y.length-1;return e==r?y.pop():ca.call(y,e,1),--this.size,!0}Eo.exports=ga});var So=A((Yf,Mo)=>{var pa=ye();function fa(t){var y=this.__data__,e=pa(y,t);return e<0?void 0:y[e][1]}Mo.exports=fa});var Fo=A((Qf,Oo)=>{var ha=ye();function ma(t){return ha(this.__data__,t)>-1}Oo.exports=ma});var Lo=A((Zf,Co)=>{var ya=ye();function va(t,y){var e=this.__data__,r=ya(e,t);return r<0?(++this.size,e.push([t,y])):e[r][1]=y,this}Co.exports=va});var ve=A((Xf,Io)=>{var _a=_o(),wa=Ao(),ba=So(),Ea=Fo(),Aa=Lo();function se(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var r=t[y];this.set(r[0],r[1])}}se.prototype.clear=_a;se.prototype.delete=wa;se.prototype.get=ba;se.prototype.has=Ea;se.prototype.set=Aa;Io.exports=se});var Ie=A((eh,To)=>{var Ma=ee(),Sa=B(),Oa=Ma(Sa,"Map");To.exports=Oa});var Uo=A((th,Do)=>{var Po=yo(),Fa=ve(),Ca=Ie();function La(){this.size=0,this.__data__={hash:new Po,map:new(Ca||Fa),string:new Po}}Do.exports=La});var No=A((oh,Ro)=>{function Ia(t){var y=typeof t;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?t!=="__proto__":t===null}Ro.exports=Ia});var _e=A((nh,xo)=>{var Ta=No();function Pa(t,y){var e=t.__data__;return Ta(y)?e[typeof y=="string"?"string":"hash"]:e.map}xo.exports=Pa});var Wo=A((rh,ko)=>{var Da=_e();function Ua(t){var y=Da(this,t).delete(t);return this.size-=y?1:0,y}ko.exports=Ua});var Go=A((ih,jo)=>{var Ra=_e();function Na(t){return Ra(this,t).get(t)}jo.exports=Na});var Ho=A((sh,Vo)=>{var xa=_e();function ka(t){return xa(this,t).has(t)}Vo.exports=ka});var Bo=A((lh,qo)=>{var Wa=_e();function ja(t,y){var e=Wa(this,t),r=e.size;return e.set(t,y),this.size+=e.size==r?0:1,this}qo.exports=ja});var Te=A((ah,$o)=>{var Ga=Uo(),Va=Wo(),Ha=Go(),qa=Ho(),Ba=Bo();function le(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var r=t[y];this.set(r[0],r[1])}}le.prototype.clear=Ga;le.prototype.delete=Va;le.prototype.get=Ha;le.prototype.has=qa;le.prototype.set=Ba;$o.exports=le});var Jo=A((uh,Ko)=>{var zo=Te(),$a="Expected a function";function Be(t,y){if(typeof t!="function"||y!=null&&typeof y!="function")throw new TypeError($a);var e=function(){var r=arguments,g=y?y.apply(this,r):r[0],p=e.cache;if(p.has(g))return p.get(g);var i=t.apply(this,r);return e.cache=p.set(g,i)||p,i};return e.cache=new(Be.Cache||zo),e}Be.Cache=zo;Ko.exports=Be});var Qo=A((dh,Yo)=>{var za=Jo(),Ka=500;function Ja(t){var y=za(t,function(r){return e.size===Ka&&e.clear(),r}),e=y.cache;return y}Yo.exports=Ja});var Xo=A((ch,Zo)=>{var Ya=Qo(),Qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Za=/\\(\\)?/g,Xa=Ya(function(t){var y=[];return t.charCodeAt(0)===46&&y.push(""),t.replace(Qa,function(e,r,g,p){y.push(g?p.replace(Za,"$1"):r||e)}),y});Zo.exports=Xa});var tn=A((gh,en)=>{function eu(t,y){for(var e=-1,r=t==null?0:t.length,g=Array(r);++e<r;)g[e]=y(t[e],e,t);return g}en.exports=eu});var an=A((ph,ln)=>{var on=fe(),tu=tn(),ou=H(),nu=Fe(),ru=1/0,nn=on?on.prototype:void 0,rn=nn?nn.toString:void 0;function sn(t){if(typeof t=="string")return t;if(ou(t))return tu(t,sn)+"";if(nu(t))return rn?rn.call(t):"";var y=t+"";return y=="0"&&1/t==-ru?"-0":y}ln.exports=sn});var dn=A((fh,un)=>{var iu=an();function su(t){return t==null?"":iu(t)}un.exports=su});var $e=A((hh,cn)=>{var lu=H(),au=Ce(),uu=Xo(),du=dn();function cu(t,y){return lu(t)?t:au(t,y)?[t]:uu(du(t))}cn.exports=cu});var we=A((mh,gn)=>{var gu=Fe(),pu=1/0;function fu(t){if(typeof t=="string"||gu(t))return t;var y=t+"";return y=="0"&&1/t==-pu?"-0":y}gn.exports=fu});var ze=A((yh,pn)=>{var hu=$e(),mu=we();function yu(t,y){y=hu(y,t);for(var e=0,r=y.length;t!=null&&e<r;)t=t[mu(y[e++])];return e&&e==r?t:void 0}pn.exports=yu});var Ke=A((vh,fn)=>{var vu=ze();function _u(t,y,e){var r=t==null?void 0:vu(t,y);return r===void 0?e:r}fn.exports=_u});var Je=A((_h,hn)=>{function wu(t,y){return function(e){return t(y(e))}}hn.exports=wu});var yn=A((wh,mn)=>{var bu=Je(),Eu=bu(Object.getPrototypeOf,Object);mn.exports=Eu});var wn=A((bh,_n)=>{var Au=K(),Mu=yn(),Su=J(),Ou="[object Object]",Fu=Function.prototype,Cu=Object.prototype,vn=Fu.toString,Lu=Cu.hasOwnProperty,Iu=vn.call(Object);function Tu(t){if(!Su(t)||Au(t)!=Ou)return!1;var y=Mu(t);if(y===null)return!0;var e=Lu.call(y,"constructor")&&y.constructor;return typeof e=="function"&&e instanceof e&&vn.call(e)==Iu}_n.exports=Tu});var En=A((Eh,bn)=>{var Pu=K(),Du=H(),Uu=J(),Ru="[object String]";function Nu(t){return typeof t=="string"||!Du(t)&&Uu(t)&&Pu(t)==Ru}bn.exports=Nu});var Mn=A((Ah,An)=>{function xu(t,y,e,r){var g=-1,p=t==null?0:t.length;for(r&&p&&(e=t[++g]);++g<p;)e=y(e,t[g],g,t);return e}An.exports=xu});var On=A((Mh,Sn)=>{function ku(t){return function(y,e,r){for(var g=-1,p=Object(y),i=r(y),o=i.length;o--;){var a=i[t?o:++g];if(e(p[a],a,p)===!1)break}return y}}Sn.exports=ku});var Cn=A((Sh,Fn)=>{var Wu=On(),ju=Wu();Fn.exports=ju});var In=A((Oh,Ln)=>{function Gu(t,y){for(var e=-1,r=Array(t);++e<t;)r[e]=y(e);return r}Ln.exports=Gu});var Pn=A((Fh,Tn)=>{var Vu=K(),Hu=J(),qu="[object Arguments]";function Bu(t){return Hu(t)&&Vu(t)==qu}Tn.exports=Bu});var Ye=A((Ch,Rn)=>{var Dn=Pn(),$u=J(),Un=Object.prototype,zu=Un.hasOwnProperty,Ku=Un.propertyIsEnumerable,Ju=Dn(function(){return arguments}())?Dn:function(t){return $u(t)&&zu.call(t,"callee")&&!Ku.call(t,"callee")};Rn.exports=Ju});var xn=A((Lh,Nn)=>{function Yu(){return!1}Nn.exports=Yu});var Qe=A((be,ae)=>{var Qu=B(),Zu=xn(),kn=typeof be=="object"&&be&&!be.nodeType&&be,Wn=kn&&typeof ae=="object"&&ae&&!ae.nodeType&&ae,Xu=Wn&&Wn.exports===kn,jn=Xu?Qu.Buffer:void 0,ed=jn?jn.isBuffer:void 0,td=ed||Zu;ae.exports=td});var Ze=A((Ih,Gn)=>{var od=9007199254740991,nd=/^(?:0|[1-9]\d*)$/;function rd(t,y){var e=typeof t;return y=y==null?od:y,!!y&&(e=="number"||e!="symbol"&&nd.test(t))&&t>-1&&t%1==0&&t<y}Gn.exports=rd});var Pe=A((Th,Vn)=>{var id=9007199254740991;function sd(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=id}Vn.exports=sd});var qn=A((Ph,Hn)=>{var ld=K(),ad=Pe(),ud=J(),dd="[object Arguments]",cd="[object Array]",gd="[object Boolean]",pd="[object Date]",fd="[object Error]",hd="[object Function]",md="[object Map]",yd="[object Number]",vd="[object Object]",_d="[object RegExp]",wd="[object Set]",bd="[object String]",Ed="[object WeakMap]",Ad="[object ArrayBuffer]",Md="[object DataView]",Sd="[object Float32Array]",Od="[object Float64Array]",Fd="[object Int8Array]",Cd="[object Int16Array]",Ld="[object Int32Array]",Id="[object Uint8Array]",Td="[object Uint8ClampedArray]",Pd="[object Uint16Array]",Dd="[object Uint32Array]",T={};T[Sd]=T[Od]=T[Fd]=T[Cd]=T[Ld]=T[Id]=T[Td]=T[Pd]=T[Dd]=!0;T[dd]=T[cd]=T[Ad]=T[gd]=T[Md]=T[pd]=T[fd]=T[hd]=T[md]=T[yd]=T[vd]=T[_d]=T[wd]=T[bd]=T[Ed]=!1;function Ud(t){return ud(t)&&ad(t.length)&&!!T[ld(t)]}Hn.exports=Ud});var $n=A((Dh,Bn)=>{function Rd(t){return function(y){return t(y)}}Bn.exports=Rd});var Kn=A((Ae,ue)=>{var Nd=je(),zn=typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Ee=zn&&typeof ue=="object"&&ue&&!ue.nodeType&&ue,xd=Ee&&Ee.exports===zn,Xe=xd&&Nd.process,kd=function(){try{var t=Ee&&Ee.require&&Ee.require("util").types;return t||Xe&&Xe.binding&&Xe.binding("util")}catch(y){}}();ue.exports=kd});var et=A((Uh,Qn)=>{var Wd=qn(),jd=$n(),Jn=Kn(),Yn=Jn&&Jn.isTypedArray,Gd=Yn?jd(Yn):Wd;Qn.exports=Gd});var Xn=A((Rh,Zn)=>{var Vd=In(),Hd=Ye(),qd=H(),Bd=Qe(),$d=Ze(),zd=et(),Kd=Object.prototype,Jd=Kd.hasOwnProperty;function Yd(t,y){var e=qd(t),r=!e&&Hd(t),g=!e&&!r&&Bd(t),p=!e&&!r&&!g&&zd(t),i=e||r||g||p,o=i?Vd(t.length,String):[],a=o.length;for(var d in t)(y||Jd.call(t,d))&&!(i&&(d=="length"||g&&(d=="offset"||d=="parent")||p&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||$d(d,a)))&&o.push(d);return o}Zn.exports=Yd});var tr=A((Nh,er)=>{var Qd=Object.prototype;function Zd(t){var y=t&&t.constructor,e=typeof y=="function"&&y.prototype||Qd;return t===e}er.exports=Zd});var nr=A((xh,or)=>{var Xd=Je(),ec=Xd(Object.keys,Object);or.exports=ec});var ir=A((kh,rr)=>{var tc=tr(),oc=nr(),nc=Object.prototype,rc=nc.hasOwnProperty;function ic(t){if(!tc(t))return oc(t);var y=[];for(var e in Object(t))rc.call(t,e)&&e!="constructor"&&y.push(e);return y}rr.exports=ic});var tt=A((Wh,sr)=>{var sc=Ge(),lc=Pe();function ac(t){return t!=null&&lc(t.length)&&!sc(t)}sr.exports=ac});var De=A((jh,lr)=>{var uc=Xn(),dc=ir(),cc=tt();function gc(t){return cc(t)?uc(t):dc(t)}lr.exports=gc});var ur=A((Gh,ar)=>{var pc=Cn(),fc=De();function hc(t,y){return t&&pc(t,y,fc)}ar.exports=hc});var cr=A((Vh,dr)=>{var mc=tt();function yc(t,y){return function(e,r){if(e==null)return e;if(!mc(e))return t(e,r);for(var g=e.length,p=y?g:-1,i=Object(e);(y?p--:++p<g)&&r(i[p],p,i)!==!1;);return e}}dr.exports=yc});var pr=A((Hh,gr)=>{var vc=ur(),_c=cr(),wc=_c(vc);gr.exports=wc});var hr=A((qh,fr)=>{var bc=ve();function Ec(){this.__data__=new bc,this.size=0}fr.exports=Ec});var yr=A((Bh,mr)=>{function Ac(t){var y=this.__data__,e=y.delete(t);return this.size=y.size,e}mr.exports=Ac});var _r=A(($h,vr)=>{function Mc(t){return this.__data__.get(t)}vr.exports=Mc});var br=A((zh,wr)=>{function Sc(t){return this.__data__.has(t)}wr.exports=Sc});var Ar=A((Kh,Er)=>{var Oc=ve(),Fc=Ie(),Cc=Te(),Lc=200;function Ic(t,y){var e=this.__data__;if(e instanceof Oc){var r=e.__data__;if(!Fc||r.length<Lc-1)return r.push([t,y]),this.size=++e.size,this;e=this.__data__=new Cc(r)}return e.set(t,y),this.size=e.size,this}Er.exports=Ic});var ot=A((Jh,Mr)=>{var Tc=ve(),Pc=hr(),Dc=yr(),Uc=_r(),Rc=br(),Nc=Ar();function de(t){var y=this.__data__=new Tc(t);this.size=y.size}de.prototype.clear=Pc;de.prototype.delete=Dc;de.prototype.get=Uc;de.prototype.has=Rc;de.prototype.set=Nc;Mr.exports=de});var Or=A((Yh,Sr)=>{var xc="__lodash_hash_undefined__";function kc(t){return this.__data__.set(t,xc),this}Sr.exports=kc});var Cr=A((Qh,Fr)=>{function Wc(t){return this.__data__.has(t)}Fr.exports=Wc});var Ir=A((Zh,Lr)=>{var jc=Te(),Gc=Or(),Vc=Cr();function Ue(t){var y=-1,e=t==null?0:t.length;for(this.__data__=new jc;++y<e;)this.add(t[y])}Ue.prototype.add=Ue.prototype.push=Gc;Ue.prototype.has=Vc;Lr.exports=Ue});var Pr=A((Xh,Tr)=>{function Hc(t,y){for(var e=-1,r=t==null?0:t.length;++e<r;)if(y(t[e],e,t))return!0;return!1}Tr.exports=Hc});var Ur=A((em,Dr)=>{function qc(t,y){return t.has(y)}Dr.exports=qc});var nt=A((tm,Rr)=>{var Bc=Ir(),$c=Pr(),zc=Ur(),Kc=1,Jc=2;function Yc(t,y,e,r,g,p){var i=e&Kc,o=t.length,a=y.length;if(o!=a&&!(i&&a>o))return!1;var d=p.get(t),u=p.get(y);if(d&&u)return d==y&&u==t;var s=-1,l=!0,m=e&Jc?new Bc:void 0;for(p.set(t,y),p.set(y,t);++s<o;){var f=t[s],v=y[s];if(r)var n=i?r(v,f,s,y,t,p):r(f,v,s,t,y,p);if(n!==void 0){if(n)continue;l=!1;break}if(m){if(!$c(y,function(h,_){if(!zc(m,_)&&(f===h||g(f,h,e,r,p)))return m.push(_)})){l=!1;break}}else if(!(f===v||g(f,v,e,r,p))){l=!1;break}}return p.delete(t),p.delete(y),l}Rr.exports=Yc});var xr=A((om,Nr)=>{var Qc=B(),Zc=Qc.Uint8Array;Nr.exports=Zc});var Wr=A((nm,kr)=>{function Xc(t){var y=-1,e=Array(t.size);return t.forEach(function(r,g){e[++y]=[g,r]}),e}kr.exports=Xc});var Gr=A((rm,jr)=>{function eg(t){var y=-1,e=Array(t.size);return t.forEach(function(r){e[++y]=r}),e}jr.exports=eg});var $r=A((im,Br)=>{var Vr=fe(),Hr=xr(),tg=qe(),og=nt(),ng=Wr(),rg=Gr(),ig=1,sg=2,lg="[object Boolean]",ag="[object Date]",ug="[object Error]",dg="[object Map]",cg="[object Number]",gg="[object RegExp]",pg="[object Set]",fg="[object String]",hg="[object Symbol]",mg="[object ArrayBuffer]",yg="[object DataView]",qr=Vr?Vr.prototype:void 0,rt=qr?qr.valueOf:void 0;function vg(t,y,e,r,g,p,i){switch(e){case yg:if(t.byteLength!=y.byteLength||t.byteOffset!=y.byteOffset)return!1;t=t.buffer,y=y.buffer;case mg:return!(t.byteLength!=y.byteLength||!p(new Hr(t),new Hr(y)));case lg:case ag:case cg:return tg(+t,+y);case ug:return t.name==y.name&&t.message==y.message;case gg:case fg:return t==y+"";case dg:var o=ng;case pg:var a=r&ig;if(o||(o=rg),t.size!=y.size&&!a)return!1;var d=i.get(t);if(d)return d==y;r|=sg,i.set(t,y);var u=og(o(t),o(y),r,g,p,i);return i.delete(t),u;case hg:if(rt)return rt.call(t)==rt.call(y)}return!1}Br.exports=vg});var Kr=A((sm,zr)=>{function _g(t,y){for(var e=-1,r=y.length,g=t.length;++e<r;)t[g+e]=y[e];return t}zr.exports=_g});var Yr=A((lm,Jr)=>{var wg=Kr(),bg=H();function Eg(t,y,e){var r=y(t);return bg(t)?r:wg(r,e(t))}Jr.exports=Eg});var Zr=A((am,Qr)=>{function Ag(t,y){for(var e=-1,r=t==null?0:t.length,g=0,p=[];++e<r;){var i=t[e];y(i,e,t)&&(p[g++]=i)}return p}Qr.exports=Ag});var ei=A((um,Xr)=>{function Mg(){return[]}Xr.exports=Mg});var ni=A((dm,oi)=>{var Sg=Zr(),Og=ei(),Fg=Object.prototype,Cg=Fg.propertyIsEnumerable,ti=Object.getOwnPropertySymbols,Lg=ti?function(t){return t==null?[]:(t=Object(t),Sg(ti(t),function(y){return Cg.call(t,y)}))}:Og;oi.exports=Lg});var ii=A((cm,ri)=>{var Ig=Yr(),Tg=ni(),Pg=De();function Dg(t){return Ig(t,Pg,Tg)}ri.exports=Dg});var ai=A((gm,li)=>{var si=ii(),Ug=1,Rg=Object.prototype,Ng=Rg.hasOwnProperty;function xg(t,y,e,r,g,p){var i=e&Ug,o=si(t),a=o.length,d=si(y),u=d.length;if(a!=u&&!i)return!1;for(var s=a;s--;){var l=o[s];if(!(i?l in y:Ng.call(y,l)))return!1}var m=p.get(t),f=p.get(y);if(m&&f)return m==y&&f==t;var v=!0;p.set(t,y),p.set(y,t);for(var n=i;++s<a;){l=o[s];var h=t[l],_=y[l];if(r)var c=i?r(_,h,l,y,t,p):r(h,_,l,t,y,p);if(!(c===void 0?h===_||g(h,_,e,r,p):c)){v=!1;break}n||(n=l=="constructor")}if(v&&!n){var b=t.constructor,E=y.constructor;b!=E&&"constructor"in t&&"constructor"in y&&!(typeof b=="function"&&b instanceof b&&typeof E=="function"&&E instanceof E)&&(v=!1)}return p.delete(t),p.delete(y),v}li.exports=xg});var di=A((pm,ui)=>{var kg=ee(),Wg=B(),jg=kg(Wg,"DataView");ui.exports=jg});var gi=A((fm,ci)=>{var Gg=ee(),Vg=B(),Hg=Gg(Vg,"Promise");ci.exports=Hg});var fi=A((hm,pi)=>{var qg=ee(),Bg=B(),$g=qg(Bg,"Set");pi.exports=$g});var mi=A((mm,hi)=>{var zg=ee(),Kg=B(),Jg=zg(Kg,"WeakMap");hi.exports=Jg});var Mi=A((ym,Ai)=>{var it=di(),st=Ie(),lt=gi(),at=fi(),ut=mi(),yi=K(),ce=He(),vi="[object Map]",Yg="[object Object]",_i="[object Promise]",wi="[object Set]",bi="[object WeakMap]",Ei="[object DataView]",Qg=ce(it),Zg=ce(st),Xg=ce(lt),ep=ce(at),tp=ce(ut),te=yi;(it&&te(new it(new ArrayBuffer(1)))!=Ei||st&&te(new st)!=vi||lt&&te(lt.resolve())!=_i||at&&te(new at)!=wi||ut&&te(new ut)!=bi)&&(te=function(t){var y=yi(t),e=y==Yg?t.constructor:void 0,r=e?ce(e):"";if(r)switch(r){case Qg:return Ei;case Zg:return vi;case Xg:return _i;case ep:return wi;case tp:return bi}return y});Ai.exports=te});var Pi=A((vm,Ti)=>{var dt=ot(),op=nt(),np=$r(),rp=ai(),Si=Mi(),Oi=H(),Fi=Qe(),ip=et(),sp=1,Ci="[object Arguments]",Li="[object Array]",Re="[object Object]",lp=Object.prototype,Ii=lp.hasOwnProperty;function ap(t,y,e,r,g,p){var i=Oi(t),o=Oi(y),a=i?Li:Si(t),d=o?Li:Si(y);a=a==Ci?Re:a,d=d==Ci?Re:d;var u=a==Re,s=d==Re,l=a==d;if(l&&Fi(t)){if(!Fi(y))return!1;i=!0,u=!1}if(l&&!u)return p||(p=new dt),i||ip(t)?op(t,y,e,r,g,p):np(t,y,a,e,r,g,p);if(!(e&sp)){var m=u&&Ii.call(t,"__wrapped__"),f=s&&Ii.call(y,"__wrapped__");if(m||f){var v=m?t.value():t,n=f?y.value():y;return p||(p=new dt),g(v,n,e,r,p)}}return l?(p||(p=new dt),rp(t,y,e,r,g,p)):!1}Ti.exports=ap});var ct=A((_m,Ri)=>{var up=Pi(),Di=J();function Ui(t,y,e,r,g){return t===y?!0:t==null||y==null||!Di(t)&&!Di(y)?t!==t&&y!==y:up(t,y,e,r,Ui,g)}Ri.exports=Ui});var xi=A((wm,Ni)=>{var dp=ot(),cp=ct(),gp=1,pp=2;function fp(t,y,e,r){var g=e.length,p=g,i=!r;if(t==null)return!p;for(t=Object(t);g--;){var o=e[g];if(i&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++g<p;){o=e[g];var a=o[0],d=t[a],u=o[1];if(i&&o[2]){if(d===void 0&&!(a in t))return!1}else{var s=new dp;if(r)var l=r(d,u,a,t,y,s);if(!(l===void 0?cp(u,d,gp|pp,r,s):l))return!1}}return!0}Ni.exports=fp});var gt=A((bm,ki)=>{var hp=Le();function mp(t){return t===t&&!hp(t)}ki.exports=mp});var ji=A((Em,Wi)=>{var yp=gt(),vp=De();function _p(t){for(var y=vp(t),e=y.length;e--;){var r=y[e],g=t[r];y[e]=[r,g,yp(g)]}return y}Wi.exports=_p});var pt=A((Am,Gi)=>{function wp(t,y){return function(e){return e==null?!1:e[t]===y&&(y!==void 0||t in Object(e))}}Gi.exports=wp});var Hi=A((Mm,Vi)=>{var bp=xi(),Ep=ji(),Ap=pt();function Mp(t){var y=Ep(t);return y.length==1&&y[0][2]?Ap(y[0][0],y[0][1]):function(e){return e===t||bp(e,t,y)}}Vi.exports=Mp});var Bi=A((Sm,qi)=>{function Sp(t,y){return t!=null&&y in Object(t)}qi.exports=Sp});var zi=A((Om,$i)=>{var Op=$e(),Fp=Ye(),Cp=H(),Lp=Ze(),Ip=Pe(),Tp=we();function Pp(t,y,e){y=Op(y,t);for(var r=-1,g=y.length,p=!1;++r<g;){var i=Tp(y[r]);if(!(p=t!=null&&e(t,i)))break;t=t[i]}return p||++r!=g?p:(g=t==null?0:t.length,!!g&&Ip(g)&&Lp(i,g)&&(Cp(t)||Fp(t)))}$i.exports=Pp});var Ji=A((Fm,Ki)=>{var Dp=Bi(),Up=zi();function Rp(t,y){return t!=null&&Up(t,y,Dp)}Ki.exports=Rp});var Qi=A((Cm,Yi)=>{var Np=ct(),xp=Ke(),kp=Ji(),Wp=Ce(),jp=gt(),Gp=pt(),Vp=we(),Hp=1,qp=2;function Bp(t,y){return Wp(t)&&jp(y)?Gp(Vp(t),y):function(e){var r=xp(e,t);return r===void 0&&r===y?kp(e,t):Np(y,r,Hp|qp)}}Yi.exports=Bp});var Xi=A((Lm,Zi)=>{function $p(t){return t}Zi.exports=$p});var ts=A((Im,es)=>{function zp(t){return function(y){return y==null?void 0:y[t]}}es.exports=zp});var ns=A((Tm,os)=>{var Kp=ze();function Jp(t){return function(y){return Kp(y,t)}}os.exports=Jp});var is=A((Pm,rs)=>{var Yp=ts(),Qp=ns(),Zp=Ce(),Xp=we();function ef(t){return Zp(t)?Yp(Xp(t)):Qp(t)}rs.exports=ef});var ls=A((Dm,ss)=>{var tf=Hi(),of=Qi(),nf=Xi(),rf=H(),sf=is();function lf(t){return typeof t=="function"?t:t==null?nf:typeof t=="object"?rf(t)?of(t[0],t[1]):tf(t):sf(t)}ss.exports=lf});var us=A((Um,as)=>{function af(t,y,e,r,g){return g(t,function(p,i,o){e=r?(r=!1,p):y(e,p,i,o)}),e}as.exports=af});var cs=A((Rm,ds)=>{var uf=Mn(),df=pr(),cf=ls(),gf=us(),pf=H();function ff(t,y,e){var r=pf(t)?uf:gf,g=arguments.length<3;return r(t,cf(y,4),e,g,df)}ds.exports=ff});var hs=A((Nm,Me)=>{var hf=Ke(),mf=wn(),gs=En(),ps=cs(),ft=typeof window!="undefined";function yf(t,y="ERROR"){console.log(`[service/dotenv][${y}] ${t}`)}function vf(t){return t==="True"||t==="true"?!0:t==="False"||t==="false"?!1:t}function oe(t){return Array.isArray(t)?ps(t,(y,e,r)=>(y[r]=oe(e),y),[]):mf(t)?ps(t,(y,e,r)=>(y[r]=oe(e),y),{}):gs(t)&&t.split(",").length>1?t.split(","):gs(t)?vf(t):t}function Ne(t,y){if(t){let e=hf(t,y,t[y]);return e!==void 0?oe(e):void 0}}var fs=class{constructor(){this.allowedOnClient=[],this.allowedOnEditClient=[],this.getAllForWindow=this.getAllForWindow.bind(this)}getForClient(y,e=void 0){let r=Ne(window.env,y),g=Ne(window.env,y);return r!==void 0?r:g!==void 0?g:oe(e)}getForServer(y,e=void 0){let r=Ne(window.env,y),g=Ne(process.env,y);return r!==void 0?r:g!==void 0?g:oe(e)}getAllForClient(){return oe(pe(pe({},window.env),window.env))}getAllForWindow(y){["allowedOnClient","allowedOnEditClient"].forEach(r=>{this[r]&&!Array.isArray(this[r])&&yf(`EnvVars.${r} must be an array of environment variable key strings`)});let e=this.allowedOnClient;return y&&(e=e.concat(this.allowedOnEditClient)),e&&e.reduce((r,g)=>{let p=this.getForServer(g);return r[g]=p,r},{})}getAllForServer(){return oe(pe(pe({},process.env),window.env))}},Y=new fs;function _f(t={}){Y.allowedOnClient=t.allowedOnClient||[],Y.allowedOnEditClient=t.allowedOnEditClient||[]}Me.exports.configure=_f;Me.exports.get=ft?Y.getForClient:Y.getForServer;Me.exports.getAll=ft?Y.getAllForClient:Y.getAllForServer;Me.exports.getAllForWindow=ft?Y.getForClient:Y.getAllForWindow});var ys=A((ms,ht)=>{(function(t){typeof ms=="object"&&typeof ht!="undefined"?ht.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).Cep=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(u,s){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(l,m){l.__proto__=m}:function(l,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(l[f]=m[f])}))(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}r(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Cep=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/Version"),a=t("./version.json"),t=(g=i.AAdFuelModule,p(d,g),d.prototype.init=function(){var u=this;return new Promise(function(s){u.logger.log("Initializing the module...",u.site),window.AdFuel?window.AdFuel.setModuleReady(u.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(u.MODULE_LOG_TAG)}),s()})},d.prototype.preQueue=function(u){var s=this;return new Promise(function(l){s.cepTags=window[s.site]&&window[s.site].cep_topics?window[s.site].cep_topics:s.cepTags,l({name:"CEP",tags:s.cepTags})})},d.prototype.preDispatch=function(u){var s=this;return new Promise(function(l){var m;s.targetingSet?l({name:"CEP",tags:s.cepTags}):(m=!(s.targetingSet=!0),Object.keys(s.cepTags).forEach(function(f){0<s.cepTags[f].length&&(s.logger.log("Adding CEP "+f+" Targeting: ",s.cepTags[f]),window.AdFuel?window.AdFuel.addPageLevelTarget(f,s.cepTags[f]):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting(f,s.cepTags[f])}),m=!0,l({name:"CEP",tags:s.cepTags}))}),m||(l({name:"CEP",tags:s.cepTags}),s.logger.log("No CEP targeting... adding CEP=0..."),window.AdFuel?window.AdFuel.addPageLevelTarget("cep","0"):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting("cep","0")})))})},d);function d(u){return u=g.call(this,u,"CEP",new o.Version(a.major,a.minor,a.revision,a.family),"cep","color: #d2b000; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this,u.cepTags={cep_brsf:[],cep_iabt:[],cep_sent:[],cep_tags:[]},u.site=window.AdFuelOptions.ADFUEL?window.AdFuelOptions.ADFUEL.SITE_OBJECT:"",u.targetingSet=!1,u}new(e.Cep=t)({debug:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:8}},{}]},{},[10])(10)})});var _s=A((vs,mt)=>{(function(t){typeof vs=="object"&&typeof mt!="undefined"?mt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).InViewRefresh=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(u,s){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(l,m){l.__proto__=m}:function(l,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(l[f]=m[f])}))(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}r(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.InViewRefresh=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/Version"),a=t("./version.json"),t=(g=i.AAdFuelModule,p(d,g),d);function d(u){var s=g.call(this,u,"In-View Refresh Module",new o.Version(a.major,a.minor,a.revision,a.family),"ivr","color: #00e1e1; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this;return s.DISALLOWED_RENDERED_SIZES=["970x66","970x90","970x250"],s.TARGET_DISPLAY_MILLISECONDS=s.config.DEFAULT_DISPLAY_MILLISECONDS,s.TARGET_DISPLAY_PERCENT=s.config.DEFAULT_DISPLAY_PERCENT,s._focused=!0,s._registeredSlots=[],s._renderedCreativeIds={},s._renderedLineItemIds={},s._invalidSlotIds=[],s._viewabilityListenersStarted=!1,s._refreshableInViewSlots={},s.init=function(){return new Promise(function(l,m){s.logger.log("Initializing IVR..."),window.AdFuel?window.AdFuel.setModuleReady(s.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG)}),l()})},s.start=function(){return new Promise(function(){s.startViewabilityListeners()})},s.startViewabilityListeners=function(){s._viewabilityListenersStarted||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("impressionViewable",function(l){s.logger.log("impressionViewable changed"),s.logger.log("impressionViewable changed");var m=l,l=(l=l.slot)==null?void 0:l.getSlotElementId();s.logger.log("Refreshable In View Slots: ",s._refreshableInViewSlots),s._refreshableInViewSlots[l]!==void 0&&s._refreshableInViewSlots[l].listenersSet?s.logger.log("Refreshable In View Slot listeners have already been set for: ",l,{object:s._refreshableInViewSlots[l]}):(s.logger.log("Refreshable In View Slot listeners have not been set: ",l,{object:s._refreshableInViewSlots[l]}),s.createInViewRefreshObject(m))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(l){s.logger.log("slotVisibilityChanged"),s.logger.log("slotVisibilityChanged"),s.visibilityChanged(l)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(l){s.logger.log("slotRenderEnded"),s.logger.log("slotRenderEnded");var m=l,f=m.slot.getSlotElementId(),m=(m.size?Array.isArray(m.size)&&(m.size=m.size.join("x")):m.size="0x0",m.size),v=(v=l.creativeId||l.sourceAgnosticCreativeId)!=null?v:0,n=(n=l.lineItemId||l.sourceAgnosticLineItemId)!=null?n:0,h=s._renderedCreativeIds[f]||[],_=s._renderedLineItemIds[f]||[];s.logger.log("----------Slot: ["+f+"]----------"),s.logger.log("Rendered Size: ",m),s.logger.log("Creative Ids: ",{selected:v,native:l.creativeId,agnostic:l.sourceAgnosticCreativeId}),0<=h.indexOf(v)?(delete s._refreshableInViewSlots[f],s._registeredSlots.splice(s._registeredSlots.indexOf(f),1),s._invalidSlotIds.push(f),s.logger.log("Duplicate Creative ["+v+"] returned for slot ["+f+"].  Stopping refresh.",s._registeredSlots)):0<=s.DISALLOWED_RENDERED_SIZES.indexOf(m)?(delete s._refreshableInViewSlots[f],s._registeredSlots.splice(s._registeredSlots.indexOf(f),1),s._invalidSlotIds.push(f),s.logger.log("Rendered size ["+m+"] for slot ["+f+"] is invalid for IVR.  Stopping refresh.",s._registeredSlots)):(v&&h.indexOf(v)<0&&h.push(v),n&&_.indexOf(n)<0&&_.push(n),s._renderedCreativeIds[f]=h,s._renderedLineItemIds[f]=_,s.logger.log("Rendered Creatives: ",s._renderedCreativeIds[f]),s.logger.log("Rendered LineItems: ",s._renderedLineItemIds[f]))})}),document.addEventListener("visibilitychange",s.visibilityChangeEvent),s._viewabilityListenersStarted=!0,s.logger.log("Listeners Started!"))},s.visibilityChangeEvent=function(l){s.logger.log("Visibility Change Event: ",l),s.logger.log("Relaying to _focusChanged..."),s._focused=!document.hidden,s.focusChanged(l)},s.focusChanged=function(l){s.logger.log("Focus Change Event: ",l),document.hidden?(s.logger.log("Page is hidden.  Destroying all intervals..."),s.destroyInterval()):(s.logger.log("Page is not hidden. Checking Intervals..."),Object.keys(s._refreshableInViewSlots).forEach(function(m){s.logger.log("",{index:m,slot:s._refreshableInViewSlots[m]}),s.getInterval(m)?s.logger.log("Interval exists...",m):(s.logger.log("Creating Interval...",m),s.detectInView())}))},s.visibilityChanged=function(l){var m=l.inViewPercentage||0,l=l.slot.getSlotElementId(),f=s.getInterval(l);m>=s.TARGET_DISPLAY_PERCENT?(s.logger.log("Element ["+l+"] Meets In-View Percentage Requirements",m),s._focused?(s.logger.log("... and page has focus"),f||(s.logger.log("... interval does not exist. Creating Interval..."),s.createInterval(l))):s.logger.log("... but page does not have focus.  Not creating interval.")):(s.logger.log("Element ["+l+"] Does NOT Meet In-View Percentage Requirements",m),f&&(s.logger.log("Found Interval for Element ["+l+"]... Destroying Interval."),s.destroyInterval(l)))},s.getInterval=function(l){return s.logger.log("Getting Interval for: ",l),!(s._refreshableInViewSlots[l]&&s._refreshableInViewSlots[l].timer===null||!s._refreshableInViewSlots[l])&&s._refreshableInViewSlots[l].timer},s.createInterval=function(l){var m,f;s.logger.log("Refreshable In-View Slots: ",s._refreshableInViewSlots),s._refreshableInViewSlots[l]&&(f=typeof(m=s._refreshableInViewSlots[l]).inViewRefreshInterval=="string"?1e3*parseInt(m.inViewRefreshInterval,10):typeof m.inViewRefreshInterval=="number"?1e3*m.inViewRefreshInterval:s.TARGET_DISPLAY_MILLISECONDS,s.logger.log("Slot ".concat(l," interval: ").concat(f)),m.inViewRefreshCounter=s._refreshableInViewSlots[l].inViewRefreshCounter||0,s.logger.log("Creating Interval for: ",l),m.timer=window.setInterval(function(){var v,n,h;s.logger.log("Slot: ",m),m!=null?(typeof m.inViewRefreshCount=="string"&&(m.inViewRefreshCount=parseInt(m.inViewRefreshCount)),0<m.inViewRefreshCount?(m.el=m.el||document.getElementById(l),v=(n=(n=m.el)==null?void 0:n.id)!=null?n:"",m.inViewRefreshCount--,m.inViewRefreshCounter++,0<=m.inViewRefreshCount&&(n=window.googletag.pubads().getSlots().filter(function(_){return _.getSlotElementId()===v})[0],s.logger.log("GoogleSlot: ",n),s.logger.log("Slot ["+v+"] is in view and is being refreshed."),s.logger.log("Starting Targeting Keys: ",n.getTargetingKeys()),s.logger.log("Clearing targeting on slot ["+v+"]...",m),h=n.getTargeting("pos"),n.clearTargeting(),h&&n.setTargeting("pos",h),s.logger.log("Cleared Targeting Keys: ",n.getTargetingKeys()),s.logger.log("Setting rfv count targeting on slot ["+v+"]: ",m.inViewRefreshCounter),n.setTargeting("rfv",m.inViewRefreshCounter.toString()),s._invalidSlotIds.indexOf(v)<0?(s.logger.log("Calling refresh On slot["+v+"]...",m),(h=window.AdFuel)!=null&&h.refresh([v]),s.logger.log("Slot ["+m.el.id+"] is in view, was just refreshed, and still has "+m.inViewRefreshCount+" refreshes remaining.")):s.logger.log("Slot ["+m.el.id+"] is invalid for refresh."))):s.logger.log("Slot ["+l+"] is in view but has no refreshes remaining.",m,m.inViewRefreshCount)):s.logger.log("Slot refresh prevented due to rendered size.")},f),s.logger.log("Done."))},s.destroyInterval=function(l){var m;l?(s.logger.log("Destroying interval for: ",l),m=s._refreshableInViewSlots[l],window.clearInterval((l=m.timer)!=null?l:0),m.timer=null,m.inView=!1):(s.logger.log("Destroying All Intervals"),Object.keys(s._refreshableInViewSlots).forEach(function(f){s.logger.log("Destroying interval for: ",f),m=s._refreshableInViewSlots[f],window.clearInterval((f=m.timer)!=null?f:0),m.timer=null,m.inView=!1}))},s.createInViewRefreshObject=function(l){s.logger.log("Checking Element: ",{event:l});var l=(l=l.slot)==null?void 0:l.getSlotElementId(),m=document.getElementById(l);s._registeredSlots.indexOf(l)!==-1&&s._refreshableInViewSlots[l]?(s.logger.log("Slot is registered with InView Refresh"),s._refreshableInViewSlots[l].inView=!1,s._refreshableInViewSlots[l].el=m,s._refreshableInViewSlots[l].refreshCount=0,s._refreshableInViewSlots[l].listenersSet=!0):s.logger.log("registered with InView Refresh")},s.isInsideBounds=function(l,m,f,v,n,h,_,c){var b=Math.max(f,_),E=Math.min(v,c),S=Math.max(l,n),C=Math.min(m,h),L=0,f=(f<=b&&b<=v&&f<=E&&E<=v&&l<=S&&S<=m&&l<=C&&C<=m&&(L=(E-b)*(C-S)),(h-n)*(c-_));return 0<f?L/f:0},s.getPercentInView=function(l){var m=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,v=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,h=l.getBoundingClientRect(),_=h.left+document.body.scrollLeft,h=h.top+document.body.scrollTop,c=_+l.clientWidth,l=h+l.clientHeight;return 100*s.isInsideBounds(v,v+m,n,n+f,_,c,h,l)},s.detectInView=function(){s.logger.log("Detecting In View Slots."),Object.keys(s._refreshableInViewSlots).length<1&&s.logger.log("No registered slots have been rendered yet."),Object.keys(s._refreshableInViewSlots).forEach(function(l){var m=s._refreshableInViewSlots[l].el||document.getElementById(l),f=!1,m=(m&&(f=m&&s._focused&&s.getPercentInView(m)>=s.TARGET_DISPLAY_PERCENT&&0<s._refreshableInViewSlots[l].inViewRefreshCount),s.getInterval(l));f&&!m&&s.createInterval(l)})},s.preQueue=function(l){return new Promise(function(m){for(var f=!1,v=0;v<l.length;v++){var n=l[v].unWrappedSlot;n.hasInViewRefresh===!0&&(s.logger.log("Slot has In-View Refresh..."),f=!(n.inViewRefreshCounter=0),s._registeredSlots.push(n.rktr_slot_id))}f&&(s.logger.log("Starting IVR Listeners..."),s.startViewabilityListeners()),m({name:"IVR"})})},s.preDispatch=function(l){return new Promise(function(m){for(var f=0;f<l.length;f++){var v=l[f].unWrappedSlot;v.hasInViewRefresh?(s.logger.log("Slot is configured for in view refresh.  Creating refresh object for slot ["+v.rktr_slot_id+"]"),s._refreshableInViewSlots[v.rktr_slot_id]=v):s.logger.log("Slot is not configured for in view refresh. ["+v.rktr_slot_id+"]")}m({name:"IVR"})})},s.logger.log("InViewRefresh created..."),s}new(e.InViewRefresh=t)(window.IVR||((p=window.AdFuelOptions)==null?void 0:p.IVR)||{DEFAULT_DISPLAY_MILLISECONDS:3e3,DEFAULT_DISPLAY_PERCENT:50,DEBUG:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[10])(10)})});var bs=A((ws,yt)=>{(function(t){typeof ws=="object"&&typeof yt!="undefined"?yt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).MalvertisingDetection=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var r=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,p,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,r.promiseWithTimeout)(5e3,new Promise(function(a,d){var u,s,l=i.createElement("script");if(document.getElementById(p))d("Element name ".concat(p," already exists in the document."));else try{var m="",f=(m=1<g.split("//").length?g:((s=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&s?"https://":"http://").concat(g),i.getElementsByTagName("script")[0]);if(l.id=p,l.type="text/javascript",l.src=m,l.async=o,l.addEventListener("load",function(){a(l)}),f==null||!f.parentNode)throw new Error("Could not insert script.");f.parentNode.insertBefore(l,f)}catch(v){console.log("Error in loading script from ".concat(l.src),v),d(v)}}))}},{"./promiseWithTimeout":8}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],10:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],11:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(s,l){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,f){m.__proto__=f}:function(m,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(m[v]=f[v])}))(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function m(){this.constructor=s}r(s,l),s.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.MalvertisingDetection=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),a=t("@turnercode/digital-ads-utilities/dist/Version"),d=t("./version.json"),t=(g=i.AAdFuelModule,p(u,g),u.prototype.init=function(){var s=this;return new Promise(function(l,m){s.config.SCRIPT_SRC==""?m("SCRIPT_SRC is not set."):((0,o.loadScriptFromUrl)("".concat(s.config.SCRIPT_SRC),"maldetect").then(function(){s.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(s.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG)})}).catch(function(f){s.logger.error("There was an error loading MalvertisingDetection:",f),m()}),l())})},u);function u(s){return s=g.call(this,s,"Malvertising Detection",new a.Version(d.major,d.minor,d.revision,d.family),"maldetect","color: #58f53f; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this,s.logger.log("Malvertising Detection constructed..."),s}new(e.MalvertisingDetection=t)(((p=window.AdFuelOptions)==null?void 0:p.MALVERTISING)||{SCRIPT_SRC:""})},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:9}},{}]},{},[11])(11)})});var As=A((Es,vt)=>{(function(t){typeof Es=="object"&&typeof vt!="undefined"?vt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).spblocking=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(u,s){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(l,m){l.__proto__=m}:function(l,m){for(var f in m)Object.prototype.hasOwnProperty.call(m,f)&&(l[f]=m[f])}))(u,s)},function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function l(){this.constructor=u}r(u,s),u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.SourcePointBlocking=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/Version"),a=t("../../version.json"),t=(g=i.AAdFuelModule,p(d,g),d);function d(){var u=g.call(this,null,"Sourcepoint Add-on: Ad Blocking",new o.Version(a.major,a.minor,a.revision,a.family),"spblocking","color: #00e1e1; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign)||this;return u.blockerStatus=!1,u.init=function(){return new Promise(function(s,l){window.spIsBlocking=u.spIsBlocking,window.addEventListener("sp.blocking",function(m){u.logger.log("Ad Status: BLOCKED"),u.blockerStatus=!0}),window.addEventListener("sp.not_blocking",function(m){u.logger.log("Ad Status: Not Blocked"),u.blockerStatus=!1}),window.AdFuel?window.AdFuel.setModuleReady(u.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(u.MODULE_LOG_TAG)}),s()})},u.spIsBlocking=function(){return u.logger.log("Returning Ad Blocker Status: ",u.blockerStatus),u.blockerStatus},u.logger.log("Sourcepoint Add-on created..."),u}new(e.SourcePointBlocking=t)},{"../../version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:9}},{}]},{},[10])(10)})});var Ss=A((Ms,_t)=>{(function(t){typeof Ms=="object"&&typeof _t!="undefined"?_t.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).Blockthrough=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var r=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,p,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,r.promiseWithTimeout)(5e3,new Promise(function(a,d){var u,s,l=i.createElement("script");if(document.getElementById(p))d("Element name ".concat(p," already exists in the document."));else try{var m="",f=(m=1<g.split("//").length?g:((s=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&s?"https://":"http://").concat(g),i.getElementsByTagName("script")[0]);if(l.id=p,l.type="text/javascript",l.src=m,l.async=o,l.addEventListener("load",function(){a(l)}),f==null||!f.parentNode)throw new Error("Could not insert script.");f.parentNode.insertBefore(l,f)}catch(v){console.log("Error in loading script from ".concat(l.src),v),d(v)}}))}},{"./promiseWithTimeout":8}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],10:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],11:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(s,l){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,f){m.__proto__=f}:function(m,f){for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(m[v]=f[v])}))(s,l)},function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function m(){this.constructor=s}r(s,l),s.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Blockthrough=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),a=t("@turnercode/digital-ads-utilities/dist/Version"),d=t("./version.json"),t=(g=i.AAdFuelModule,p(u,g),u.prototype.init=function(){var s=this;return new Promise(function(l,m){(0,o.loadScriptFromUrl)("warnermediagroup-com.videoplayerhub.com/galleryloader.js","btScript").then(function(){s.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(s.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG)})}).catch(function(f){s.logger.error("There was an error loading the Blockthrough script.",f),m()}),l()})},u);function u(){var s=g.call(this,null,"Blockthrough Module",new a.Version(d.major,d.minor,d.revision,d.family),"bt","color: #d2b000; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic)||this;return s.preDispatch=function(l){return new Promise(function(m,f){var v;s.logger.info("BLOCKTHROUGH: preDispatch was fired."),window.AdFuelUtils||(window.AdFuelUtils={isBlockerEnabled:!1,isReinsertionAllowed:!1,getPermissionToReinsert:function(n){}}),window.AdFuelUtils.isBlockerEnabled=(v=(v=window.BT)==null?void 0:v.BLOCKER_ENABLED)!=null&&v,window.AdFuelUtils.isReinsertionAllowed=(v=(v=window.BT)==null?void 0:v.REINSERTION_ALLOWED)!=null&&v,window.AdFuelUtils.getPermissionToReinsert=function(n){window.BT&&window.BT.getPermissionToReinsert(function(h){h&&n()})},m()})},s.logger.info("Created Blockthrough Module"),s}new(e.Blockthrough=t)},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:9}},{}]},{},[11])(11)})});var Fs=A((Os,wt)=>{(function(t){typeof Os=="object"&&typeof wt!="undefined"?wt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).Audience=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):(n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(n.MODULE_LOG_TAG)}))):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(5,0,98,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(m,f){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(v,n){v.__proto__=n}:function(v,n){for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(v[h]=n[h])}))(m,f)},function(m,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function v(){this.constructor=m}r(m,f),m.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Audience=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/localization"),a=t("@turnercode/digital-ads-utilities/dist/Version"),d=t("@turnercode/digital-ads-utilities/dist/getUrlParam"),u=t("@turnercode/digital-ads-utilities/dist/CookieHelper"),t=(g=i.AAdFuelModule,p(s,g),s);function s(m){var f=g.call(this,m,"Audience and User Identity Module",new a.Version(2,0,6,"TS"),"aui","color: #d2b000; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign)||this;return f.config=m,f.enabled=!0,f.ssaiActive=!1,f.turnerDomainArray=["cnn.com","cnn.com"],f.domainRegex=/.*?\.(.*?\..*?)$/,f.cdpflIsSet=!1,f.datidIsSet=!1,f.ukidIsSet=!1,f.init=function(){return new Promise(function(v,n){f.logger.info("Initializing Global Identity Module..."),f.enabled&&(f.logger.info("Initializing Module: ",f.config),f.turnerDomainArray=f.domainRegex.exec(window.location.hostname)||[],f.turnerDomain=f.turnerDomainArray&&0<f.turnerDomainArray.length&&f.turnerDomainArray[1]||"cnn.com",window.WM=window.WM||{},window.WM.getDatIdTargeting=f.getDatIdTargeting.bind(f),window.WM.getAllCDPFlags=f.getAllCDPFlags.bind(f),window.WM.buildCDPFlags=f.buildCDPFlags.bind(f),((0,o.isIntl)()&&f.config.SITE_VENDORS.INTL.includes("ID5")||!(0,o.isIntl)()&&f.config.SITE_VENDORS.DOM.includes("ID5"))&&(f.logger.log("Adding ID5 ESP Config Partner ID"),window.ID5EspConfig={partnerId:963}),f.getDatIdTargeting(),window.AdFuel?window.AdFuel.setModuleReady(f.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(f.MODULE_LOG_TAG)}),f.addScripts(),v())})},f.start=function(){return new Promise(function(v,n){window.WM.getUMTOCookies=f.getUMTOCookies,window.AdFuelUtils=window.AdFuelUtils||{},window.AdFuelUtils.getUMTOCookies=f.getUMTOCookies,v()})},f.buildCDPFlags=function(v,n,h){return v=(u.CookieHelper.readCookie(v)==="true"?"t":"f")||"x",n=(u.CookieHelper.readCookie(n)==="true"?"t":"f")||"x",h=u.CookieHelper.readCookie(h)?"t":"f","".concat(v).concat(n).concat(h)},f.getAllCDPFlags=function(){var v=[];return v.push("lr"+f.buildCDPFlags("isInAuthTokenExperiment","sendAuthToken2","tok_lr2")),v.filter(function(n){return!n.includes("xxf")}).join("-")},f.getDatIdTargeting=function(){return u.CookieHelper.hasCookie("datid")&&u.CookieHelper.readCookie("datid")!==null?(f.logger.info("Setting datid",{datid:u.CookieHelper.readCookie("datid")}),f.datid=u.CookieHelper.readCookie("datid")||"",window.WM.getDatId=function(){return u.CookieHelper.readCookie("datid")},{datid:f.datid}):u.CookieHelper.hasCookie("WMUKID_STABLE")&&u.CookieHelper.readCookie("WMUKID_STABLE")!==null?(f.logger.info("Setting datid to WMUKID_STABLE",{ukid:u.CookieHelper.readCookie("WMUKID_STABLE")}),f.datid=u.CookieHelper.readCookie("WMUKID_STABLE")||"",window.WM.getDatId=function(){return u.CookieHelper.readCookie("WMUKID_STABLE")},{datid:f.datid}):(f.logger.info("Could not find datid or WMUKID_STABLE"),{datid:""})},f.getUMTOCookies=function(){f.logger.log("getting UMTO cookies"),f.logger.log("sendHHID: ",u.CookieHelper.readCookie("sendHHID")),f.logger.log("HHID: ",u.CookieHelper.readCookie("wmhhid"));var v="",n=(window.WM&&window.WM.getAllCDPFlags&&(v=window.WM.getAllCDPFlags()),u.CookieHelper.readCookie("sendHHID")==="true"&&u.CookieHelper.hasCookie("wmhhid")&&u.CookieHelper.readCookie("wmhhid")!==null&&u.CookieHelper.readCookie("wmhhid"),[]);return u.CookieHelper.readCookie("bea4")?n.push("_fw_vcid2="+u.CookieHelper.readCookie("bea4")):u.CookieHelper.readCookie("bea4r")&&n.push("_fw_vcid2="+u.CookieHelper.readCookie("bea4r")),u.CookieHelper.readCookie("kxuser")&&n.push("krux_user="+u.CookieHelper.readCookie("kxuser")),u.CookieHelper.readCookie("zwmc")&&n.push("zwmc="+u.CookieHelper.readCookie("zwmc")),u.CookieHelper.readCookie("ifyr")&&n.push("ifyr="+u.CookieHelper.readCookie("ifyr")),u.CookieHelper.readCookie("hkgc")&&n.push("hkgc="+u.CookieHelper.readCookie("hkgc")),u.CookieHelper.readCookie("goiz")&&n.push("goiz="+u.CookieHelper.readCookie("goiz")),u.CookieHelper.readCookie("kfyn")&&n.push("kfyn="+u.CookieHelper.readCookie("kfyn")),(u.CookieHelper.readCookie("datid")||u.CookieHelper.readCookie("WMUKID_STABLE"))&&(u.CookieHelper.readCookie("datid")?(f.logger.log("Pushing vcid as datid: ",u.CookieHelper.readCookie("datid")),n.push("vcid="+u.CookieHelper.readCookie("datid")),n.push("wmuk="+u.CookieHelper.readCookie("datid"))):u.CookieHelper.readCookie("WMUKID_STABLE")&&(f.logger.log("Pushing vcid as WMUKID_STABLE: ",u.CookieHelper.readCookie("WMUKID_STABLE")),n.push("vcid="+u.CookieHelper.readCookie("WMUKID_STABLE")),n.push("wmuk="+u.CookieHelper.readCookie("WMUKID_STABLE")))),v!==""&&n.push("cdpfl="+v),window.spIsBlocking&&typeof window.spIsBlocking=="function"?n.push("abip="+window.spIsBlocking()):n.push("abip=na"),n.join("&")},f.isString=function(v){return Object.prototype.toString.call(v)==="[object String]"},f.isURIEncoded=function(v){return!!f.isString(v)&&decodeURIComponent(v)!==v},f.addScripts=function(){var v;f.ssaiActive||(document.readyState==="complete"?(f.addSSAIJavascript(),f.addUMTOCookie(),f.addFWCookie()):(v=f,document.onreadystatechange=function(){document.readyState==="complete"&&(v.addSSAIJavascript(),v.addUMTOCookie(),v.addFWCookie())}))},f.setLiveRampCookie=function(v){v={cookieName:"orev",cookieValue:v,attributes:[{key:"expires",value:new Date(Date.now()+936e5).toUTCString()},{key:"path",value:"/"}],secure:!0},u.CookieHelper.setCookie(v)},f.addLiveRampFreewheelPixel=function(v,n){var h;v!==null&&(v="https://idsync.rlcdn.com/712348.gif?partner_uid=".concat(v),(h=document.createElement("script")).src=v,document.head.appendChild(h),n==="G"?f.setLiveRampCookie("B"):f.setLiveRampCookie("F"))},f.addLiveRampGAMPixel=function(v,n,h){v===null&&n===null||(v="https://idsync.rlcdn.com/712551.gif?partner_uid=".concat(v||n),(n=document.createElement("script")).src=v,document.head.appendChild(n),h==="F"?f.setLiveRampCookie("B"):f.setLiveRampCookie("G"))},f.processVendor=function(v){var n,h,_=f.config.VENDORS[v];v==="LiveRamp"?(n=u.CookieHelper.hasCookie("orev")?u.CookieHelper.readCookie("orev"):"X",u.CookieHelper.hasCookie("bea4")&&n!=="F"&&n!=="B"&&(f.logger.log("Adding LiveRamp Freewheel Pixel..."),f.addLiveRampFreewheelPixel(u.CookieHelper.readCookie("bea4"),n)),n!=="G"&&n!=="B"&&(f.logger.log("Adding LiveRamp GAM Pixel..."),f.addLiveRampGAMPixel(u.CookieHelper.readCookie("datid"),u.CookieHelper.readCookie("WMUKID_STABLE"),n))):_&&_.COOKIE_NAME&&(!u.CookieHelper.hasCookie("umto")||u.CookieHelper.hasCookie("umto")&&!u.CookieHelper.hasCookie(_.COOKIE_NAME))&&f.turnerDomain!==null&&(n=f.turnerDomain.match(/\./g),f.turnerDomain=n&&1<n.length?f.turnerDomain.replace(/^\w+\.?/,"")||"":f.turnerDomain||"",f.logger.log("Adding SSAI tag for "+v+" ..."),v==="SpotX"?f.addSpotXCookie(_):v==="PubMatic"?f.addPubMaticUserSync(_):(v==="Freewheel"?(n=_.URL.replace(/{{domain}}/g,f.turnerDomain),f.isURIEncoded(n)||((h=n.split("?"))[h.length-1]=encodeURIComponent(h[h.length-1]),n=h.join("?").replace("user-sync?","user-sync%3F")),(h=document.createElement("img")).src=n):v==="Rubicon"?((n=f.turnerDomain.match(/(.*?)\..*?$/))!=null&&(n=n[1]),(h=document.createElement("img")).src=_.URL.replace(/{{brand}}/g,n)):(h=document.createElement("img")).src=v==="Telaria"?_.URL.replace(/{{domain}}/g,f.turnerDomain).replace("&domain","%26domain"):_.URL.replace(/{{domain}}/g,f.turnerDomain),h.setAttribute("style","display: none"),document.getElementsByTagName("body")[0].appendChild(h)),f.logger.log("Added SSAI pixel for "+v))},f.addSSAIJavascript=function(){f.logger.log("Site Vendors: ",f.config);var v=f.config.SITE_VENDORS,n=(0,d.getUrlParam)("forcePubMatic");console.log("Forcing PubMatic: ",n),n&&v.indexOf("PubMatic")<0&&(f.logger.log("PRE- Forcing PubMatic SSAI Vendor Configuration...",{siteVendors:v,config:f.config.VENDORS.PubMatic}),v.push("PubMatic"),f.config.VENDORS.PubMatic=f.config.VENDORS.PubMatic||{URL:"https://ads.pubmatic.com/AdServer/js/userSync.js",COOKIE_NAME:"kfyn"},f.logger.log("POST- Forcing PubMatic SSAI Vendor Configuration...",{siteVendors:v,config:f.config.VENDORS.PubMatic})),(0,o.isIntl)()?v.INTL.forEach(function(h){f.processVendor(h)}):v.DOM.forEach(function(h){f.processVendor(h)}),f.ssaiActive=!0},f.addPubMaticUserSync=function(v,n){n===void 0&&(n={PUBLISHER_ID:{DOM:"161163",INTL:"161163"}});var h=f.turnerDomain,_="https://image8.pubmatic.com/AdServer/ImgSync?p={{publisherId}}&gdpr={{gdpr}}&gdpr_consent={{gdprConsent}}&us_privacy={{usPrivacy}}&pu=",c=(_=(_=(_=(_=_.replace(/{{publisherId}}/g,(0,o.isIntl)()?n.PUBLISHER_ID.INTL:n.PUBLISHER_ID.DOM)).replace(/{{gdprConsent}}/g,(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInGdprRegion()?(c=window.WM)==null?void 0:c.UserConsent.getTcfAPIstring():"")).replace(/{{gdpr}}/g,(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInGdprRegion()?"1":"0")).replace(/{{usPrivacy}}/g,(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInCcpaRegion()?window.WM&&window.WM.UserConsent?window.WM.UserConsent.getUspAPIstring():"1YNN":""),"http://image4.pubmatic.com/AdServer/SPug?p={{publisherId}}&mpc=4&fp=1&pmc=PM_PMC&&pr="),c="http://image4.pubmatic.com/AdServer/SPug?p={{publisherId}}&mpc=4&fp=1&pmc=PM_PMC&&pr=".replace(/{{publisherId}}/g,(0,o.isIntl)()?n.PUBLISHER_ID.INTL:n.PUBLISHER_ID.DOM),n="https://umto.{{brand}}/user-sync?domain={{brand}}&{{cookieName}}=#PMUID",v=(n=(n=n.replace(/{{brand}}/g,h)).replace(/{{cookieName}}/g,v.COOKIE_NAME),c+=encodeURIComponent(n),_+=encodeURIComponent(c),(h=f.logger)!=null&&h.log("Adding PubMatic Pixel: ",_),document.createElement("img"));v.src=_,v.setAttribute("style","display: none"),document.getElementsByTagName("body")[0].appendChild(v)},f.addSpotXCookie=function(v){var n=new XMLHttpRequest;n.onreadystatechange=function(){var h,_;n.readyState===4&&(_=void 0,n.status===200?(_=JSON.parse(n.response).audience_id,h=new Date(Date.now()+31536e6),_={cookieName:v.COOKIE_NAME,cookieValue:_,attributes:[{key:"expires",value:h.toUTCString()},{key:"path",value:"/"}],secure:!0},u.CookieHelper.setCookie(_)):n.status===204?f.logger.log("Not able to check cookie, no audience_id returned"):f.logger.log("No audience_id available"))},n.open("GET",v.URL),n.withCredentials=!0,n.send()},f.addFWCookie=function(){var v,n,h=f.config.VENDORS.Freewheel,_=document.cookie.match(/bea4r?=.*?;/),c=document.cookie.match(/ug=.*?;/);!_&&c&&(_=c[0].replace(/(ug=|;)*/,""),c=Math.pow(16,6),v=Math.pow(16,8),_=_.slice(14),n=Date.now(),v=(Math.ceil(n/1e3)%v).toString(16).slice(0,8),c=(n%c).toString(16).slice(0,6),n=new Date(n+31536e6),h={cookieName:h.COOKIE_NAME+"r",cookieValue:v+c+_,attributes:[{key:"expires",value:n.toUTCString()},{key:"path",value:"/"}],secure:!0},u.CookieHelper.setCookie(h))},f.addUMTOCookie=function(){f.logger.log("Adding UMTO Cookie...");var v={cookieName:"umto",cookieValue:1,attributes:[{key:"expires",value:new Date(Date.now()+936e5).toUTCString()},{key:"path",value:"/"},{key:"Domain",value:f.turnerDomain},{key:"SameSite",value:"None"}],secure:!0};u.CookieHelper.setCookie(v),f.logger.log("Added UMTO Cookie.")},f.preQueue=function(){return new Promise(function(v,n){function h(){var c,b=f.getDatIdTargeting(),E=(f.logger.log("Checking for targeting..."),f.getAllCDPFlags());!f.datidIsSet&&b.datid&&(f.logger.info("Setting PPID: ",b.datid),(c=window.googletag)!=null&&c.pubads().setPublisherProvidedId(b.datid),f.datidIsSet=!0),!f.ukidIsSet&&b.datid&&(f.logger.info("Setting wmuk: ",b.datid),(c=window.googletag)!=null&&c.pubads().setTargeting("wmuk",b.datid),f.ukidIsSet=!0),!f.cdpflIsSet&&0<E.length&&(f.logger.info("Setting cdpfl: ",E),(c=window.googletag)!=null&&c.pubads().setTargeting("cdpfl",E),f.cdpflIsSet=!0),v({name:"Audience and User Identity"})}var _;window.googletag&&typeof window.googletag.pubads=="function"?h():(_=window.googletag)!=null&&_.cmd.push(h)})},f.logger.info("Audience and User Identity Module constructed"),f}var l=new(e.Audience=t)(((p=window.AdFuelOptions)==null?void 0:p.AUI)||window.AUIConfig);window.AdFuelUtils||(window.AdFuelUtils={}),window.AdFuelUtils.getUMTOCookies=function(){return l.getUMTOCookies()}},{"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/CookieHelper":2,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/getUrlParam":5,"@turnercode/digital-ads-utilities/dist/localization":6}]},{},[10])(10)})});var Ls=A((Cs,bt)=>{(function(t){typeof Cs=="object"&&typeof bt!="undefined"?bt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).AdFuel=t()})(function(){return function t(y,e,r){function g(o,a){if(!e[o]){if(!y[o]){var d=typeof I=="function"&&I;if(!a&&d)return d(o,!0);if(p)return p(o,!0);throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a}d=e[o]={exports:{}},y[o][0].call(d.exports,function(u){return g(y[o][1][u]||u)},d,d.exports,t,y,e,r)}return e[o].exports}for(var p=typeof I=="function"&&I,i=0;i<r.length;i++)g(r[i]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var r,g=t("./Logger"),p=t("./promiseWithTimeout"),i=t("./localization"),t=((t=r=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(a,d,u,s,l,m,f,v){m===void 0&&(m=r.EnableForDomestic|r.EnableForForeign),f===void 0&&(f=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var n=this;this.config=a,this.MODULE_NAME=d,this.MODULE_VERSION=u,this.MODULE_LOG_TAG=s,this.logStyle=l,this.moduleFlags=m,this.consentTags=f,this.MODULE_VIDEO_API_KEY=v,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var h=r.None;return(0,i.isIntl)()&&(h|=r.EnableForForeign),(0,i.isIntl)()||(h|=r.EnableForDomestic),(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic&&(n.moduleFlags&r.EnableForForeign)===r.EnableForForeign?h===(h&r.EnableForDomestic)||h===(h&r.EnableForForeign):(n.moduleFlags&r.EnableForDomestic)===r.EnableForDomestic?h===(h&r.EnableForDomestic):h===(h&r.EnableForForeign)},this.callInit=function(){n.logger.log("Waiting for UserConsent..."),n.waitForUserConsent().then(function(){var h;n.logger.log("Checking Module Flags...",n.moduleFlags),(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent||(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.inUserConsentState(n.consentTags)?(n.moduleFlags&&r.RunWithoutAdFuel)==r.RunWithoutAdFuel?((h=window.AdFuel)!=null&&h.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var _;n.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var _;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)):(n.logger.log("Waiting for AdFuel..."),n.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(n)||document.addEventListener("AdFuelCreated",function(){var c;n.logger.log("Registering with AdFuel..."),(c=window.AdFuel)!=null&&c.registerModule(n)}),n.logger.log("Checking Environment..."),n.environmentMatchesFlags()?(n.logger.log("Calling Init..."),n.init().then(function(){var c;window.AdFuel?(n.logger.log("Setting Module Loaded..."),(c=window.AdFuel)!=null&&c.setModuleLoaded(n.MODULE_LOG_TAG)):(n.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;n.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(n.MODULE_LOG_TAG)}))})):n.logger.warn("Not initializing ".concat(n.MODULE_NAME," for environmental reasons."),n.moduleFlags)}).catch(function(_){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for AdFuel."),_)})):n.logger.info("User consent is not granted.",(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.inUserConsentState(n.consentTags))}).catch(function(h){n.logger.warn("".concat(n.MODULE_NAME," errored waiting for consent."),h)})},this.waitForAdFuel=function(){return(n.moduleFlags&r.RunWithoutAdFuel)===r.RunWithoutAdFuel?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(h){window.AdFuel?h():document.addEventListener("AdFuelCreated",function(){h()})}))},this.waitForUserConsent=function(){var h;return(h=window.WM)==null||!h.UserConsent||(n.moduleFlags&r.RunWithoutConsent)==r.RunWithoutConsent?Promise.resolve():(0,p.promiseWithTimeout)(5e3,new Promise(function(_){var c;n._logger.log("Consent Promise with Timeout..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isReady()?(n._logger.log("Consent Is Ready..."),(c=(c=window.WM)==null?void 0:c.UserConsent)!=null&&c.isInRegion("gdpr")?(n._logger.log("Region is GDPR..."),(c=(c=(c=window.WM)==null?void 0:c.UserConsent)==null?void 0:c.isOptanonLoaded())!=null&&c?(n._logger.log("Optanon is Loaded..."),_()):(n._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){n._logger.log("Optanon is Loaded..."),_()}))):(n._logger.log("Region is not GDPR..."),_())):(c=window.WM)!=null&&c.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":13,"./promiseWithTimeout":15}],2:[function(t,y,e){"use strict";function r(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,r.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},r.setCookie=function(g){var p=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(i){p+=" "+i.key+"="+i.value+";"}),g.secure&&(p+=" Secure"),document.cookie=p},r.readCookie=function(g){var p,i,o=!1,a=null;return(o=typeof localStorage!="undefined"?!0:o)&&(a=localStorage.getItem(g)),o&&a!==null||(i=(p=g).length+1,a=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(d){return d.trim()}).filter(function(d){return d.substring(0,i)==="".concat(p,"=")}).map(function(d){return decodeURIComponent(d.substring(i))})[0]||null),a},e.CookieHelper=r},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=r=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(p.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),p.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},p.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},p.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},p.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},p.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},p.prototype.getUrlParam=function(i){return typeof document!="undefined"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var r,g=p;function p(i,o,a,d){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=a||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=d||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),r.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),r.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function r(g){this._tag="ADFUEL",this._tag=g,this.addMark("AdFuel Load START")}Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=void 0,r.prototype.addMark=function(g){typeof window!="undefined"&&window.performance.mark("[".concat(this._tag,"] ").concat(g))},r.prototype.addMeasure=function(g){typeof window!="undefined"&&window.performance.measure("[".concat(this._tag,"] ").concat(g),"[".concat(this._tag,"] ").concat(g," START"),"[".concat(this._tag,"] ").concat(g," END"))},r.prototype.getMarks=function(){var g,p=this;return(g=window==null?void 0:window.performance.getEntriesByType("mark").filter(function(i){return i.name.indexOf("[".concat(p._tag,"] "))}))!=null?g:[]},r.prototype.getMeasures=function(){var g,p=this;return(g=window==null?void 0:window.performance.getEntriesByType("measure").filter(function(i){return i.name.indexOf("[".concat(p._tag,"] "))}))!=null?g:[]},e.Performance=r},{}],5:[function(t,y,e){"use strict";function r(g){var p=this;this.logger=g,this.re=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\[\]\.,;:\s@\"]+\.)+[^<>()\[\]\.,;:\s@\"]{2,})/i,this.present=function(){return p.presentInQueryString()||p.presentInHash()||p.presentInReferrer()}}Object.defineProperty(e,"__esModule",{value:!0}),e.PiiFilter=void 0,r.prototype.presentInQueryString=function(){if(document.location.search){var g=document.location.search.search(this.re)+1,p=void 0;try{p=decodeURIComponent(document.location.search).search(this.re)+1}catch(i){p=g}return g===1||p===1}return!1},r.prototype.presentInHash=function(){if(document.location.hash){var g=document.location.hash.search(this.re)+1,p=void 0;try{p=decodeURIComponent(document.location.hash).search(this.re)+1}catch(i){p=g}return g||p}return!1},r.prototype.presentInReferrer=function(){if(document.referrer){var g=document.referrer.search(this.re)+1,p=void 0;try{p=decodeURIComponent(document.location.referrer).search(this.re)+1}catch(i){p=g}return g||p}return!1},r.prototype.filterDFPRequest=function(){if(this.presentInQueryString()||this.presentInHash()||this.presentInReferrer()){if(typeof window!="undefined"&&window.AdFuel){this.logger.log("Filtering DFP Request due to PII in query string.");for(var g=Object.getOwnPropertyNames(window.AdFuel),p=0;p<g.length;p++);window.googletag=null}return!0}return!1},Object.defineProperty(r.prototype,"qs",{get:function(){return this.presentInQueryString},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hash",{get:function(){return this.presentInHash},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ref",{get:function(){return this.presentInReferrer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isPIIPresent",{get:function(){return this.present},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"filter",{get:function(){return this.filterDFPRequest},enumerable:!1,configurable:!0}),e.PiiFilter=r},{}],6:[function(t,y,e){"use strict";function r(g,p,i,o){var a=this;this.setMajorTo=g,this.setMinorTo=p,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(d){return a.setFamilyTo=d,a},this.toString=function(){return"".concat(a.major,".").concat(a.minor.toString().padStart(2,"0"),".").concat(a.revision.toString().padStart(3,"0")," ").concat(a.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(r.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=r},{}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateCacheBuster=void 0,e.generateCacheBuster=function(){for(var r="",g=0;g<10;g++)r+=Math.floor(9*Math.random()).toString();return r}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(r){return typeof document!="undefined"&&(r=r.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),r=new RegExp("[\\?&]"+r+"=([^&#]*)"),document)&&document.location&&document.location.search&&(r=r.exec(document.location.search))?r[1]:""}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getViewport=void 0,e.getViewport=function(){var r=0,g=0,g=typeof window!="undefined"&&window&&window.innerWidth!==void 0?(r=window.innerWidth,window.innerHeight):(typeof document!="undefined"&&document&&document.documentElement!==void 0&&document.documentElement.clientWidth!==void 0&&document.documentElement.clientWidth!==0?(r=document.documentElement.clientWidth,document.documentElement):(r=document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0])).clientHeight;return{width:r,height:g,toGpt:[""+r,""+g]}}},{}],10:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasVideo=void 0,e.hasVideo=function(){var r=document.getElementsByTagName("video"),g=document.getElementsByClassName("fave-wrapper"),p=document.getElementsByClassName("top-container");return!!r.length||!!g.length||!!p.length}},{}],11:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=e.Version=e.PiiFilter=e.Performance=e.toString=e.setHostAndPathNames=e.selectedEdition=e.promiseWithTimeout=e.normalizeUrl=e.noop=e.ModuleFlags=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=e.Logger=e.locationServiceURL=e.loadScriptFromUrl=e.isUSCNN=e.isIntl=e.hasVideo=e.hasUserConsent=e.getUrlParam=e.generateCacheBuster=e.countryCode=e.CookieHelper=e.AAdFuelModule=void 0;var r=t("./AAdFuelModule"),g=(Object.defineProperty(e,"AAdFuelModule",{enumerable:!0,get:function(){return r.AAdFuelModule}}),Object.defineProperty(e,"ModuleFlags",{enumerable:!0,get:function(){return r.ModuleFlags}}),t("./CookieHelper")),p=(Object.defineProperty(e,"CookieHelper",{enumerable:!0,get:function(){return g.CookieHelper}}),t("./getUrlParam")),i=(Object.defineProperty(e,"getUrlParam",{enumerable:!0,get:function(){return p.getUrlParam}}),t("./hasVideo")),o=(Object.defineProperty(e,"hasVideo",{enumerable:!0,get:function(){return i.hasVideo}}),t("./localization")),a=(Object.defineProperty(e,"isIntl",{enumerable:!0,get:function(){return o.isIntl}}),Object.defineProperty(e,"isUSCNN",{enumerable:!0,get:function(){return o.isUSCNN}}),t("./loadScriptFromUrl")),d=(Object.defineProperty(e,"loadScriptFromUrl",{enumerable:!0,get:function(){return a.loadScriptFromUrl}}),t("./Logger")),u=(Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return d.Logger}}),t("./normalizeUrl")),s=(Object.defineProperty(e,"normalizeUrl",{enumerable:!0,get:function(){return u.normalizeUrl}}),t("./promiseWithTimeout")),l=(Object.defineProperty(e,"promiseWithTimeout",{enumerable:!0,get:function(){return s.promiseWithTimeout}}),t("./Performance")),m=(Object.defineProperty(e,"Performance",{enumerable:!0,get:function(){return l.Performance}}),t("./PiiFilter")),f=(Object.defineProperty(e,"PiiFilter",{enumerable:!0,get:function(){return m.PiiFilter}}),t("./setHostAndPathNames")),v=(Object.defineProperty(e,"setHostAndPathNames",{enumerable:!0,get:function(){return f.setHostAndPathNames}}),t("./generateCacheBuster")),n=(Object.defineProperty(e,"generateCacheBuster",{enumerable:!0,get:function(){return v.generateCacheBuster}}),t("./variables")),h=(Object.defineProperty(e,"MODULE_VERSION",{enumerable:!0,get:function(){return n.MODULE_VERSION}}),Object.defineProperty(e,"MODULE_NAME",{enumerable:!0,get:function(){return n.MODULE_NAME}}),Object.defineProperty(e,"MODULE_LOG_TAG",{enumerable:!0,get:function(){return n.MODULE_LOG_TAG}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return n.toString}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return n.noop}}),Object.defineProperty(e,"countryCode",{enumerable:!0,get:function(){return n.countryCode}}),Object.defineProperty(e,"locationServiceURL",{enumerable:!0,get:function(){return n.locationServiceURL}}),Object.defineProperty(e,"selectedEdition",{enumerable:!0,get:function(){return n.selectedEdition}}),Object.defineProperty(e,"hasUserConsent",{enumerable:!0,get:function(){return n.hasUserConsent}}),t("./Version")),_=(Object.defineProperty(e,"Version",{enumerable:!0,get:function(){return h.Version}}),t("./waitForVideo"));Object.defineProperty(e,"waitForVideo",{enumerable:!0,get:function(){return _.waitForVideo}})},{"./AAdFuelModule":1,"./CookieHelper":2,"./Logger":3,"./Performance":4,"./PiiFilter":5,"./Version":6,"./generateCacheBuster":7,"./getUrlParam":8,"./hasVideo":10,"./loadScriptFromUrl":12,"./localization":13,"./normalizeUrl":14,"./promiseWithTimeout":15,"./setHostAndPathNames":16,"./variables":17,"./waitForVideo":18}],12:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var r=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,p,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,r.promiseWithTimeout)(5e3,new Promise(function(a,d){var u,s,l=i.createElement("script");if(document.getElementById(p))d("Element name ".concat(p," already exists in the document."));else try{var m="",f=(m=1<g.split("//").length?g:((s=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&s?"https://":"http://").concat(g),i.getElementsByTagName("script")[0]);if(l.id=p,l.type="text/javascript",l.src=m,l.async=o,l.addEventListener("load",function(){a(l)}),f==null||!f.parentNode)throw new Error("Could not insert script.");f.parentNode.insertBefore(l,f)}catch(v){console.log("Error in loading script from ".concat(l.src),v),d(v)}}))}},{"./promiseWithTimeout":15}],13:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var r=t("./setHostAndPathNames"),g=t("./getUrlParam"),p=t("./Logger"),i=t("./variables"),o=new p.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),a=!1,d=!1;e.isIntl=function(){var u=!1,s=(0,r.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(a||(a=!0,o.log("Faking international site. Using International PubIds.")),u=!0):0<=s.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(a||(a=!0,o.log("Full international site. Using International PubIds.")),u=!0):i.countryCode===""||i.countryCode===null?(a||(a=!0,o.log("No country code.")),u=!1):i.countryCode!=="US"&&i.countryCode!=="CA"?0<=s.search(/^.*(money|\.cnn)\./)?(0<=s.search(/^.*us\.cnn\.com/)&&(a||o.log("International user but domestic page.  Using alternate international PubIds if available."),d=!0),a||(a=!0,o.log("International country code.")),u=!0):0<=s.search(/^.*us\.cnn\.com/)?(a||(a=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),d=u=!0):(a||(a=!0,o.log("International country code but domestic site.")),u=!0):a||(a=!0,o.log("Domestic site or country code."),u=!1),u},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",d),d},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":8,"./setHostAndPathNames":16,"./variables":17}],14:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeUrl=void 0,e.normalizeUrl=function(r){var g=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,normalizeHttp:!0,stripFragment:!0,stripWWW:!0,removeQueryParameters:!0,removeTrailingSlash:!1,removeDirectoryIndex:!1},{}),p=r.trim(),i=r[0]==="/"&&r[1]==="/",o=(!i&&/^\.*\//.test(r)||(p=r.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,"http://")),document.createElement("a"));if(o.href=p,g.normalizeHttps&&g.normalizeHttp)throw new Error("The `normalizeHttp` and `normalizeHttps` options cannot be used together");return g.normalizeHttp&&(o.protocol==="http:"||i)&&(o.protocol="https:"),g.normalizeHttps&&(o.protocol==="https:"||i)&&(o.protocol="http:"),g.stripFragment&&(o.hash=""),o.pathname&&(o.pathname=o.pathname.replace(/((?![https?:]).)\/{2,}/g,function(a,d){return/^(?!\/)/g.test(d)?d+"/":"/"})),o.pathname&&(o.pathname=decodeURI(o.pathname)),o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),g.stripWWW)&&(o.hostname=o.hostname.replace(/^www\./,"")),g.removeQueryParameters&&(o.search=""),p=o.href,!g.removeTrailingSlash&&o.pathname!=="/"||(p=r.replace(/\/$/,"")),p=i&&!g.normalizeProtocol?r.replace(/^http:\/\//,"//"):p}},{}],15:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(r,g,p){p===void 0&&(p="The promise timed out.");var i=new Promise(function(o,a){var d=setTimeout(function(){clearTimeout(d),a(p)},r)});return Promise.race([g,i])}},{}],16:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var r=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return r.href=typeof document!="undefined"?document.location.href:"",r.hostname}},{}],17:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var r=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new r.Version(1,0,0,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(r=t.CookieHelper.readCookie("CG"))==null?void 0:r.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(r=t.CookieHelper.readCookie("SelectedEdition"))!=null?r:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":6}],18:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=void 0,e.waitForVideo=function(r){var g=!1,p=new MutationObserver(function(d){var u=document.getElementsByTagName("video"),s=document.getElementsByClassName("fave-wrapper"),l=document.getElementsByClassName("top-container");(u.length||s.length||l.length)&&(g||r(),g=!0,p.disconnect())}),i=(p.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),document.getElementsByTagName("video")),o=document.getElementsByClassName("fave-wrapper"),a=document.getElementsByClassName("top-container");(i.length||o.length||a.length)&&(r(),g=!0,p.disconnect())}},{}],19:[function(t,y,e){"use strict";var r,g=this&&this.__extends||(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(c,b){c.__proto__=b}:function(c,b){for(var E in b)b.hasOwnProperty(E)&&(c[E]=b[E])}),function(c,b){function E(){this.constructor=c}r(c,b),c.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}),p=(Object.defineProperty(e,"__esModule",{value:!0}),t("./Enumerables")),i=t("./Comparers"),t=(o.prototype.toList=function(){return new l(this.toArray())},o.prototype.toDictionary=function(c,b){return h.fromArray(this.toArray(),c,b)},o.prototype.reverse=function(){return new p.ReverseEnumerable(this.asEnumerable())},o.prototype.concat=function(c){for(var b,E=[],S=1;S<arguments.length;S++)E[S-1]=arguments[S];return(b=this.asEnumerable()).concat.apply(b,[c].concat(E))},o.prototype.contains=function(c){return this.any(function(b){return b===c})},o.prototype.where=function(c){return new p.ConditionalEnumerable(this.asEnumerable(),c)},o.prototype.select=function(c){return new p.TransformEnumerable(this.asEnumerable(),c)},o.prototype.selectMany=function(c){return this.select(function(b){return b=c(b),b instanceof Array?new p.ArrayEnumerable(b):b.asEnumerable()}).toArray().reduce(function(b,E){return new p.ConcatEnumerable(b,E)},p.Enumerable.empty())},o.prototype.elementAt=function(c){if(c=this.elementAtOrDefault(c),c===void 0)throw new Error("Out of bounds");return c},o.prototype.except=function(c){return this.asEnumerable().except(c)},o.prototype.first=function(c){if(c=c!==void 0?this.firstOrDefault(c):this.firstOrDefault(),c===void 0)throw new Error("Sequence contains no elements");return c},o.prototype.groupBy=function(c,b){for(var E=this.toArray(),S=new h,C=0;C<E.length;++C){var L=c(E[C]),O=b!==void 0?b(E[C]):E[C];S.containsKey(L)||S.set(L,new l),S.get(L).push(O)}return S.asEnumerable()},o.prototype.last=function(c){if(c=c!==void 0?this.lastOrDefault(c):this.lastOrDefault(),c===void 0)throw new Error("Sequence contains no elements");return c},o.prototype.single=function(c){if(c=c!==void 0?this.singleOrDefault(c):this.singleOrDefault(),c===void 0)throw new Error("Sequence contains no elements");return c},o.prototype.singleOrDefault=function(c){return c!==void 0?this.asEnumerable().singleOrDefault(c):this.asEnumerable().singleOrDefault()},o.prototype.skipWhile=function(c){return this.asEnumerable().skipWhile(c)},o.prototype.takeWhile=function(c){return this.asEnumerable().takeWhile(c)},o.prototype.sequenceEqual=function(c,b){return b!==void 0?this.asEnumerable().sequenceEqual(c,b):this.asEnumerable().sequenceEqual(c)},o.prototype.distinct=function(c){return new p.UniqueEnumerable(this.asEnumerable(),c)},o.prototype.min=function(c){return c!==void 0?new p.TransformEnumerable(this.asEnumerable(),c).min():this.aggregate(function(b,E){return b!==void 0&&b<E?b:E})},o.prototype.orderBy=function(c,b){return new p.OrderedEnumerable(this.asEnumerable(),i.createComparer(c,!0,b))},o.prototype.orderByDescending=function(c){return new p.OrderedEnumerable(this.asEnumerable(),i.createComparer(c,!1,void 0))},o.prototype.max=function(c){return c!==void 0?new p.TransformEnumerable(this.asEnumerable(),c).max():this.aggregate(function(b,E){return b!==void 0&&E<b?b:E})},o.prototype.sum=function(c){return this.aggregate(function(b,E){return b+c(E)},0)},o.prototype.skip=function(c){return new p.RangeEnumerable(this.asEnumerable(),c,void 0)},o.prototype.take=function(c){return new p.RangeEnumerable(this.asEnumerable(),void 0,c)},o.prototype.union=function(c){return new p.UniqueEnumerable(this.concat(c))},o.prototype.aggregate=function(c,b){return b!==void 0?this.asEnumerable().aggregate(c,b):this.asEnumerable().aggregate(c)},o.prototype.any=function(c){return c!==void 0?this.asEnumerable().any(c):this.asEnumerable().any()},o.prototype.all=function(c){return this.asEnumerable().all(c)},o.prototype.average=function(c){return this.asEnumerable().average(c)},o.prototype.count=function(c){return c!==void 0?this.asEnumerable().count(c):this.asEnumerable().count()},o.prototype.elementAtOrDefault=function(c){return this.asEnumerable().elementAtOrDefault(c)},o.prototype.firstOrDefault=function(c){return c!==void 0?this.asEnumerable().firstOrDefault(c):this.asEnumerable().firstOrDefault()},o.prototype.lastOrDefault=function(c){return c!==void 0?this.asEnumerable().lastOrDefault(c):this.asEnumerable().lastOrDefault()},o.prototype.forEach=function(c){return this.asEnumerable().forEach(c)},o.prototype.defaultIfEmpty=function(c){return c!==void 0?this.asEnumerable().defaultIfEmpty(c):this.asEnumerable().defaultIfEmpty()},o.prototype.zip=function(c,b){return this.asEnumerable().zip(c,b)},o);function o(){}e.EnumerableCollection=t,g(u,a=t),u.prototype.asArray=function(){return this.source},u.prototype.toArray=function(){return[].concat(this.source)},u.prototype.toList=function(){return new l(this.toArray())},u.prototype.asEnumerable=function(){return new p.ArrayEnumerable(this.source)},u.prototype.aggregate=function(c,b){return b!==void 0?this.source.reduce(c,b):this.source.reduce(c)},u.prototype.any=function(c){return c!==void 0?this.source.some(c):0<this.source.length},u.prototype.all=function(c){return this.source.every(c)},u.prototype.average=function(c){if(this.count()===0)throw new Error("Sequence contains no elements");for(var b=0,E=0,S=this.source.length;E<S;++E)b+=c(this.source[E]);return b/this.source.length},u.prototype.count=function(c){return(c!==void 0?this.source.filter(c):this.source).length},u.prototype.elementAtOrDefault=function(c){if(c<0)throw new Error("Negative index is forbiden");return this.source[c]},u.prototype.firstOrDefault=function(c){return(c!==void 0?this.source.filter(c):this.source)[0]},u.prototype.groupBy=function(c,b){for(var E=this.asArray(),S=new h,C=0;C<E.length;++C){var L=c(E[C]),O=b!==void 0?b(E[C]):E[C];S.containsKey(L)||S.set(L,new l),S.get(L).push(O)}return S.asEnumerable()},u.prototype.lastOrDefault=function(c){return c!==void 0?(c=this.source.filter(c))[c.length-1]:this.source[this.source.length-1]},u.prototype.forEach=function(c){for(var b=0,E=this.source.length;b<E;++b)c(this.source[b],b)},u.prototype.sequenceEqual=function(c,b){if(b===void 0&&(b=i.strictEqualityComparer()),c instanceof u||c instanceof Array){var E=this.asArray(),S=c instanceof u?c.asArray():c;if(E.length!=S.length)return!1;for(var C=0;C<E.length;++C)if(!b(E[C],S[C]))return!1;return!0}return this.asEnumerable().sequenceEqual(c,b)};var a,d=u;function u(c){c===void 0&&(c=[]);var b=a.call(this)||this;return b.source=c,b}e.ArrayQueryable=d,g(m,s=d),m.prototype.copy=function(){return new m(this.toArray())},m.prototype.asReadOnly=function(){return this},m.prototype.clear=function(){this.source=[]},m.prototype.remove=function(c){for(var b=[],E=0,S=this.source.length;E<S;++E)this.source[E]!==c&&b.push(this.source[E]);this.source=b},m.prototype.removeAt=function(c){if(c<0||this.source[c]===void 0)throw new Error("Out of bounds");return this.source.splice(c,1)[0]},m.prototype.get=function(c){return this.source[c]},m.prototype.push=function(c){return this.source.push(c)},m.prototype.pushRange=function(c){return c instanceof Array||(c=c.toArray()),this.source.push.apply(this.source,c)},m.prototype.pushFront=function(c){return this.source.unshift(c)},m.prototype.pop=function(){return this.source.pop()},m.prototype.popFront=function(){return this.source.shift()},m.prototype.set=function(c,b){if(c<0)throw new Error("Out of bounds");this.source[c]=b},m.prototype.insert=function(c,b){if(c<0||c>this.source.length)throw new Error("Out of bounds");this.source.splice(c,0,b)},m.prototype.indexOf=function(c){return this.source.indexOf(c)};var s,l=m;function m(){return s!==null&&s.apply(this,arguments)||this}e.List=l,g(v,f=d),v.prototype.copy=function(){return new v(this.toArray())},v.prototype.clear=function(){this.source=[]},v.prototype.peek=function(){return this.source[this.source.length-1]},v.prototype.pop=function(){return this.source.pop()},v.prototype.push=function(c){return this.source.push(c)};var f,d=v;function v(){return f!==null&&f.apply(this,arguments)||this}e.Stack=d,g(_,n=t),_.fromArray=function(c,b,E){return new _(c.map(function(S){return{key:b(S),value:E(S)}}))},_.fromJsObject=function(c){return new _(new l(Object.getOwnPropertyNames(c)).select(function(b){return{key:b,value:c[b]}}).toArray())},_.prototype.copy=function(){return new _(this.toArray())},_.prototype.asReadOnly=function(){return this},_.prototype.asEnumerable=function(){return new p.ArrayEnumerable(this.toArray())},_.prototype.toArray=function(){var c=this;return this.getKeys().select(function(b){return{key:b,value:c.dictionary[b]}}).toArray()},_.prototype.clear=function(){this.dictionary={}},_.prototype.containsKey=function(c){return this.dictionary.hasOwnProperty(c)},_.prototype.containsValue=function(c){for(var b=this.getKeysFast(),E=0;E<b.length;++E)if(this.dictionary[b[E]]===c)return!0;return!1},_.prototype.getKeys=function(){var c=this,b=this.getKeysFast();return new l(b.map(function(E){return c.keyType==="number"?parseFloat(E):E}))},_.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},_.prototype.getValues=function(){for(var c=this.getKeysFast(),b=new Array(c.length),E=0;E<c.length;++E)b[E]=this.dictionary[c[E]];return new l(b)},_.prototype.remove=function(c){this.containsKey(c)&&delete this.dictionary[c]},_.prototype.get=function(c){if(this.containsKey(c))return this.dictionary[c];throw new Error("Key doesn't exist: "+c)},_.prototype.set=function(c,b){if(this.containsKey(c))throw new Error("Key already exists: "+c);this.setOrUpdate(c,b)},_.prototype.setOrUpdate=function(c,b){this.keyType===void 0&&(this.keyType=typeof c),this.dictionary[c]=b};var n,h=_;function _(c){var b=n.call(this)||this;if(b.clear(),c!==void 0)for(var E=0;E<c.length;++E){var S=c[E];b.set(S.key,S.value)}return b}e.Dictionary=h},{"./Comparers":20,"./Enumerables":21}],20:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.strictEqualityComparer=function(){return function(r,g){return r===g}},e.combineComparers=function(r,g){return function(p,i){return r(p,i)||g(p,i)}},e.createComparer=function(r,g,p){return p!==void 0?function(i,o){return p(r(i),r(o))}:g?function(i,o){return i=r(i),o=r(o),i<o?-1:o<i?1:0}:function(i,o){return i=r(i),o=r(o),i<o?1:o<i?-1:0}}},{}],21:[function(t,y,e){"use strict";var r,g=this&&this.__extends||(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(w,M){w.__proto__=M}:function(w,M){for(var F in M)M.hasOwnProperty(F)&&(w[F]=M[F])}),function(w,M){function F(){this.constructor=w}r(w,M),w.prototype=M===null?Object.create(M):(F.prototype=M.prototype,new F)}),p=(Object.defineProperty(e,"__esModule",{value:!0}),t("./Iterators")),i=t("./Comparers"),o=t("./Collections"),a=t("./Utils"),t=(d.prototype.reset=function(){this.source.reset()},d.prototype.next=function(){return this.source.next()},d.prototype.asEnumerable=function(){return this},d.prototype.toArray=function(){var w=[];for(this.reset();this.next();)w.push(this.value());return w},d.prototype.toList=function(){return new o.List(this.toArray())},d.prototype.toDictionary=function(w,M){return o.Dictionary.fromArray(this.toArray(),w,M)},d.prototype.count=function(w){if(w!==void 0)return new f(this,w).count();var M=0;for(this.reset();this.next();)++M;return M>>>0},d.prototype.any=function(w){return w!==void 0?new f(this,w).any():(this.reset(),this.next())},d.prototype.all=function(w){for(this.reset();this.next();)if(!w(this.value()))return!1;return!0},d.prototype.reverse=function(){return new re(this.copy())},d.prototype.contains=function(w){return this.any(function(M){return M===w})},d.prototype.sequenceEqual=function(w,M){M===void 0&&(M=i.strictEqualityComparer());var F=w instanceof Array?new z(w):w.asEnumerable();for(this.reset(),F.reset();this.next();)if(!F.next()||!M(this.value(),F.value()))return!1;return!F.next()},d.prototype.where=function(w){return new f(this.copy(),w)},d.prototype.select=function(w){return new $(this.copy(),w)},d.prototype.selectMany=function(w){return this.select(function(M){return M=w(M),Array.isArray(M)?new z(M):M.asEnumerable()}).toArray().reduce(function(M,F){return new C(M,F)},s.empty())},d.prototype.skipWhile=function(w){return new h(this.copy(),w)},d.prototype.concat=function(w){for(var M=[],F=1;F<arguments.length;F++)M[F-1]=arguments[F];for(var U=function(We){return We instanceof Array?new z(We):We.asEnumerable()},x=new C(this.copy(),U(w).copy()),X=0,ke=M.length;X<ke;++X)x=new C(x,U(M[X]).copy());return x},d.prototype.defaultIfEmpty=function(w){return new Mt(this,w)},d.prototype.elementAt=function(w){if(w=this.elementAtOrDefault(w),w===void 0)throw new Error("Out of bounds");return w},d.prototype.elementAtOrDefault=function(w){if(w<0)throw new Error("Negative index is forbiden");this.reset();for(var M=-1;this.next()&&++M!==w;);if(M===w)return this.value()},d.prototype.except=function(w){return this.where(function(M){return!w.contains(M)})},d.prototype.first=function(w){if(w=w!==void 0?this.firstOrDefault(w):this.firstOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},d.prototype.firstOrDefault=function(w){return w!==void 0?new f(this,w).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},d.prototype.forEach=function(w){this.reset();for(var M=0;this.next();++M)w(this.value(),M)},d.prototype.groupBy=function(w,M){for(var F=this.toArray(),U=new o.Dictionary,x=0;x<F.length;++x){var X=w(F[x]),ke=M!==void 0?M(F[x]):F[x];U.containsKey(X)||U.set(X,new o.List),U.get(X).push(ke)}return U.asEnumerable()},d.prototype.last=function(w){if(w=w!==void 0?this.lastOrDefault(w):this.lastOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},d.prototype.lastOrDefault=function(w){return w!==void 0?new f(this,w).lastOrDefault():((w=new re(this)).reset(),w.next()?w.value():void 0)},d.prototype.single=function(w){if(w=w!==void 0?this.singleOrDefault(w):this.singleOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},d.prototype.singleOrDefault=function(w){if(w!==void 0)return new f(this,w).singleOrDefault();if(this.reset(),this.next()){if(w=this.value(),this.next())throw new Error("Sequence contains more than 1 element");return w}},d.prototype.distinct=function(w){return new D(this.copy(),w)},d.prototype.aggregate=function(w,M){var F=M;if(this.reset(),M===void 0){if(!this.next())throw new Error("Sequence contains no elements");F=w(F,this.value())}for(;this.next();)F=w(F,this.value());return F},d.prototype.min=function(w){return w!==void 0?new $(this,w).min():this.aggregate(function(M,F){return M!==void 0&&M<F?M:F})},d.prototype.orderBy=function(w,M){return new xe(this.copy(),i.createComparer(w,!0,M))},d.prototype.orderByDescending=function(w){return new xe(this.copy(),i.createComparer(w,!1,void 0))},d.prototype.max=function(w){return w!==void 0?new $(this,w).max():this.aggregate(function(M,F){return M!==void 0&&F<M?M:F})},d.prototype.sum=function(w){return this.aggregate(function(M,F){return M+w(F)},0)},d.prototype.average=function(w){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");for(var M=0,F=0;M+=w(this.value()),++F,this.next(););return M/F},d.prototype.skip=function(w){return new q(this.copy(),w,void 0)},d.prototype.take=function(w){return new q(this.copy(),void 0,w)},d.prototype.takeWhile=function(w){return new b(this.copy(),w)},d.prototype.union=function(w){return new D(this.concat(w))},d.prototype.zip=function(w,M){return w=w instanceof Array?new z(w):w.asEnumerable(),new St(this,w,M)},d);function d(w){this.source=w}e.EnumerableBase=t,g(l,u=t),l.fromSource=function(w){return new(w instanceof Array?z:l)(w)},l.empty=function(){return l.fromSource([])},l.range=function(w,M,F){if(F===void 0&&(F=!0),M<0)throw new Error("Count must be >= 0");var U=new Array(M);if(F)for(var x=0;x<M;U[x]=w+x++);else for(x=0;x<M;U[x]=w-x++);return new z(U)},l.repeat=function(w,M){if(M<0)throw new Error("Count must me >= 0");for(var F=new Array(M),U=0;U<M;++U)F[U]=w;return new z(F)},l.prototype.copy=function(){return new l(this.source.copy())},l.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},l.prototype.reset=function(){u.prototype.reset.call(this),this.currentValue.invalidate()},l.prototype.next=function(){return this.currentValue.invalidate(),u.prototype.next.call(this)};var u,s=l;function l(w){return w=u.call(this,w)||this,w.currentValue=new a.Cached,w}e.Enumerable=s,g(v,m=s),v.prototype.copy=function(){return new v(this.source.copy(),this._predicate)},v.prototype.next=function(){for(var w;(w=m.prototype.next.call(this))&&!this._predicate(this.value()););return w};var m,f=v;function v(w,M){return w=m.call(this,w)||this,w._predicate=M,w}e.ConditionalEnumerable=f,g(_,n=s),_.prototype.reset=function(){n.prototype.reset.call(this),this._shouldContinueChecking=!0},_.prototype.copy=function(){return new _(this.source.copy(),this._predicate)},_.prototype.next=function(){if(!this._shouldContinueChecking)return n.prototype.next.call(this);for(var w;(w=n.prototype.next.call(this))&&this._predicate(this.value()););return this._shouldContinueChecking=!1,w};var n,h=_;function _(w,M){return w=n.call(this,w)||this,w._predicate=M,w._shouldContinueChecking=!0,w}e.SkipWhileEnumerable=h,g(E,c=s),E.prototype.reset=function(){c.prototype.reset.call(this),this._shouldContinueTaking=!0},E.prototype.copy=function(){return new E(this.source.copy(),this._predicate)},E.prototype.next=function(){return!!(c.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1)};var c,b=E;function E(w,M){return w=c.call(this,w)||this,w._predicate=M,w._shouldContinueTaking=!0,w}e.TakeWhileEnumerable=b,g(L,S=s),L.prototype.copy=function(){return new L(this.source.copy(),this._otherSource.copy())},L.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},L.prototype.next=function(){this.currentValue.invalidate();var w=(this._isFirstSourceFinished?this._otherSource:this.source).next();return w||this._isFirstSourceFinished?w:(this._isFirstSourceFinished=!0,this.next())},L.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=(this._isFirstSourceFinished?this._otherSource:this.source).value()),this.currentValue.value};var S,C=L;function L(w,M){return w=S.call(this,w)||this,w._otherSource=M,w._isFirstSourceFinished=!1,w}e.ConcatEnumerable=C,g(P,O=s),P.prototype.copy=function(){return new P(this.source.copy(),this._keySelector)},P.prototype.reset=function(){O.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},P.prototype.isUnique=function(w){var w=this._keySelector!==void 0?this._keySelector(w):w,M=typeof w;return M in this._seen.primitive?!this._seen.primitive[M].hasOwnProperty(w)&&(this._seen.primitive[M][w]=!0):this._seen.complex.indexOf(w)===-1&&-1<this._seen.complex.push(w)},P.prototype.next=function(){for(var w;(w=O.prototype.next.call(this))&&!this.isUnique(this.value()););return w};var O,D=P;function P(w,M){return w=O.call(this,w)||this,w._keySelector=M,w._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},w}e.UniqueEnumerable=D,g(W,j=s),W.prototype.copy=function(){return new W(this.source.copy(),this._start,this._count)},W.prototype.reset=function(){j.prototype.reset.call(this),this._currentIndex=-1},W.prototype.isValidIndex=function(){var w=this._start!==void 0?this._start:0,M=this._count!==void 0?w+this._count:void 0;return this._currentIndex>=w&&(M===void 0||this._currentIndex<M)},W.prototype.performSkip=function(){for(var w=this._start!==void 0?this._start:0,M=!0;M&&this._currentIndex+1<w;)M=j.prototype.next.call(this),++this._currentIndex;return M},W.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,j.prototype.next.call(this))&&this.isValidIndex()},W.prototype.value=function(){if(this.isValidIndex())return j.prototype.value.call(this);throw new Error("Out of bounds")};var j,q=W;function W(w,M,F){var U=this;if(M!==void 0&&M<0||F!==void 0&&F<0)throw new Error("Incorrect parameters");return(U=j.call(this,w)||this)._start=M,U._count=F,U._currentIndex=-1,U}e.RangeEnumerable=q,g(V,R=t),V.prototype.copy=function(){return new V(this.source.copy(),this._transform)},V.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},V.prototype.reset=function(){R.prototype.reset.call(this),this._currentValue.invalidate()},V.prototype.next=function(){return this._currentValue.invalidate(),R.prototype.next.call(this)};var R,$=V;function V(w,M){return w=R.call(this,w)||this,w._transform=M,w._currentValue=new a.Cached,w}e.TransformEnumerable=$,g(k,ne=s),k.prototype.copy=function(){return new k(this.source.copy())},k.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},k.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},k.prototype.all=function(w){return this.source.all(w)},k.prototype.any=function(w){return w!==void 0?this.source.any(w):this.source.any()},k.prototype.average=function(w){return this.source.average(w)},k.prototype.count=function(w){return w!==void 0?this.source.count(w):this.source.count()},k.prototype.max=function(w){return w!==void 0?this.source.max(w):this.source.max()},k.prototype.min=function(w){return w!==void 0?this.source.min(w):this.source.min()},k.prototype.reverse=function(){return this.source.copy()},k.prototype.sum=function(w){return this.source.sum(w)},k.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},k.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._elements.value.length-1-this._currentIndex];throw new Error("Out of bounds")};var ne,re=k;function k(w){return w=ne.call(this,w)||this,w._elements=new a.Cached,w._currentIndex=-1,w}e.ReverseEnumerable=re,g(N,Et=t),N.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},N.prototype.orderBy=function(w,M){return new N(this.source.copy(),i.createComparer(w,!0,M))},N.prototype.orderByDescending=function(w){return new N(this.source.copy(),i.createComparer(w,!1,void 0))},N.prototype.thenBy=function(w,M){return new N(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(w,!0,M)))},N.prototype.thenByDescending=function(w){return new N(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(w,!1,void 0)))},N.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},N.prototype.copy=function(){return new N(this.source.copy(),this._comparer)},N.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._currentIndex];throw new Error("Out of bounds")},N.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},N.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)};var Et,xe=N;function N(w,M){return w=Et.call(this,w)||this,w._comparer=M,w._elements=new a.Cached,w._currentIndex=-1,w}e.OrderedEnumerable=xe,g(G,At=s),G.prototype.toArray=function(){return this.list.toArray()},G.prototype.aggregate=function(w,M){return M!==void 0?this.list.aggregate(w,M):this.list.aggregate(w)},G.prototype.any=function(w){return w!==void 0?this.list.any(w):this.list.any()},G.prototype.all=function(w){return this.list.all(w)},G.prototype.average=function(w){return this.list.average(w)},G.prototype.count=function(w){return w!==void 0?this.list.count(w):this.list.count()},G.prototype.copy=function(){return new G(this.list.asArray())},G.prototype.elementAtOrDefault=function(w){return this.list.elementAtOrDefault(w)},G.prototype.firstOrDefault=function(w){return w!==void 0?this.list.firstOrDefault(w):this.list.firstOrDefault()},G.prototype.lastOrDefault=function(w){return w!==void 0?this.list.lastOrDefault(w):this.list.lastOrDefault()};var At,z=G;function G(w){var M=At.call(this,new p.ArrayIterator(w))||this;return M.list=new o.List(w),M}e.ArrayEnumerable=z,g(Q,Se=t),Q.prototype.copy=function(){return new Q(this.source.copy(),this._defaultValue)},Q.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},Q.prototype.next=function(){var w=Se.prototype.next.call(this);return this._mustUseDefaultValue=this._mustUseDefaultValue===void 0&&!w,this._mustUseDefaultValue||w},Q.prototype.reset=function(){Se.prototype.reset.call(this),this._mustUseDefaultValue=void 0};var Se,Mt=Q;function Q(w,M){return w=Se.call(this,w)||this,w._mustUseDefaultValue=void 0,w._defaultValue=M,w}e.DefaultIfEmptyEnumerable=Mt,g(Z,Oe=t),Z.prototype.copy=function(){return new Z(this.source.copy(),this._otherSource.copy(),this._selector)},Z.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._selector(this.source.value(),this._otherSource.value())),this._currentValue.value},Z.prototype.reset=function(){Oe.prototype.reset.call(this),this._otherSource.reset(),this._isOneOfTheSourcesFinished=!1,this._currentValue.invalidate()},Z.prototype.next=function(){return this._currentValue.invalidate(),this._isOneOfTheSourcesFinished||(this._isOneOfTheSourcesFinished=!Oe.prototype.next.call(this)||!this._otherSource.next()),!this._isOneOfTheSourcesFinished};var Oe,St=Z;function Z(w,M,F){return w=Oe.call(this,w)||this,w._otherSource=M,w._isOneOfTheSourcesFinished=!1,w._currentValue=new a.Cached,w._selector=F,w}e.ZippedEnumerable=St},{"./Collections":19,"./Comparers":20,"./Iterators":22,"./Utils":24}],22:[function(t,y,e){"use strict";function r(g){this.source=g,this.reset()}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.copy=function(){return new r(this.source)},r.prototype.reset=function(){this._index=-1},r.prototype.isValidIndex=function(){return 0<=this._index&&this._index<this.source.length},r.prototype.next=function(){return++this._index,this.isValidIndex()},r.prototype.value=function(){if(this.isValidIndex())return this.source[this._index];throw new Error("Out of bounds")},e.ArrayIterator=r},{}],23:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("./Enumerables"),r=(e.Enumerable=r.Enumerable,t("./Iterators")),r=(e.ArrayIterator=r.ArrayIterator,t("./Collections")),r=(e.List=r.List,e.Dictionary=r.Dictionary,e.Stack=r.Stack,t("./Comparers"));e.strictEqualityComparer=r.strictEqualityComparer},{"./Collections":19,"./Comparers":20,"./Enumerables":21,"./Iterators":22}],24:[function(t,y,e){"use strict";function r(){this._isValid=!1}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.invalidate=function(){this._isValid=!1},r.prototype.isValid=function(){return this._isValid},Object.defineProperty(r.prototype,"value",{get:function(){if(this._isValid)return this._value;throw new Error("Trying to get value of invalid cache")},set:function(g){this._value=g,this._isValid=!0},enumerable:!0,configurable:!0}),e.Cached=r},{}],25:[function(t,y,e){"use strict";var r=this&&this.__spreadArray||function(l,m,f){if(f||arguments.length===2)for(var v,n=0,h=m.length;n<h;n++)!v&&n in m||((v=v||Array.prototype.slice.call(m,0,n))[n]=m[n]);return l.concat(v||Array.prototype.slice.call(m))},g=(Object.defineProperty(e,"__esModule",{value:!0}),e.bf=e.credits=e.getPageAdUnit=e.getCachedRegistries=e.getSlotDetails=e.setModuleLoaded=e.isModuleLoaded=e.setModuleReady=e.isModuleReady=e.getRocketeerSlots=e.getRegisteredModules=e.getQueuedSlots=e.getPageSlots=e.getExcludedSlotIds=e.getDispatchedSlots=e.getBuiltSlots=e.version=e.registerModule=e.__VERSION__=e.registry=e.setOptions=e.addEvent=e.dispatchQueue=e.enableLazyLoad=e.setBulkTargeting=e.clearSlots=e.removeSlotLevelTarget=e.addSlotLevelTarget=e.removePageLevelTarget=e.addPageLevelTarget=e.queueRegistry=e.refresh=e.destroySlots=e.configure=void 0,t("./presets.js"),t("@turnercode/digital-ads-utilities/dist")),p=t("./processors"),i=t("./system"),o=t("linq-collections"),a=t("./system/MissionControl"),d=t("./version.json"),u=(s.prototype.fireAdFuelCreated=function(){var l=this,m=1500,f=setInterval(function(){if(document.readyState==="interactive"||document.readyState==="complete"){try{l.logger.log("Dispatching AdFuelCreated..."),document.dispatchEvent(new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}}))}catch(v){l.logger.error("Error dispatching AdFuelCreated",v)}clearInterval(f)}else m<1&&clearInterval(f);m--},1)},s.createInstance=function(){this._instance=new s,window.AdFuel=this._instance,(l=this._instance.logger)!=null&&l.warn("New AdFuel instance created.",this._instance.adFuelOptions);var l=Object.assign(i.BaseAdFuelOptions,(l=JSON.parse(JSON.stringify(this._instance.adFuelOptions)))!=null?l:{});this._instance.adFuelOptions=l,this.processLoadedModules()},s.processLoadedModules=function(){if(window.AdFuelModules){for(var l=0,m=window.AdFuelModules;l<m.length;l++){var f=m[l];this._instance.perf.addMark("Registering Module - ".concat(f.MODULE_NAME)),this._instance.registerModule(f)}window.AdFuelModules=void 0}},Object.defineProperty(s,"instance",{get:function(){var l,m=this;return(l=window.WM)!=null&&l.UserConsent&&window.WM.UserConsent.isReady()?window.WM.UserConsent.getRegion()!=="ccpa"&&window.WM.UserConsent.getRegion()==="gdpr"?this._instance||(window.WM.UserConsent.isOptanonLoaded()?window.WM.UserConsent.getUserConsentAdvertisingState()?this.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions."):document.addEventListener("optanonLoaded",function(){var f;((f=(f=window.WM)==null?void 0:f.UserConsent)==null?void 0:f.getUserConsentAdvertisingState())?m.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions.")})):this._instance||this.createInstance():(l=window.WM)!=null&&l.UserConsent||this._instance||(console.warn("No User Consent.  Assuming consent is granted.  User Location switching will be unavailble."),this.createInstance()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"missionControl",{get:function(){return this._missionControl},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"moduleManager",{get:function(){return this._moduleManager},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"adFuelOptions",{get:function(){var l;return(l=(l=window.AdFuelOptions)==null?void 0:l.ADFUEL)!=null?l:i.BaseAdFuelOptions},set:function(l){window.AdFuelOptions?window.AdFuelOptions.ADFUEL=l:window.AdFuelOptions={ADFUEL:l,USER_CONSENT:{ENABLED:!0}}},enumerable:!1,configurable:!0}),s.prototype.configure=function(l){var m=this;return typeof l=="string"?fetch(l).then(function(f){m.ingestOptions(f.json())}):this.ingestOptions(l),this},s.prototype.ingestOptions=function(l){if("ADFUEL"in l)for(var m in window.AdFuelOptions||(window.AdFuelOptions={ADFUEL:{},USER_CONSENT:{ENABLED:!0}}),l)window.AdFuelOptions&&m in window.AdFuelOptions?Object.assign(window.AdFuelOptions[m],l[m]):window.AdFuelOptions[m]=l[m];else this.adFuelOptions=Object.assign(this.adFuelOptions,l)},Object.defineProperty(s.prototype,"registryOptions",{get:function(){return this._registryOptions},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"perf",{get:function(){return this._perf},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ver",{get:function(){return this._version.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fetchedRegistries",{get:function(){return this._registryLoader.fetchedRegistries},enumerable:!1,configurable:!0}),s.prototype.lastProcessed=function(){var l;return 0<this.processedData.count()?(l=this.processedData.max(function(m){return m.value.timestamp}),this.processedData.first(function(m){return m.value.timestamp===l}).value):new i.GptProcessData},s.prototype.undispatched=function(){return 0<this.processedData.count()?this.processedData.select(function(l){return l.value}).where(function(l){return!l.dispatched}).where(function(l){var m=!1;return l.wrappedSlots.forEach(function(f){m=m||!!f.gSlot}),m}).toArray():[]},s.prototype.isModuleReady=function(l){return(l=this.registeredModules.get(l).isReady)!=null&&l},s.prototype.setModuleReady=function(l){this.logger.info("Module ".concat(l," is reporting ready.")),this.perf.addMark("Module ".concat(l," is ready.")),this.registeredModules.containsKey(l)?this.registeredModules.get(l).isReady=!0:this.registeredModules.setOrUpdate(l,{moduleName:l,isLoaded:!1,isReady:!1,unWrappedModule:void 0}),this._moduleManager.areAllModulesReady&&this._moduleManager.areAllExpectedModulesLoaded&&this._missionControl.setReady({readyId:"modules"})},s.prototype.isModuleLoaded=function(l){return(l=this.registeredModules.get(l).isLoaded)!=null&&l},s.prototype.setModuleLoaded=function(l){this.logger.log("Module ".concat(l," is reporting loaded.")),this.perf.addMark("Module ".concat(l," is loaded.")),this.registeredModules.containsKey(l)?this.registeredModules.get(l).isLoaded=!0:this.registeredModules.setOrUpdate(l,{moduleName:l,isLoaded:!1,isReady:!1,unWrappedModule:void 0})},s.prototype.queueRegistry=function(l,m){m===void 0&&(m={dispatch:this.adFuelOptions.AUTO_DISPATCH||!0}),(f=this.logger)!=null&&f.info("[queueRegistry] Queueing registry...",l,m),this.perf.addMark("Queueing Registry START"),this._initialRequestComplete=0<this.processedData.count(),m.slots&&(m.slots=Array.isArray(m.slots)?m.slots:[m.slots]),m.exclude&&(m.exclude=Array.isArray(m.exclude)?m.exclude:[m.exclude]),this._registryOptions=m,f=Array.isArray(l)?{registry:l}:l;var f,m=Object.assign({},this.adFuelOptions,m);return f.registry?this._registryLoader.loadRegistryFromJson(f.registry,m):this._registryLoader.loadRegistryFromUrl(l,m),this},s.prototype.flushCmdQueue=function(){for(this.logger.log("Flushing command",this._cmdQueue.length);0<this._cmdQueue.length;){var l=this._cmdQueue.shift();l&&(l(),this.logger.log("Command flushed."))}},s.prototype.dispatchQueue=function(l){var m=this;return l===void 0&&(l={}),this.undispatched().forEach(function(f){m.logger.log("[dispatchQueue] Dispatching Data: ",f),m._requestProcessor.dispatch(f)}),this},s.prototype.destroySlots=function(l){var m,f,v=this,n=(l?Array.isArray(l)||(l=[l]):l=[],this.logger.log("[ADFUEL] START ---------- destroySlots::slotsToDestroy:",l),new Set),h=[],_=[];if(0<l.length){if(this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::Searching registries for matching candidates..."),this.processedData.getValues().forEach(function(c){h=Array.from(new Set(h.concat(c.wrappedSlots.where(function(b){return l!==void 0&&(l==null?void 0:l.includes(b.slotId))&&b.isBuilt}).toArray())))}),0<h.length)try{this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - RegistrySlotWrappers...",h),_=((f=(m=window.googletag)==null?void 0:m.pubads().getSlots())==null?void 0:f.map(function(c){if(v.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - Googletag Slot:",c.getSlotElementId()),l!=null&&l.includes(c.getSlotElementId()))return c}).filter(function(c){return c!=null}))||[],this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - GoogleTag Candidates",_),_.forEach(function(c){c&&n.add(c)})}catch(c){this.logger.error("There was an error in DestroySlots.",c)}else this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - registrySlotWrappers array was empty.");this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::FINAL CANDIDATES:",n)}else this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Getting all built slots..."),this.processedData.getValues().forEach(function(c){h=h.concat(c.wrappedSlots.where(function(b){return b.isBuilt}).toArray())}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Registry Slot Wrappers:",h),(typeof((m=window.googletag)==null?void 0:m.pubads)=="function"?(f=window.googletag)==null?void 0:f.pubads().getSlots():[]).forEach(function(c){n.add(c)}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::CANDIDATES:",n);return 0<l.length&&h.length!==l.length?this.logger.warn("Slot numbers do not match. Not destroying slots: ",h,l):(this.logger.log("[ADFUEL] ---------- destroySlots::Matching Registry Slot Wrappers: ",h),h.forEach(function(c){v.logger.log("[ADFUEL] ---------- destroySlots::Clearing GSlot from Wrapper: ",c),v.perf.addMark("Destroying Slot ".concat(c.slotId)),c.gSlot=void 0}),this.logger.log("[ADFUEL] ---------- destroySlots::Updated Registry Slot Wrappers: ",{registrySlotWrappers:h}),this.logger.log("[ADFUEL] ---------- destroySlots::handoffToSlotProcessor:",n),this._slotProcessor.destroySlots(Array.from(n)),Array.from(document.getElementsByClassName("adfuel-rendered")).forEach(function(c){(l!=null&&l.includes(c.id)||(l==null?void 0:l.length)===0)&&(v.logger.log("[ADFUEL] ---------- DestroySlots::Removing Class from Element:",c),c.classList.remove("adfuel-rendered"))})),this},s.prototype.addPageLevelTarget=function(l,m){return m=Array.isArray(m)?m:[m],this._targetProcessor.addPageLevelTargets(l,m),this.logger.log("Adding page level target ".concat(l)),this.perf.addMark("Adding Page-Level Target - ".concat(l)),this},s.prototype.removePageLevelTarget=function(l,m){var f=[];return m&&(f=Array.isArray(m)?m:[m]),this._targetProcessor.removePageLevelTargets(l,f),this.perf.addMark("Removing Page-Level Target - ".concat(l)),this},s.prototype.addSlotLevelTarget=function(l,m,f){var v=Array.isArray(f)?f:[f];return this._targetProcessor.addSlotLevelTargets(l,m,v),this.logger.log("Adding slot-level target slotId: ".concat(l,", targetKey: ").concat(m),f),this.perf.addMark("Adding Slot-Level Target - ".concat(m)),this},s.prototype.removeSlotLevelTarget=function(l,m,f){var v=[];return f&&(v=Array.isArray(f)?f:[f]),this._targetProcessor.removeSlotLevelTargets(l,m,v),this.perf.addMark("Removing Slot-Level Target - ".concat(m)),this},s.prototype.registerModule=function(l){return this.logger.info("Registering module: ".concat(l.MODULE_NAME,".")),this.perf.addMark("Registering Module - ".concat(l.MODULE_NAME)),this._moduleManager.registerModule(l),this},s.prototype.getSlotsForRefresh=function(l){var m,f=[];if(0<(l=l===void 0?[]:l).length)for(var v=this,n=0,h=l;n<h.length;n++)(function(c){var b=(m=v.processedData.firstOrDefault(function(E){return E.value.wrappedSlots.any(function(S){return c.includes(S.slotId)&&S.isBuilt})}))==null?void 0:m.value.wrappedSlots.firstOrDefault(function(E){return c.includes(E.slotId)&&E.isBuilt});b&&f.push(b)})(h[n]);else{var _=[];this.processedData.where(function(c){return c.value.wrappedSlots.any(function(b){return b.isBuilt})}).forEach(function(c){_.concat(c.value.wrappedSlots.where(function(b){return b.isBuilt}).toArray())}),_&&f.concat(_)}return f},s.prototype.refresh=function(l,m){var f=this,v=(m===void 0&&(m=0),this.moduleManager.callPreRefresh(this.lastProcessed().wrappedSlots),new o.List),v=l&&!["ALL","all","*","All"].includes(l)?(Array.isArray(l)||(l=[l]),new o.List(this.getSlotsForRefresh(l))):new o.List(this.lastProcessed().wrappedSlots.toArray());return this.lastProcessed().wrappedSlots?(l=function(){var n;0<v.count()&&0<m?(n=setInterval(function(){f._requestProcessor.refresh(v),f.moduleManager.callPostRefresh(v)},1e3*m),v.forEach(function(h){f._refreshers.containsKey(h.slotId)&&clearInterval(f._refreshers.get(h.slotId)),f._refreshers.setOrUpdate(h.slotId,n)})):0<v.count()&&m===0?f._requestProcessor.refresh(v):f.logger.warn("There is nothing to refresh.",v)},this._initialRequestComplete?l():this._waitingFunctions.push(l)):(l=this.logger)!=null&&l.warn("There are no slots defined. Has the registry been loaded?"),this},s.prototype.waitFor=function(l){return this.missionControl.register({readyId:l}),this},s.prototype.makeReady=function(l){return this.missionControl.setReady({readyId:l}),this},s.prototype.version=function(){return this._version},s.prototype.getBuiltSlots=function(){var l=[];return this.processedData.forEach(function(m){m.value.wrappedSlots.any(function(f){return f.isBuilt})&&l.push({timeStamp:m.value.timestamp,slots:m.value.wrappedSlots.where(function(f){return f.isBuilt}).toArray()})}),l},s.prototype.getDispatchedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(l){return l.hasBeenDisplayed}).toArray()},s.prototype.getExcludedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(l){return l.isExcluded}).toArray()},s.prototype.getPageSlots=function(){return this.lastProcessed().wrappedSlots.where(function(l){return l.isBuilt}).select(function(l){return l.gSlot}).toArray()},s.prototype.getQueuedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(l){return!l.isBuilt}).toArray()},s.prototype.getRegisteredModules=function(){return this.registeredModules.select(function(l){return l.value.unWrappedModule}).toArray()},s.prototype.getRocketeerSlots=function(){return this._registry.slots},s.prototype.getPageAdUnit=function(){return this._pageAdUnit},Object.defineProperty(s.prototype,"pageAdUnit",{get:function(){return this._pageAdUnit},set:function(l){this._pageAdUnit=l},enumerable:!1,configurable:!0}),s.prototype.clearSlots=function(l){return this._slotProcessor.clearSlots(l),this},s.prototype.setBulkTargeting=function(l){return this._targetProcessor.setBulkTargeting(l),this},s.prototype.enableLazyLoad=function(l){return l.fetch=l.fetch||500,l.render=l.render||200,l.scaling=l.scaling||2,this.perf.addMark("Enabling Lazy Load"),this.logger.log("#################### Enabling Lazy Load"),this._googleApi.enableLazyLoad(l),this},s.prototype.getSlotDetails=function(l){var m,f=this.lastProcessed().wrappedSlots.firstOrDefault(function(v){return v.slotId===l});if(f)return{adUnitPath:(m=(m=f.gSlot)==null?void 0:m.getAdUnitPath())!=null?m:"UNKNOWN",slotTargeting:f.targeting,programmatic:f.programmatic,response:(m=f.gSlot)==null?void 0:m.getResponseInformation()};this.logger.log("Couldn't find details for slot: ".concat(l))},s.prototype.getCachedRegistries=function(){var l=new Map;return this.processedData.forEach(function(m){l.set(m.value.url,r([m.value.registry],m.value.registry.slots,!0))}),l},s);function s(){var l=this;this._version=new g.Version(d.major,d.minor,d.revision,d.family),this._googleApi=new i.GoogleApi(this),this._missionControl=new a.MissionControl(this,this._googleApi),this._requestProcessor=new p.RequestProcessor(this,void 0,this._googleApi),this._moduleManager=new i.ModuleManager(this),this._targetProcessor=new p.TargetProcessor(this,this._googleApi,this._requestProcessor),this._slotProcessor=new p.SlotProcessor(this,this._targetProcessor,this._googleApi),this._queueDispatched=!1,this._pageAdUnit="",this._initialRequestComplete=!1,this._waitingFunctions=[],this._refreshers=new o.Dictionary,this.processedData=new o.Dictionary,this._cmdQueue=[],this.registeredModules=new o.Dictionary,this._logger=new g.Logger("AdFuel TS",this._version.toString(),"adfuel","color: #4f86f7; padding: 2px"),this._perf=new g.Performance("ADFUEL TS"),this._gptScriptLoader=new i.GptScriptLoader(this.missionControl,this._logger),this._registryLoader=new i.RegistryLoader(this),this._overlayLoader=new i.OverlayLoader(this),this._gptScriptLoader.loadScript().then(function(){l._googleApi.flushCmdQueue()}),this._missionControl.firstProcessor=this._slotProcessor,this._perf.addMark("AdFuel Load END"),this._perf.addMeasure("AdFuel Load"),this.fireAdFuelCreated(),this._overlayLoader.startConsoleTool(),document.addEventListener("AdFuelRequestComplete",function(){l._initialRequestComplete=!0,l._waitingFunctions.forEach(function(m){m()}),l._waitingFunctions=[]}),window.addEventListener("load",function(){var m,f;l.logger.log("[window.load] Load fired:  AUTO_DISPATCH: ".concat(l.adFuelOptions.AUTO_DISPATCH," queueDispatched: ").concat(l._queueDispatched)),l.adFuelOptions.AUTO_DISPATCH||l._queueDispatched?l.adFuelOptions.AUTO_DISPATCH&&(l.dispatchQueue(),m=1,f=setInterval(function(){0<l.undispatched().length&&(l.logger.warn("[window.load] AdFuel is configured to automatically dispatch the queue on window.load but ".concat(100*m," milliseconds later and there are slots that still are not dispatched.")),l.logger.warn("[window.load] Undispatched: ",l.undispatched()),l.dispatchQueue()),5e3<100*m&&clearInterval(f),m++},100)):l.logger.error("[window.load] AdFuel is not configured to automatically dispatch the queue and the user's code never called AdFuel.dispatchQueue().")}),this.perf.addMark("AdFuel Created")}window.AdFuel=u.instance,e.configure=function(l){return u.instance.configure(l)},e.destroySlots=function(l){return u.instance.destroySlots(l=l===void 0?[]:l)},e.refresh=function(l,m){return u.instance.refresh(l,m)},e.queueRegistry=function(l,m){return u.instance.queueRegistry(l,m)},e.addPageLevelTarget=function(l,m){return u.instance.addPageLevelTarget(l,m)},e.removePageLevelTarget=function(l,m){return u.instance.removePageLevelTarget(l,m)},e.addSlotLevelTarget=function(l,m,f){return u.instance.addSlotLevelTarget(l,m,f)},e.removeSlotLevelTarget=function(l,m,f){return u.instance.removeSlotLevelTarget(l,m,f)},e.clearSlots=function(l){return u.instance.clearSlots(l=l===void 0?[]:l)},e.setBulkTargeting=function(l){return u.instance.setBulkTargeting(l)},e.enableLazyLoad=function(l){return u.instance.enableLazyLoad(l)},e.dispatchQueue=function(l){return u.instance.dispatchQueue(l)},e.addEvent=function(l,m,f){var v="background: red;color:white;",n="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",v,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",v,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",v,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",v,n),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",v,n),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",v,n),console.error("%c *** use addEventListener() instead.                         *** %c",v,n),console.error("%c *** No event was added                                      *** %c",v,n)},e.setOptions=function(){var l="background: red;color:white;",m="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",l,m),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",l,m),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",l,m),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",l,m),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",l,m),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",l,m),console.error("%c *** No options were set                                     *** %c",l,m)},e.registry={push:function(l,m){console.warn("%c *** This functionality will be removed in future releases. Instead of 'registry.push()', please use AdFuel.queueRegistry() *** %c","background: orange;color:white;","background: inherit;color:inherit;"),u.instance.queueRegistry(l,m)}},e.__VERSION__=function(){return u.instance.version().toString()},e.registerModule=function(l){return u.instance.registerModule(l)},e.version=function(){return u.instance.version()},e.getBuiltSlots=function(){return u.instance.getBuiltSlots()},e.getDispatchedSlots=function(){return u.instance.getDispatchedSlots()},e.getExcludedSlotIds=function(){return u.instance.getExcludedSlots()},e.getPageSlots=function(){return u.instance.getPageSlots()},e.getQueuedSlots=function(){return u.instance.getQueuedSlots()},e.getRegisteredModules=function(){return u.instance.getRegisteredModules()},e.getRocketeerSlots=function(){return u.instance.getRocketeerSlots()},e.isModuleReady=function(l){return u.instance.isModuleReady(l)},e.setModuleReady=function(l){u.instance.setModuleReady(l)},e.isModuleLoaded=function(l){return u.instance.isModuleLoaded(l)},e.setModuleLoaded=function(l){u.instance.setModuleLoaded(l)},e.getSlotDetails=function(l){return u.instance.getSlotDetails(l)},e.getCachedRegistries=function(){return u.instance.getCachedRegistries()},e.getPageAdUnit=function(){return u.instance.getPageAdUnit()},e.credits=function(){var l=`

          \u2591\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557
          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2557\u2591
          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2588\u2588\u2557
          \u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D
          \u255A\u2550\u255D\u2591\u2591\u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591
          =====================================================================
          Version: `.concat(u.instance.version().toString(),`
          Developed by: 
            Joe Lazarski
            Steve Trofemuk

          Serve ads or die trying!
  `);console.log(l)},e.bf=function(){console.info(`
  ++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>>--.+++++++++++++++++++++++.<<++.>+++++++++++++.>-----.---------------.
  +++++++++++++++++.-----------------.<<.>+.>+++++++++++++.---.---------.-.++++++++.++++++++.----------.>++++++++++.
  `)}},{"./presets.js":26,"./processors":30,"./system":45,"./system/MissionControl":36,"./version.json":46,"@turnercode/digital-ads-utilities/dist":11,"linq-collections":23}],26:[function(t,y,e){"use strict";window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},{}],27:[function(t,y,e){"use strict";var r=this&&this.__awaiter||function(o,a,d,u){return new(d=d||Promise)(function(s,l){function m(n){try{v(u.next(n))}catch(h){l(h)}}function f(n){try{v(u.throw(n))}catch(h){l(h)}}function v(n){var h;n.done?s(n.value):((h=n.value)instanceof d?h:new d(function(_){_(h)})).then(m,f)}v((u=u.apply(o,a||[])).next())})},g=this&&this.__generator||function(o,a){var d,u,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},m={next:f(0),throw:f(1),return:f(2)};return typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function f(v){return function(n){var h=[v,n];if(d)throw new TypeError("Generator is already executing.");for(;l=m&&h[m=0]?0:l;)try{if(d=1,u&&(s=2&h[0]?u.return:h[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,h[1])).done)return s;switch(u=0,(h=s?[2&h[0],s.value]:h)[0]){case 0:case 1:s=h;break;case 4:return l.label++,{value:h[1],done:!1};case 5:l.label++,u=h[1],h=[0];continue;case 7:h=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(h[0]===6||h[0]===2)){l=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3]))l.label=h[1];else if(h[0]===6&&l.label<s[1])l.label=s[1],s=h;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(h)}}h=a.call(o,l)}catch(_){h=[6,_],u=0}finally{d=s=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}},p=(Object.defineProperty(e,"__esModule",{value:!0}),e.RequestProcessor=void 0,t("@turnercode/digital-ads-utilities"));function i(o,a,d){this.adFuel=o,this.nextProcessor=a,this.googleApi=d}i.prototype.process=function(o){var a=this;return new Promise(function(d,u){return r(a,void 0,void 0,function(){var s,l=this;return g(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),(s=this.adFuel.logger)!=null&&s.log(" ### START Request Processor ====",o.wrappedSlots.select(function(f){return f.toLogging()}).toArray(),o.options),(s=this.adFuel.perf)!=null&&s.addMark("Processing Request START"),[4,(s=this.googleApi)==null?void 0:s.configurePubAds().then(function(){return r(l,void 0,void 0,function(){var f,v;return g(this,function(n){switch(n.label){case 0:return(o.options.dispatch!==void 0?o.options.dispatch:o.options.AUTO_DISPATCH)&&((f=this.adFuel.logger)!=null&&f.info("RequestProcessor.process is calling Dispatch",o),o.wrappedSlots.where(function(h){return!h.hasBeenDisplayed&&h.isBuilt&&!h.isExcluded}).toList(),this.dispatch(o)),(f=this.adFuel.perf)!=null&&f.addMark("Processing Request END"),(v=this.adFuel.perf)!=null&&v.addMeasure("Processing Request"),(v=this.adFuel.logger)!=null&&v.log("========== [RequestProcessor/process] CALLING POST DISPATCH =========="),[4,this.adFuel.moduleManager.callPostDispatch(o.wrappedSlots)];case 1:return n.sent(),(v=this.adFuel.logger)!=null&&v.log(" ### STOP Request Processor ====",o.wrappedSlots.select(function(h){return h.toLogging()}).toArray(),o.options),this.nextProcessor?d(this.nextProcessor.process(o)):d(o),[2]}})})})];case 1:return m.sent(),[3,3];case 2:return s=m.sent(),u(s),[3,3];case 3:return[2]}})})})},i.prototype.dispatch=function(o){var a,d;return r(this,void 0,void 0,function(){var u,s,l=this;return g(this,function(m){return 0<(u=o.wrappedSlots.where(function(f){return!f.hasBeenDisplayed&&f.isBuilt&&!f.isExcluded}).toList()).count()?(o.dispatched=!0,(a=this.adFuel.logger)!=null&&a.log("[RequestProcessor - dispatch] Setting dispatched to true",o),this.adFuel.processedData.setOrUpdate(o.timestamp,o),(a=this.adFuel.logger)!=null&&a.log("========== [RequestProcessor/dispatch] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(u).then(function(){var f;try{document.dispatchEvent(new CustomEvent("PreDispatchComplete",{detail:{slots:u.count()}}))}catch(v){(f=l.adFuel.logger)!=null&&f.error("Error dispatching custom event: PreDispatchComplete",{error:v})}l.buildGPTObject(o),u.forEach(function(v){var n;(n=l.adFuel.perf)!=null&&n.addMark("[".concat(v.slotId,"] Slot Displayed With Googletag")),googletag.display(v.gSlot),v.hasBeenDisplayed=!0}),(f=l.googleApi)!=null&&f.refreshSlots(u,{dispatch:!0}),(f=l.adFuel.logger)!=null&&f.log("========== [RequestProcessor/dispatch] CALLING POST DISPATCH =========="),l.adFuel.moduleManager.callPostDispatch(u),document.dispatchEvent(new CustomEvent("AdFuelRequestComplete",{detail:{slots:u.select(function(v){return v.unWrappedSlot}).toArray(),options:l.adFuel.registryOptions}}))})):(a=this.adFuel.logger)!=null&&a.log("No slots to dispatch."),s={slotsBuilt:o.wrappedSlots.where(function(f){return f.hasBeenDisplayed&&!f.isExcluded}).toArray(),registry:o.registry,optionsUsed:o.options},window.AdFuelHistory||((d=this.adFuel.logger)!=null&&d.log("Creating AdFuelHistory"),window.AdFuelHistory=[]),(d=this.adFuel.logger)!=null&&d.log("Adding to AdFuelHistory",s),window.AdFuelHistory.push(s),[2]})})},i.prototype.refresh=function(o,a,d){var u;return a===void 0&&(a=!0),d===void 0&&(d=!0),r(this,void 0,void 0,function(){return g(this,function(s){switch(s.label){case 0:return(u=this.adFuel.perf)!=null&&u.addMark("Refresh Called..."),(u=this.adFuel.logger)!=null&&u.log("Refreshing slots",o.select(function(l){return l.toLogging()}).toArray()),a?[4,this.adFuel.moduleManager.callPreRefresh(o)]:[3,2];case 1:s.sent(),s.label=2;case 2:return(u=this.googleApi)!=null&&u.refreshSlots(o,this.adFuel.registryOptions),d?[4,this.adFuel.moduleManager.callPostRefresh(o)]:[3,4];case 3:s.sent(),s.label=4;case 4:return[2]}})})},i.prototype.buildGPTObject=function(o){var a,d,u,s=p.CookieHelper.readCookie("gptgeo");s?(u=s.split("%2C"),d=parseFloat(u[0]),u=parseFloat(u[1]),(a=this.googleApi)!=null&&a.setLocation(d,u),o.registry.child_directed_treatment&&(a=this.googleApi)!=null&&a.setChildDirectedTreatmentTag(o.registry.child_directed_treatment),o.registry.safeframe_config&&((d=this.adFuel.logger)!=null&&d.log("Setting SafeFrame config tag: ",o.registry.safeframe_config),(u=this.googleApi)!=null)&&u.setSafeFrameConfig(o.registry.safeframe_config)):(a=this.adFuel.logger)!=null&&a.log("Unable to retrieve location cookie",s)},e.RequestProcessor=i},{"@turnercode/digital-ads-utilities":11}],28:[function(t,y,e){"use strict";var r=this&&this.__awaiter||function(a,d,u,s){return new(u=u||Promise)(function(l,m){function f(h){try{n(s.next(h))}catch(_){m(_)}}function v(h){try{n(s.throw(h))}catch(_){m(_)}}function n(h){var _;h.done?l(h.value):((_=h.value)instanceof u?_:new u(function(c){c(_)})).then(f,v)}n((s=s.apply(a,d||[])).next())})},g=this&&this.__generator||function(a,d){var u,s,l,m={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},f={next:v(0),throw:v(1),return:v(2)};return typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function v(n){return function(h){var _=[n,h];if(u)throw new TypeError("Generator is already executing.");for(;m=f&&_[f=0]?0:m;)try{if(u=1,s&&(l=2&_[0]?s.return:_[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,_[1])).done)return l;switch(s=0,(_=l?[2&_[0],l.value]:_)[0]){case 0:case 1:l=_;break;case 4:return m.label++,{value:_[1],done:!1};case 5:m.label++,s=_[1],_=[0];continue;case 7:_=m.ops.pop(),m.trys.pop();continue;default:if(!(l=0<(l=m.trys).length&&l[l.length-1])&&(_[0]===6||_[0]===2)){m=0;continue}if(_[0]===3&&(!l||_[1]>l[0]&&_[1]<l[3]))m.label=_[1];else if(_[0]===6&&m.label<l[1])m.label=l[1],l=_;else{if(!(l&&m.label<l[2])){l[2]&&m.ops.pop(),m.trys.pop();continue}m.label=l[2],m.ops.push(_)}}_=d.call(a,m)}catch(c){_=[6,c],s=0}finally{u=l=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}},p=(Object.defineProperty(e,"__esModule",{value:!0}),e.SlotProcessor=void 0,t("../system")),i=t("linq-collections");function o(a,d,u){u===void 0&&(u=new p.GoogleApi(a)),this.adFuel=a,this.nextProcessor=d,this.googleApi=u}o.prototype.process=function(a){var d=this;return new Promise(function(u,s){return r(d,void 0,void 0,function(){var l,m,f,v,n=this;return g(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),(l=this.adFuel.logger)!=null&&l.info("Entering SlotProcessor.Process()"),(l=this.adFuel.perf)!=null&&l.addMark("SlotProcessor.Process() START"),l=a.wrappedSlots.select(function(_){return _.toLogging()}).toArray(),(m=this.adFuel.logger)!=null&&m.log(" ### START Slot Processor ====",l,a.options),a.wrappedSlots.forEach(function(_){var c;(c=n.adFuel.perf)!=null&&c.addMark("[".concat(_.slotId,"] SlotProcessor.Process()"))}),(m=this.adFuel.logger)!=null&&m.log(" #################### Building Slots: ",a),this.buildSlots(a),[4,this.adFuel.moduleManager.callPostQueue(a.wrappedSlots)];case 1:return h.sent(),(m=this.adFuel.logger)!=null&&m.log(" ### STOP Slot Processor ====",l,a.options),(f=this.adFuel.logger)!=null&&f.log("========== [slotProcessor/process] CALLING PRE DISPATCH =========="),[4,this.adFuel.moduleManager.callPreDispatch(a.wrappedSlots)];case 2:return h.sent(),(f=this.adFuel.perf)!=null&&f.addMark("SlotProcessor.Process() END"),(v=this.adFuel.perf)!=null&&v.addMeasure("SlotProcessor.Process()"),this.nextProcessor?u((v=this.nextProcessor)==null?void 0:v.process(a)):u(a),[3,4];case 3:return v=h.sent(),s(v),[3,4];case 4:return[2]}})})})},o.prototype.buildSlots=function(a){var d,u=this,s=((s=this.adFuel.logger)!=null&&s.log("#################### Wrapped Slots: ",a.wrappedSlots.toArray()),a.wrappedSlots.where(function(l){return!l.isBuilt&&!l.hasBeenDisplayed&&l.slotExistsOnPage&&!l.isExcluded}));(d=this.adFuel.logger)!=null&&d.log("#################### Filtered Slots: ",s.toArray()),s.forEach(function(l){var m,f=u.adFuel.processedData.where(function(v){return v.value.url===a.url}).select(function(v){return(v=v.value.wrappedSlots.firstOrDefault(function(n){return n.isBuilt&&n.slotId===l.slotId}))==null?void 0:v.gSlot}).toArray();0<f.length&&f[0]!==void 0&&(m=u.adFuel.logger)!=null&&m.info("#################### Found historic gslot for ".concat(l.slotId),f)}),(d=this.adFuel.logger)!=null&&d.info("Building these slots: ",s.select(function(l){return l.toLogging()}).toArray()),s.where(function(l){return!l.isBuilt}).forEach(function(l){var m;(m=u.adFuel.logger)!=null&&m.info("Building slot for ".concat(l.slotId)),u.buildSlot(l),u.setResponsive(l),l.unWrappedSlot.safeframe_config&&u.googleApi.setSlotSafeFrameConfig(l.gSlot,l.unWrappedSlot.safeframe_config)})},o.prototype.buildSlot=function(a){(d=this.adFuel.logger)!=null&&d.log("Wrapped Slot: ",a);var d="/".concat(this.adFuel.adFuelOptions.NETWORK_ID,"/").concat(a.adUnitMap||a.unWrappedSlot.rktr_ad_id),u=a.slotId,s=((s=this.adFuel.perf)!=null&&s.addMark("Building Slot [".concat(a.slotId,"] adPath ").concat(d," START")),a=this.getSlotIfAlreadyProcessed(a),document.getElementById(a.slotId));if(s!=null&&s.className.includes("adfuel-rendered"))(s=this.adFuel.logger)!=null&&s.warn("".concat(a.slotId," element has already been rendered."));else if(a.isBuilt)(s=this.adFuel.logger)!=null&&s.log("You are trying to build ".concat(a.slotId," but it already exists in processedData."),a);else if(a.isOutOfPage)a.gSlot=this.googleApi.defineOutOfPageSlot(d,u);else{(s=this.adFuel.logger)!=null&&s.log("Defining slot for ".concat(a.slotId),a);try{a.gSlot=this.googleApi.defineSlot(d,a.unWrappedSlot.sizes,u)}catch(l){(s=this.adFuel.logger)!=null&&s.error("Error defining slot: ",l)}(u=this.adFuel.logger)!=null&&u.log("Slot built!",a)}(s=this.adFuel.perf)!=null&&s.addMark("Building Slot [".concat(a.slotId,"] adPath ").concat(d," END")),(u=this.adFuel.perf)!=null&&u.addMeasure("Building Slot [".concat(a.slotId,"] adPath ").concat(d))},o.prototype.getSlotIfAlreadyProcessed=function(a){var d=(d=this.adFuel.processedData.firstOrDefault(function(u){return u.value.wrappedSlots.any(function(s){return s.slotId===a.slotId&&s.isBuilt})}))==null?void 0:d.value.wrappedSlots.firstOrDefault(function(u){return u.slotId===a.slotId&&u.isBuilt});return a=d!=null?d:a},o.prototype.setResponsive=function(a){var d;a.isBuilt&&((d=this.adFuel.perf)!=null&&d.addMark("Setting Responsive Mapping [".concat(a.slotId,"]")),this.googleApi.defineSlotSizeMapping(a.gSlot,a.unWrappedSlot.responsive))},o.prototype.changeSlotId=function(a,d){var u=a.slotId.slice();a.unWrappedSlot.rktr_slot_id=d;try{document.dispatchEvent(new CustomEvent("SlotIdChange",{detail:{asset:a.unWrappedSlot,originalId:u,newId:d}}))}catch(s){(a=this.adFuel.logger)!=null&&a.error("Error dispatching SlotIdChange event.",s)}},o.prototype.destroySlots=function(a){var d;a===void 0&&(a=[]),(d=this.adFuel.logger)!=null&&d.log("[SLOT PROCESSOR] START ---------- destroySlots::slotsToDestroy:",a),(d=this.adFuel.perf)!=null&&d.addMark("Destroying Slots [".concat(JSON.stringify(a.map(function(u){return u.getSlotElementId()})),"]")),(d=this.adFuel.logger)!=null&&d.log("[SLOT PROCESSOR] ---------- destroySlots::handoffToGoogleAPI:",a),this.googleApi.destroySlots(a)},o.prototype.clearSlots=function(a){var d=this;this.googleApi.executeWhenAvailable(function(){var u,s=((s=(s=d.adFuel.lastProcessed())==null?void 0:s.wrappedSlots)!=null?s:new i.List).where(function(l){return a.includes(l.slotId)&&l.isBuilt}).select(function(l){return l.gSlot}).toArray();(u=d.adFuel.perf)!=null&&u.addMark("Clearing Slots [".concat(JSON.stringify(s.map(function(l){return l.getSlotElementId()})),"]")),d.googleApi.clearSlots(s)})},e.SlotProcessor=o},{"../system":45,"linq-collections":23}],29:[function(t,y,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(o){for(var a,d=1,u=arguments.length;d<u;d++)for(var s in a=arguments[d])Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s]);return o}).apply(this,arguments)},g=this&&this.__spreadArray||function(o,a,d){if(d||arguments.length===2)for(var u,s=0,l=a.length;s<l;s++)!u&&s in a||((u=u||Array.prototype.slice.call(a,0,s))[s]=a[s]);return o.concat(u||Array.prototype.slice.call(a))},p=(Object.defineProperty(e,"__esModule",{value:!0}),e.TargetProcessor=void 0,t("@turnercode/digital-ads-utilities/dist/getUrlParam"));function i(o,a,d){d===void 0&&(d=void 0),this.adFuel=o,this._googleApi=a,this.nextProcessor=d,this._slotTargets={},this._pageTargets={}}i.prototype.process=function(o){var a=this;return new Promise(function(d,u){var s,l,m,f,v,n,h,_,c,b,E,S;try{(s=a.adFuel.perf)!=null&&s.addMark("TargetProcessor.Process() START"),(l=a.adFuel.logger)!=null&&l.log(" ### START Target Processor ====",o.wrappedSlots.select(function(C){return C.toLogging()}).toArray(),o.options),(m=a.adFuel.logger)!=null&&m.log("slotTargets",a._slotTargets),(f=a.adFuel.logger)!=null&&f.log("pageTargets",a._pageTargets),a._slotTargets=Object.assign({},a._slotTargets,o.slotTargets),a._pageTargets=Object.assign({},a._pageTargets,o.pageTargets),(v=a.adFuel.logger)!=null&&v.log("slotTargets",a._slotTargets),(n=a.adFuel.logger)!=null&&n.log("pageTargets",a._pageTargets),a.getAdsQaTargeting(),(h=a.adFuel.logger)!=null&&h.log(" ### START BUILDING SLOT TARGETING ====",o),a.buildSlotLevelTargeting(o),(_=a.adFuel.logger)!=null&&_.log(" ### START BUILDING PAGE TARGETING ====",o),a.buildPageLevelTargeting(o),(c=a.adFuel.logger)!=null&&c.log(" ### STOP Target Processor ====",o.wrappedSlots.select(function(C){return C.toLogging()}).toArray(),o.options),(b=a.adFuel.perf)!=null&&b.addMark("TargetProcessor.Process() END"),(E=a.adFuel.perf)!=null&&E.addMeasure("TargetProcessor.Process()"),a.nextProcessor?d((S=a.nextProcessor)==null?void 0:S.process(o)):d(o)}catch(C){u(C)}})},i.prototype.windowObjectName=function(o){var a;return((a=(a=o.options)==null?void 0:a.SITE_OBJECT)!=null?a:(o=(a=(a=o.registry)==null?void 0:a.root)!=null?a:(a=o.registry)==null?void 0:a.site)!=null?o:"").toUpperCase()},i.prototype.buildSlotLevelTargeting=function(o){(a=this.adFuel.logger)!=null&&a.log("Building slot level targeting.",{raw:window.CNN,root:this.windowObjectName(o),data:o});for(var a,d,u,s=function(v){(u=l.adFuel.perf)!=null&&u.addMark("Building Slot-Level Targeting [".concat(v.slotId,"]")),(u=l.adFuel.logger)!=null&&u.log("[TargetProcessor] Building Slot-Level Targeting [".concat(v.slotId,"]"),v);var n,h=(((u=window[l.windowObjectName(o)])==null?void 0:u.slotTargets)||{})[v.slotId]||{},_=((u=l.adFuel.logger)!=null&&u.log("[TargetProcessor] Site Slot Targets [".concat(v.slotId,"]"),h),{pos:[v.posMap]}),c=((u=l.adFuel.logger)!=null&&u.log("[TargetProcessor] posTargets::",_),new Map(v.targeting)),b=(c.delete("pos"),r(r(r(r({},l._slotTargets[v.slotId]),Object.fromEntries(c)),_),h));(u=l.adFuel.logger)!=null&&u.log("[TargetProcessor] slotTargets to be built are: ",b,v);for(n in b)(function(E){var S,C;v.gSlot?0<(C=(d=b[E].filter(function(L){var O;return(O=!((O=v.requestedSlotTargets[E])!=null&&O.includes(L)))!==null&&O}))!=null?d:[]).length&&((d=l.adFuel.logger)!=null&&d.log("Setting slot targeting: ",{slot:v.slotId,key:E,value:C}),v.gSlot.setTargeting(E,C),v.requestedSlotTargets[E]?(S=v.requestedSlotTargets[E]).push.apply(S,C):v.requestedSlotTargets[E]=g([],C,!0)):(d=l.adFuel.logger)!=null&&d.warn("Slot ".concat(v.slotId," could not find the gslot and goes home disappointed."))})(n);(u=l.adFuel.logger)!=null&&u.log("Built slot targeting:",b,v)},l=this,m=0,f=o.wrappedSlots.where(function(v){return v.isBuilt&&!v.isExcluded}).toArray();m<f.length;m++)s(f[m])},i.prototype.buildPageLevelTargeting=function(o){var a,d,u=this,s=((s=this.adFuel.logger)!=null&&s.log("Building page level targeting.",{root:this.windowObjectName(o),data:window[this.windowObjectName(o)]}),(s=this.adFuel.perf)!=null&&s.addMark("Building Page-Level Targeting"),((s=window[this.windowObjectName(o)])==null?void 0:s.adTargets)||{}),l=((a=this.adFuel.logger)!=null&&a.log("[TargetProcessor] Site Page Targets",s),new Map),m=(Array.isArray((a=o.registry)==null?void 0:a.targeting)&&(a=o.registry)!=null&&a.targeting.forEach(function(f){(n=u.adFuel.logger)!=null&&n.log("[TargetProcessor] Registry Page Target Item: ",f),(n=u.adFuel.logger)!=null&&n.log("[TargetProcessor] Registry Page Target Item Types: ",{first:typeof f[0],second:typeof f[1]});var v,n=f[0]||"undefined",f=f[1];(v=u.adFuel.logger)!=null&&v.log("[TargetProcessor] Registry Page Target KVP: ",{keyName:n,keyValue:f}),l.set(n,f)}),(o=this.adFuel.logger)!=null&&o.log("[TargetProcessor] Registry Targets: ",Object.fromEntries(l)),r(r(r({},this._pageTargets),Object.fromEntries(l)),s));for(d in(a=this.adFuel.logger)!=null&&a.log("pageTargets to be built are: ",m),m)m[d]!=null&&this._googleApi.setTargeting(d,m[d]);(o=this.adFuel.logger)!=null&&o.log("Built page targeting",m)},i.prototype.getAdsQaTargeting=function(){var o,a,d;try{(d=this.adFuel.perf)!=null&&d.addMark("Getting AdsQA Targeting");var u,s,l,m,f=(0,p.getUrlParam)("adsqa");f&&((o=this.adFuel.logger)!=null&&o.log("ADSQA detected."),u=f.split("%3D"),1<f.length?(s=u[0],l=u[1],m=Array.isArray(l)?l:[l],this._pageTargets[s]=m):(a=this.adFuel.logger)!=null&&a.info("ADSQA parsing problem",u))}catch(v){(d=this.adFuel.logger)!=null&&d.error("checkForAdsQA",v)}},i.prototype.removeTargets=function(o,a,d){var u;o===void 0&&(o={}),(u=this.adFuel.perf)!=null&&u.addMark("Removing Targeting [".concat(a,"] ").concat(JSON.stringify(d))),d&&o[a]?o[a]=o[a].filter(function(s){return!d.includes(s)}):delete o[a]},i.prototype.addTargets=function(o,a,d){var u;o[a]=d,(u=this.adFuel.perf)!=null&&u.addMark("Adding Targeting [".concat(a,"] ").concat(JSON.stringify(d))),o[a]?o[a]=g(g([],(u=o[a])!=null?u:[],!0),d.filter(function(s){return!o[a].includes(s)}),!0):o[a]=g([],d,!0)},i.prototype.addPageLevelTargets=function(o,a){this.addTargets(this._pageTargets,o,a)},i.prototype.removePageLevelTargets=function(o,a){this.removeTargets(this._pageTargets,o,a)},i.prototype.addSlotLevelTargets=function(o,a,d){this._slotTargets[o]||(this._slotTargets[o]={}),this.addTargets(this._slotTargets[o],a,d)},i.prototype.removeSlotLevelTargets=function(o,a,d){this.removeTargets(this._slotTargets[o],a,d)},i.prototype.setBulkTargeting=function(o){var a;if(o.slotTargets||o.adTargets){if((a=this.adFuel.perf)!=null&&a.addMark("Setting Bulk Targeting"),o.slotTargets)for(var d=0,u=o.slotTargets;d<u.length;d++){var s=u[d];this.addSlotLevelTargets(s.slotId,s.targetKey,s.targetValues)}if(o.adTargets)for(var l=0,m=o.adTargets;l<m.length;l++){var f=m[l];this.addPageLevelTargets(f.targetKey,f.targetValues)}}else(a=this.adFuel.logger)!=null&&a.error("setBulkTargeting was passed a bad parameter.",o)},e.TargetProcessor=i},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],30:[function(t,y,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(p,i,o,a){a===void 0&&(a=o);var d=Object.getOwnPropertyDescriptor(i,o);d&&("get"in d?i.__esModule:!d.writable&&!d.configurable)||(d={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(p,a,d)}:function(p,i,o,a){p[a=a===void 0?o:a]=i[o]}),g=this&&this.__exportStar||function(p,i){for(var o in p)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||r(i,p,o)};Object.defineProperty(e,"__esModule",{value:!0}),g(t("../system/OptionsParser"),e),g(t("./RequestProcessor"),e),g(t("./SlotProcessor"),e),g(t("./TargetProcessor"),e)},{"../system/OptionsParser":39,"./RequestProcessor":27,"./SlotProcessor":28,"./TargetProcessor":29}],31:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AController=void 0,e.AController=function(r){(this.missionControl=r).register(this)}},{}],32:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAdFuelOptions=void 0,e.BaseAdFuelOptions={AUTO_DISPATCH:!0,COLLAPSE_EMPTY_DIVS:!0,DEFAULT_TIMEOUT:1200,DEFAULT_DESKTOP_TIMEOUT:1200,DEFAULT_MOBILE_TIMEOUT:800,IFRAME_TITLE:"advertisement",NETWORK_ID:"8663477"}},{}],33:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleApi=void 0;var r=t("@turnercode/digital-ads-utilities/dist/getUrlParam");function g(p){this.adFuel=p,this._pubAdsConfigured=!1,this._commandQueue=[],this._setChildDirectedTreatment=!0}g.prototype.executeWhenAvailable=function(p){var i;this.isAvailable?p():((i=this.adFuel.logger)!=null&&i.warn("It seems googletag is not ready yet. Queuing command...",{apiReady:googletag.apiReady,pubadsReady:googletag.pubadsReady}),(i=window.googletag)!=null&&i.cmd.push(p))},g.prototype.flushCmdQueue=function(){for(;0<this._commandQueue.length;)googletag.cmd.push(this._commandQueue.shift())},Object.defineProperty(g.prototype,"isAvailable",{get:function(){var p;return(p=googletag.apiReady)!=null&&p},enumerable:!1,configurable:!0}),g.prototype.destroySlots=function(p){var i=this;0<p.length?this.executeWhenAvailable(function(){var o;p.forEach(function(a){var d;(d=i.adFuel.logger)!=null&&d.log("[GOOGLEAPI] ---------- destroySlots::Destroying Slot: ".concat(a.getSlotElementId())),(d=i.adFuel.perf)!=null&&d.addMark("Destroying Slot: ".concat(a.getSlotElementId()))}),(o=window.googletag)!=null&&o.destroySlots(p)}):this.executeWhenAvailable(function(){var o;(o=i.adFuel.logger)!=null&&o.log("[GOOGLEAPI] ---------- destroySlots::Destroying All Slots"),(o=i.adFuel.perf)!=null&&o.addMark("Destroying All Slots"),(o=window.googletag)!=null&&o.destroySlots()})},g.prototype.clearSlots=function(p){var i=this;0<(p=p===void 0?[]:p).length?this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing Slots"),p.forEach(function(a){var d;(d=i.adFuel.perf)!=null&&d.addMark("Clearing Slot: ".concat(a.getSlotElementId()))}),googletag.pubads().clear(p)}):googletag.cmd.push(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing All Slots"),googletag.pubads().clear()})},g.prototype.defineOutOfPageSlot=function(p,i){var o,p=googletag.defineOutOfPageSlot(p,i);if(window.googletag&&p)(o=this.adFuel.perf)!=null&&o.addMark("Defined OOP GPT Slot - ".concat(i)),p.addService(window.googletag.pubads());else{if(!window.googletag)throw Error("Googletag not defined.");(o=this.adFuel.logger)!=null&&o.warn("Unable to define slot: ".concat(i))}return p},g.prototype.defineSlot=function(p,i,o){(u=this.adFuel.logger)!=null&&u.info("Building Standard Slot Object adPath:".concat(p," sizes:").concat(i," slotId:").concat(o));for(var a,d,u=void 0,s=[],l=0,m=i;l<m.length;l++){var f=m[l].map(Number);s.push([f[0],f[1]])}try{u=googletag.defineSlot(p,s,o),window.googletag&&u&&((a=this.adFuel.logger)!=null&&a.info("Defined slot: ".concat(o),u),(d=this.adFuel.perf)!=null&&d.addMark("Defined Standard GPT Slot - ".concat(o)),u.addService(window.googletag.pubads()))}catch(v){(i=this.adFuel.logger)!=null&&i.warn("Unable to define slot: ".concat(o),v)}return u},g.prototype.defineSlotSizeMapping=function(p,i){var o,a;p&&(a=p.getSlotElementId(),(o=this.adFuel.logger)!=null&&o.info("Setting Slot size mapping slotId: ".concat(a," responsiveMap: "),i),p.defineSizeMapping(i),(o=this.adFuel.perf)!=null)&&o.addMark("Defined Slot Responsive Mapping - ".concat(p.getSlotElementId()))},g.prototype.setTargeting=function(p,i){var o=this;this.executeWhenAvailable(function(){var a;googletag.pubads().setTargeting(p,i),(a=o.adFuel.perf)!=null&&a.addMark("Defined Page Target - ".concat(p))})},g.prototype.displaySlotById=function(p){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Displaying Slot - ".concat(p)),googletag.display(p)})},g.prototype.refreshSlots=function(p,i){var o=this,a=i||{maintainCorrelator:!0},d=p.where(function(u){return u.isBuilt}).select(function(u){return u.gSlot}).toArray();0<d.length?this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing Slots: ".concat(JSON.stringify(d.map(function(s){return s.getSlotElementId()})))),d.forEach(function(s){var l;(l=o.adFuel.perf)!=null&&l.addMark("Refreshing Slot ".concat(s.getSlotElementId()))}),googletag.pubads().refresh(d,{changeCorrelator:!a.maintainCorrelator})}):this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing all slots"),(u=o.adFuel.perf)!=null&&u.addMark("Refreshing All Slots"),googletag.pubads().refresh(void 0,{changeCorrelator:!a.maintainCorrelator})})},g.prototype.configurePubAds=function(){var p=this;return new Promise(function(i){p._pubAdsConfigured?i():(p._pubAdsConfigured=!0,p.executeWhenAvailable(function(){(a=p.adFuel.perf)!=null&&a.addMark("Configuring GPT START"),googletag.pubads().addEventListener("impressionViewable",function(u){var s,l=u.slot.getSlotElementId();(s=p.adFuel.perf)!=null&&s.addMark("[".concat(l,"] Impression Viewable")),(s=p.adFuel.logger)!=null&&s.info("impressionViewable",u),document.dispatchEvent(new CustomEvent("SlotViewable",{detail:u}))}).addEventListener("slotVisibilityChanged",function(u){var s;(s=p.adFuel.logger)!=null&&s.info("slotVisibilityChanged",u),document.dispatchEvent(new CustomEvent("slotVisibilityChanged",{detail:u}))}).addEventListener("slotRenderEnded",function(u){var s,l,m,f,v,n,h,_,c,b,E,S,C,L,O,D=u.slot.getSlotElementId();(s=p.adFuel.perf)!=null&&s.addMark("[".concat(D,"] Slot Render Ended")),(s=p.adFuel.logger)!=null&&s.info("slotRenderEnded",u);try{var P,j=p.adFuel.processedData.getKeys(),q=(m=(l=u.slot)==null?void 0:l.getSlotElementId())!=null?m:"NO ID",W={},R=(j.forEach(function(ne){p.adFuel.processedData.get(ne).wrappedSlots.forEach(function(re){re.unWrappedSlot.rktr_slot_id===q&&(W=re)})}),(f=p.adFuel.logger)!=null&&f.log("========== Active Slot: ",W),W.responseData={advertiserId:u.advertiserId,campaignId:u.campaignId,creativeId:u.creativeId,isEmpty:u.isEmpty,lineItemId:u.lineItemId,renderedSize:u.size,sourceAgnosticCreativeId:u.sourceAgnosticCreativeId,sourceAgnosticLineItemId:u.sourceAgnosticLineItemId},{asset:u.slot,pos:u.slot?u.slot.getTargeting("pos"):[""],empty:!!u.isEmpty,renderedSize:(v=u.size)!=null?v:"0x0",creativeId:(n=u.sourceAgnosticCreativeId)!=null?n:"0",lineItemId:(h=u.sourceAgnosticLineItemId)!=null?h:"0",serviceName:(_=u.serviceName)!=null?_:"",divId:(b=(c=u.slot)==null?void 0:c.getSlotElementId())!=null?b:"NO ID"}),$=(R.empty&&p.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS&&(document.getElementById(R.divId).style.display="none"),u.slot.getTargeting("creativeId")||[]),V=(u.creativeId&&$.indexOf(""+u.creativeId)<0&&$.push(""+u.creativeId),u.slot.getTargeting("lineItemId")||[]);u.lineItemId&&V.indexOf(""+u.lineItemId)<0&&V.push(""+u.lineItemId),R.divId!="NO ID"&&(P=document.getElementById(R.divId),(E=p.adFuel.logger)!=null&&E.log("Getting element for ".concat(R.divId," to set className."),P),P?P.className.includes("adfuel-rendered")||(P.className="".concat(P.className," adfuel-rendered").trim(),(S=p.adFuel.logger)!=null&&S.log("".concat(R.divId," className ").concat(P.className))):(C=p.adFuel.logger)!=null&&C.warn("Could not find element ".concat(R.divId," to set adfuel-rendered in className."))),p.executeWhenAvailable(function(){u.slot.setTargeting("creativeId",$),u.slot.setTargeting("lineItemId",V)}),(L=p.adFuel.logger)!=null&&L.info("Dispatching GPTRenderComplete: ",R),R.divId?(O=document.getElementById(R.divId))!=null&&O.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:R,bubbles:!0})):document.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:R}))}catch(ne){(D=p.adFuel.logger)!=null&&D.error("Error dispatching custom event: GPTRenderComplete",ne)}}).addEventListener("slotOnload",function(u){var s,l=u.slot.getSlotElementId();(s=p.adFuel.perf)!=null&&s.addMark("[".concat(l,"] Slot Loaded")),(s=p.adFuel.logger)!=null&&s.info("slotOnLoad",u),document.dispatchEvent(new CustomEvent("GPTSlotLoaded",{detail:u}))}),(a=p.adFuel.logger)!=null&&a.info("Enabling 'Collapse Empty Divs'"),googletag.pubads().collapseEmptyDivs((a=p.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS)==null||a),(a=p.adFuel.logger)!=null&&a.info("Enabling 'Async Rendering'"),googletag.pubads().enableAsyncRendering(),(a=p.adFuel.logger)!=null&&a.info("Enabling 'Single Request'"),googletag.pubads().enableSingleRequest(),(0,r.getUrlParam)("enableInitialLoad")||((a=p.adFuel.logger)!=null&&a.info("Disabling 'Initial Load'"),googletag.pubads().disableInitialLoad());var o,a=((a=(a=window.WM)==null?void 0:a.UserConsent)==null?void 0:a.isInRegion("global"))===!1,d=(d=(d=window.WM)==null?void 0:d.UserConsent)==null?void 0:d.inUserConsentState(["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);(o=p.adFuel.logger)!=null&&o.log("RDP Check: ",{inConsentRegion:a,consentStatus:d}),a&&!d&&((o=p.adFuel.logger)!=null&&o.log("Restricting Data Processing..."),googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})),(a=p.adFuel.logger)!=null&&a.info("Enabling 'Services'"),(d=p.adFuel.perf)!=null&&d.addMark("Configuring GPT END"),(o=p.adFuel.perf)!=null&&o.addMeasure("Configuring GPT"),(a=p.adFuel.perf)!=null&&a.addMark("Enabling GPT Services"),googletag.enableServices(),i()}))})},g.prototype.enableLazyLoad=function(p){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Enabling GPT Lazy Load"),googletag.pubads().enableLazyLoad({fetchMarginPercent:p.fetch,renderMarginPercent:p.render,mobileScaling:p.scaling})})},g.prototype.setChildDirectedTreatmentTag=function(p){var i,o=this;this._setChildDirectedTreatment?(this.executeWhenAvailable(function(){var a;(a=o.adFuel.perf)!=null&&a.addMark("Setting Child-Directed Treatment"),googletag.pubads().setPrivacySettings({childDirectedTreatment:!0,underAgeOfConsent:!0})}),this._setChildDirectedTreatment=!1):(i=this.adFuel.logger)!=null&&i.info("setChidlDirectedTreatment has already been caleld.")},g.prototype.setLocation=function(p,i){var o=this;this.executeWhenAvailable(function(){var a;(a=o.adFuel.perf)!=null&&a.addMark("Setting Location"),googletag.pubads().setLocation(p,i)})},g.prototype.setSafeFrameConfig=function(p){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Setting SafeFrame Config"),googletag.pubads().setSafeFrameConfig(p)})},g.prototype.setSlotSafeFrameConfig=function(p,i){var o=this;p&&this.executeWhenAvailable(function(){var a;(a=o.adFuel.perf)!=null&&a.addMark("[".concat(p.getSlotElementId(),"] Setting Slot SafeFrame Config")),p.setSafeFrameConfig(i)})},e.GoogleApi=g},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],34:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GptProcessData=void 0;var r=t("linq-collections");function g(){this.wrappedSlots=new r.List,this.url="",this.pageTargets={},this.slotTargets={},this.dispatched=!1}g.prototype.build=function(p,i,o,a,d,u){return a===void 0&&(a=""),d===void 0&&(d={}),u===void 0&&(u={}),this.timestamp=new Date().getTime(),this.registry=p,this.wrappedSlots=i,this.options=o,this.url=a,this.pageTargets=d,this.slotTargets=u,this.dispatched=!1,this},g.prototype.clone=function(){return new g().build(this.registry&&JSON.parse(JSON.stringify(this.registry)),new r.List(this.wrappedSlots.toArray()),this.options&&JSON.parse(JSON.stringify(this.options)),"".concat(this.url),JSON.parse(JSON.stringify(this.pageTargets)),JSON.parse(JSON.stringify(this.slotTargets)))},e.GptProcessData=g},{"linq-collections":23}],35:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(a,d){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(u,s){u.__proto__=s}:function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])}))(a,d)},function(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function u(){this.constructor=a}r(a,d),a.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.GptScriptLoader=void 0,t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl")),t=t("../system/AController"),t=(g=t.AController,p(o,g),Object.defineProperty(o.prototype,"readyId",{get:function(){return"gptScript"},enumerable:!1,configurable:!0}),o.prototype.loadScript=function(){var a,d=this;return(a=this.perf)!=null&&a.addMark("GPT Script Load START"),(a=this.perf)!=null&&a.addMark("GPT Script Ready START"),(0,i.loadScriptFromUrl)("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPTScript",this._document).then(function(){var u;(u=d.logger)!=null&&u.info("GPT is loaded."),(u=d.perf)!=null&&u.addMark("GPT Script Load END"),(u=d.perf)!=null&&u.addMeasure("GPT Script Load"),(u=window.googletag)!=null&&u.cmd.push(function(){var s,l=((l=window.googletag)==null?void 0:l.getVersion())||"unknown";(s=d.logger)!=null&&s.info("GPT is ready. Version is ".concat(l)),(s=d.perf)!=null&&s.addMark("GPT Script Ready END"),(l=d.perf)!=null&&l.addMeasure("GPT Script Ready")})})},o);function o(a,d,u,s){s===void 0&&(s=document);var l=g.call(this,a)||this;return l.missionControl=a,l.logger=d,l.perf=u,l._document=s,l.missionControl.setReady(l),l}e.GptScriptLoader=t},{"../system/AController":31,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":12}],36:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissionControl=void 0;var r=t("linq-collections");function g(p,i){this.adFuel=p,this.googleApi=i,this._ready=new r.Dictionary,this._optanonLoaded=!1,this._consentStatus=!0,this._iabRegion="global",this.processQueue=[]}g.prototype.register=function(p){this._ready.setOrUpdate(p.readyId,!1),(p=this.adFuel.logger)!=null&&p.info("Ready at Register",JSON.parse(JSON.stringify(this._ready))),(p=this.adFuel.perf)!=null&&p.addMark("Ready at Register")},Object.defineProperty(g.prototype,"firstProcessor",{get:function(){return this._firstProcessor},set:function(p){this._firstProcessor=p},enumerable:!1,configurable:!0}),g.prototype.setReady=function(p){var i,o=this;if(p){if((i=this.adFuel.logger)!=null&&i.log("Setting Processor Ready: ",p),!this._ready.containsKey(p.readyId))throw new Error("Key not found in ReadyEngine: ".concat(p.readyId));this._ready.setOrUpdate(p.readyId,!0),(i=this.adFuel.logger)!=null&&i.info("Ready",JSON.parse(JSON.stringify(this._ready)))}if(this.readyToLaunch()){if((p=this.adFuel.perf)!=null&&p.addMark("Ready To Launch"),!this._firstProcessor)throw new Error("All processes are ready, but FirstProcessor is not set.");(i=this.adFuel.perf)!=null&&i.addMark("First Processor - Processing"),this.googleApi.executeWhenAvailable(function(){o.runProcessChain(),o.adFuel.flushCmdQueue()})}},g.prototype.runProcessChain=function(){var p,i=this,o=this.processQueue.shift();(p=this.adFuel.logger)!=null&&p.log("[runProcessChain] ProcessData: ",o),o?((p=this.adFuel.logger)!=null&&p.info("[runProcessChain] Starting chain with this data",o),this.adFuel.moduleManager.callStart(o.wrappedSlots.where(function(a){return a.slotExistsOnPage}).toList()).then(function(){i.adFuel.moduleManager.callPreQueue(o.wrappedSlots.where(function(a){return a.slotExistsOnPage&&!a.isExcluded}).toList()).then(function(){var a;(a=i.adFuel.logger)!=null&&a.info("[runProcessChain] calling first processor..."),i._firstProcessor.process(o).then(function(){o.timestamp=new Date().getTime(),i.adFuel.processedData.setOrUpdate(o.timestamp,o),i.runProcessChain(),i.adFuel.flushCmdQueue()})})}).catch(function(a){var d;(d=i.adFuel.logger)!=null&&d.error("[runProcessChain] There was an error in processing the chain.  Mission Control has aborted liftoff.",a)})):(p=this.adFuel.logger)!=null&&p.info("[runProcessChain] No data to process.")},g.prototype.getSlotIfAlreadyProcessed=function(p){var i=(i=this.adFuel.processedData.firstOrDefault(function(o){return o.value.wrappedSlots.any(function(a){return a.slotId===p.slotId&&a.isBuilt})}))==null?void 0:i.value.wrappedSlots.firstOrDefault(function(o){return o.slotId===p.slotId&&o.isBuilt});return p=i!=null?i:p},g.prototype.isReady=function(p){return this._ready.get(p.readyId)},g.prototype.readyToLaunch=function(){var p,i=this._ready.all(function(o){return o.value===!0});return(p=this.adFuel.logger)!=null&&p.info("Ready to launch ".concat(i),this._ready),i},e.MissionControl=g},{"linq-collections":23}],37:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(d,u){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(s,l){s.__proto__=l}:function(s,l){for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(s[m]=l[m])}))(d,u)},function(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function s(){this.constructor=d}r(d,u),d.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleManager=e.ModuleWrapper=void 0,t("@turnercode/digital-ads-utilities")),t=t("../system/AController"),o=function(d,u,s,l){u===void 0&&(u=void 0),s===void 0&&(s=!1),l===void 0&&(l=!1),this.moduleName=d,this.unWrappedModule=u,this.isLoaded=s,this.isReady=l},t=(e.ModuleWrapper=o,g=t.AController,p(a,g),Object.defineProperty(a.prototype,"readyId",{get:function(){return"modules"},enumerable:!1,configurable:!0}),a.prototype.executeWhenWindowLoads=function(){var d;(d=this.adFuel.perf)!=null&&d.addMark("Executing Window Processes START"),(d=this.adFuel.perf)!=null&&d.addMark("Executing Window Processes END"),(d=this.adFuel.perf)!=null&&d.addMeasure("Executing Window Processes")},a.prototype.executeWhenDOMLoads=function(){var d;(d=this.adFuel.perf)!=null&&d.addMark("Executing DOM Processes START"),this.adFuel.adFuelOptions.ACTIVE_MODULES?((d=this.adFuel.logger)!=null&&d.log("Are all expected modules loaded? ",{expected:this.adFuel.adFuelOptions.ACTIVE_MODULES,loaded:this.areAllExpectedModulesLoaded}),this.areAllExpectedModulesLoaded?((d=this.adFuel.perf)!=null&&d.addMark("Executing DOM Processes END"),(d=this.adFuel.perf)!=null&&d.addMeasure("Executing DOM Processes")):(d=this.adFuel.logger)!=null&&d.warn("Failed to load all expected modules:",this.adFuel.adFuelOptions.ACTIVE_MODULES)):((d=this.adFuel.logger)!=null&&d.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (A) === === === ~~ ~~ ~~"),this.adFuel.missionControl.setReady(this))},a.prototype.registerModule=function(d){var u,s;this.adFuel.registeredModules.containsKey(d.MODULE_LOG_TAG)?(s=this.adFuel.registeredModules.get(d.MODULE_LOG_TAG)).unWrappedModule=d:((u=this.adFuel.perf)!=null&&u.addMark("Creating ModuleWrapper [".concat(d.MODULE_NAME,"]")),s=new o(d.MODULE_LOG_TAG,d)),(u=this.adFuel.logger)!=null&&u.log("Setting Registered Module: ",{module:d,wrappedModule:s}),this.adFuel.registeredModules.setOrUpdate(d.MODULE_LOG_TAG,s),(u=this.adFuel.logger)!=null&&u.log("Expected Loaded and All Ready?: ",{expected:this.areAllExpectedModulesLoaded,ready:this.areAllModulesReady}),this.areAllExpectedModulesLoaded&&this.areAllModulesReady&&((d=this.adFuel.logger)!=null&&d.info("All modules are loaded and ready, so setting ModuleManager ready."),(s=this.adFuel.perf)!=null&&s.addMark("All Modules Ready"),(u=this.adFuel.logger)!=null&&u.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (B) === === === ~~ ~~ ~~"),this.missionControl.setReady(this))},Object.defineProperty(a.prototype,"areAllExpectedModulesLoaded",{get:function(){for(var d,u,s=0,l=(u=this.adFuel.adFuelOptions.ACTIVE_MODULES)!=null?u:[];s<l.length;s++){var m=l[s];if((d=this.adFuel.logger)!=null&&d.log("moduleLogTag: ",m),!this.adFuel.registeredModules.containsKey(m))return!1}return(u=this.adFuel.logger)!=null&&u.log("notNot: ",!!this.adFuel.adFuelOptions.ACTIVE_MODULES),!!this.adFuel.adFuelOptions.ACTIVE_MODULES},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areAllModulesReady",{get:function(){return this.adFuel.registeredModules.count()<1||this.adFuel.registeredModules.all(function(d){return d.value.isReady})},enumerable:!1,configurable:!0}),a.prototype.callStart=function(){var d=this;return new Promise(function(u){d.adFuel.registeredModules.where(function(s){return s.value.isReady}).forEach(function(s){var l,m=(m=s.value)==null?void 0:m.unWrappedModule;if(m!=null&&m.start)try{(l=d.adFuel.perf)!=null&&l.addMark("Calling Module Start Process [".concat(s.value.moduleName,"]")),m.start()}catch(f){(l=d.adFuel.logger)!=null&&l.error("Problem calling start for ".concat(m.MODULE_NAME),f)}}),u()})},a.prototype.callPreQueue=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.preQueue&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module preQueue Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.preQueue(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("MODULE-MANAGER - Problem calling preQueue ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PreQueue timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PreQueue Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreQueue Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callPostQueue=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.postQueue&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module postQueue Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.postQueue(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling postQueue ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PostQueue timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PostQueue Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostQueue Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callPreDispatch=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.preDispatch&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module preDispatch Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.preDispatch(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling preDispatch ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PreDispatch timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PreDispatch Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreDispatch Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callPostDispatch=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.postDispatch&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module postDispatch Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.postDispatch(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling postDispatch ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PostDispatch timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PostDispatch Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostDispatch Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callPreRefresh=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.preRefresh&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module preRefresh Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.preRefresh(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling preRefresh ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PreRefresh timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PreRefresh Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreRefreesh Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callPostRefresh=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.postRefresh&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module postRefresh Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.postRefresh(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling postRefresh ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," PostRefresh timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - PostRefresh Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostRefresh Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a.prototype.callDestroySlot=function(d){var u=this;return new Promise(function(s){var l,m=d,f=[];u.adFuel.registeredModules.where(function(v){return v.value.isReady}).forEach(function(v){var n,h=v.value.unWrappedModule;h!=null&&h.destroySlots&&((n=u.adFuel.perf)!=null&&n.addMark("Calling Module destroySlots Process [".concat(v.value.moduleName,"]")),f.push((0,i.promiseWithTimeout)(1500,h.destroySlots(m.toArray()).catch(function(_){var c;(c=u.adFuel.logger)!=null&&c.error("Problem calling destroySlots ".concat(h.MODULE_NAME),_)}),"".concat(h.MODULE_NAME," DestroySlot timed out."))))}),(l=u.adFuel.logger)!=null&&l.log("MODULE-MANAGER - DestroySlot Callback Promises: ",f),s(Promise.allSettled(f).then(function(v){var n;(n=u.adFuel.logger)!=null&&n.log("MODULE-MANAGER - DestroySlot Callback Promises Results: ",v)}).catch(function(v){var n;(n=u.adFuel.logger)!=null&&n.error("MODULE-MANAGER - Error waiting for all promises to resolve:",v)}))})},a);function a(d){var u=g.call(this,d.missionControl)||this;return u.adFuel=d,u._windowLoaded=!1,u._domContentLoaded=!1,window.addEventListener("DOMContentLoaded",function(){var s;u._domContentLoaded||((s=u.adFuel.perf)!=null&&s.addMark("DOMContentLoaded"),u.executeWhenDOMLoads(),u._domContentLoaded=!0)}),window.addEventListener("load",function(){var s;u._windowLoaded||((s=u.adFuel.perf)!=null&&s.addMark("window.load"),u.executeWhenWindowLoads(),u._windowLoaded=!0)}),u}e.ModuleManager=t},{"../system/AController":31,"@turnercode/digital-ads-utilities":11}],38:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Monetization=void 0;var r=t("@turnercode/digital-ads-utilities/dist/Logger"),g=t("@turnercode/digital-ads-utilities/dist/getViewport");function p(i){var o,a=this,d=(this.wrappedSlot=i,this.invalidMappings=["_ns_","_nfs_"],this.invalidSegments=[],this.invalidAdUnits=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"],this.monetizedSizes=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],this.isMonetized=!0,this.isSuppressed=!1,this.isOutstream=!1,this.viewportSizes=[],this.filteredSizes=[],this._logger=new r.Logger("AdFuel T$","Monetization","mon","color: #85BB65; padding: 2px"),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"),this._logger.log("$$$$$$$$$$  Monetization for Slot: ",i.slotId),this.posValue=i.posMap,(0,g.getViewport)()),u=this.isSuppressed=!1;this.isOutstream=0<=i.slotId.indexOf("_out_"),i.slotId==="page"&&(this.isMonetized=!1),this.hasInvalidMapping()&&(this.isMonetized=!1),this.hasInvalidUnitSegment()&&(this.isMonetized=!1),this.hasInvalidAdUnit()&&(this.isMonetized=!1),i.responsive&&0<i.responsive.length&&(u=!0,this._logger.log("$$$$$$$$$$ Client Viewport : ",d),o=i.responsive.filter(function(s){return a._logger.log("$$$$$$$$$$ Slot Viewport : ",s),s=s.unwrapped[0][0],a._logger.log("$$$$$$$$$$ Client Min: ",s),parseInt(s,10)<d.width})[0].sizes,this.viewportSizes=o.sizes.map(function(s){return s.unwrapped}),this.isSuppressed=o.suppressed,this._logger.log("$$$$$$$$$$ Viewport Sizes: ",this.viewportSizes)),this._logger.log("$$$$$$$$$$ Is Responsive/Monetized/Suppressed/Outstream: ",{isResponsive:u,isMonetized:this.isMonetized,isSuppressed:this.isSuppressed,isOutstream:this.isOutstream}),this.isOutstream?(this.isMonetized=!0,u?this.viewportSizes.forEach(function(s){a.filteredSizes.push({unwrapped:s,width:parseInt(s[0],10),height:parseInt(s[1],10)})}):i.sizes.forEach(function(s){a.filteredSizes.push(s)})):this.isMonetized&&!this.isSuppressed&&this.monetizedSizes.forEach(function(s){u?a.viewportSizes.forEach(function(l){s===l.join("x")&&a.filteredSizes.push({unwrapped:l,width:parseInt(l[0],10),height:parseInt(l[1],10)})}):i.sizes.forEach(function(l){s===l.unwrapped.join("x")&&a.filteredSizes.push(l)})}),this.filteredSizes.length!==0||this.isOutstream||(this.isMonetized=!1),this._logger.log("$$$$$$$$$$ Filtered Sizes: ",this.filteredSizes),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$")}p.prototype.hasInvalidMapping=function(){var i=this,o=!1;return this.invalidMappings.forEach(function(a){(i.wrappedSlot.slotId.includes(a)||i.posValue.includes(a))&&(o=!0)}),o},p.prototype.hasInvalidUnitSegment=function(){var i=this,o=!1;return this.invalidSegments.forEach(function(a){i.wrappedSlot.slotId.includes(a)&&(o=!0)}),o},p.prototype.hasInvalidAdUnit=function(){return this.invalidAdUnits.includes(this.wrappedSlot.adUnitMap)},e.Monetization=p},{"@turnercode/digital-ads-utilities/dist/Logger":3,"@turnercode/digital-ads-utilities/dist/getViewport":9}],39:[function(t,y,e){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(o){for(var a,d=1,u=arguments.length;d<u;d++)for(var s in a=arguments[d])Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s]);return o}).apply(this,arguments)},g=(Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsParser=void 0,t("./SlotWrapper")),p=t("linq-collections");function i(o){this.adFuel=o}i.prototype.processOptions=function(o){(d=this.adFuel.perf)!=null&&d.addMark("Processing Options"),(d=this.adFuel.logger)!=null&&d.log("----slots before processOptions",o.wrappedSlots.select(function(s){return s.toLogging()}).toArray());var a,d=o.options,u=(this.processPageAdUnit(o),d!=null&&d.usePageAdUnit?((a=this.adFuel.logger)!=null&&a.log("Using page ad unit for ad unit mapping."),this.processAdUnitMapping(this.adFuel.pageAdUnit,o)):d!=null&&d.adUnitMap&&this.processAdUnitMapping(d.adUnitMap,o),d!=null&&d.slotMap&&this.processSlotMapping(d.slotMap,o),d!=null&&d.exclude&&this.processExclusions(d.exclude,o),d!=null&&d.slots&&this.processIncludes(d.slots,o),d!=null&&d.posMap&&this.processPosMapping(d.posMap,o),[]);return d!=null&&d.sync?o.wrappedSlots.forEach(function(s){return u.push(s.slotId)}):d!=null&&d.syncSlots&&(Array.isArray(d.syncSlots)||(this.adFuel.adFuelOptions.syncSlots=[d.syncSlots]),u.push.apply(u,d.syncSlots)),o.wrappedSlots.where(function(s){return u.includes(s.slotId)}).forEach(function(s){return s.sync=!0}),(a=this.adFuel.logger)!=null&&a.log("----slots after processOptions",o.wrappedSlots.toArray()),o},i.prototype.processAdUnitMapping=function(o,a){var d,u,s=this;(d=this.adFuel.perf)!=null&&d.addMark("Processing AdUnit Mapping [".concat(JSON.stringify(o),"]")),(d=this.adFuel.logger)!=null&&d.log("Processing AdUnit Mapping ".concat(JSON.stringify(o))),u=typeof o=="string"?JSON.parse(JSON.stringify({all:o})):JSON.parse(JSON.stringify(o)),(d=this.adFuel.logger)!=null&&d.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= UnitMapClone: ",u),a.wrappedSlots.forEach(function(l){var m;(m=s.adFuel.logger)!=null&&m.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Checking if slot should be mapped: ",{slot:l,id:l.slotId,unitMapClone:u}),u.all!==void 0?((m=s.adFuel.logger)!=null&&m.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Global: ",u.all),l.adUnitMap=u.all):u[l.slotId]!==void 0&&((m=s.adFuel.logger)!=null&&m.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Specific: ",u[l.slotId]),l.adUnitMap=u[l.slotId])})},i.prototype.processPageAdUnit=function(o){var a;this.adFuel.pageAdUnit===""&&1<o.wrappedSlots.toArray().length&&(o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id===""?(a=this.adFuel.logger)!=null&&a.error("Could not determine page ad unit.",o.wrappedSlots):((a=this.adFuel.logger)!=null&&a.info("Setting pageAdUnit to:",o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id),this.adFuel.pageAdUnit=o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id))},i.prototype.processSlotMapping=function(o,a){(d=this.adFuel.logger)!=null&&d.log("[OptionsParser] Processing Slot Mapping",{slotMap:o,data:a});for(var d,u,s=this,l=0,m=Object.keys(o);l<m.length;l++)(function(f){var v=(u=a.wrappedSlots.firstOrDefault(function(n){return n.slotId===f}))==null?void 0:u.unWrappedSlot;v?a.wrappedSlots.firstOrDefault(function(n){return n.slotId===o[f]})?(u=s.adFuel.logger)!=null&&u.warn("Mapped ".concat(o[f]," slot already exists!")):document.getElementById(o[f])?((u=s.adFuel.logger)!=null&&u.log("[OptionsParser] Creating slot ".concat(f," mapped to ").concat(o[f])),a.wrappedSlots.push(new g.SlotWrapper(r(r({},v),{rktr_slot_id:o[f]})))):(u=s.adFuel.logger)!=null&&u.warn("".concat(o[f]," has no matching element on the page and won't be added to allWrappedSlots.'")):(u=s.adFuel.logger)!=null&&u.warn("Could not find source slot data for ".concat(f," in the registry or allWrappedSlots in processSlotMap."))})(m[l])},i.prototype.processPosMapping=function(o,a){var d,u,s=this;if((d=this.adFuel.perf)!=null&&d.addMark("Processing POS Mapping ".concat(JSON.stringify(o),"]")),(d=this.adFuel.logger)!=null&&d.log("[OptionsParser] Processing POS Mapping",o),typeof o=="string")a.wrappedSlots.forEach(function(f){var v;(v=s.adFuel.logger)!=null&&v.log("[OptionsParser] Setting pos to global:",o),f.posMap=o});else{var l,m=this;for(l in o)(function(f){var v=a.wrappedSlots.firstOrDefault(function(n){return n.slotId===f});if((u=m.adFuel.logger)!=null&&u.log("[OptionsParser] Validating specific pos:",{source:v,key:f}),!v)return(u=m.adFuel.logger)!=null&&u.warn("Cant' find slot ".concat(f," to use as a source in POS Mapping."));v&&((u=m.adFuel.logger)!=null&&u.log("[OptionsParser] Setting pos to specific:",{source:v,key:f}),v.posMap=o[f])})(l)}},i.prototype.processExclusions=function(o,a){var d;(d=this.adFuel.perf)!=null&&d.addMark("Processing Exclusions ".concat(JSON.stringify(o),"]")),Array.isArray(o)||(o=[o]),(d=this.adFuel.logger)!=null&&d.log("#################### Should process exclusions?",0<o.length),o.length<1||((d=this.adFuel.logger)!=null&&d.log("#################### Processing exclusions:",o),(d=this.adFuel.logger)!=null&&d.log("#################### Pre Exclusions: ",a.wrappedSlots),d=a.wrappedSlots.toArray().map(function(u){return o.includes(u.slotId)&&(u.isExcluded=!0),u}),a.wrappedSlots=new p.List(d),(a=this.adFuel.logger)!=null&&a.log("#################### Post Exclusions: ",d))},i.prototype.processIncludes=function(o,a){var d;(d=this.adFuel.perf)!=null&&d.addMark("Processing Slots (inclusions) ".concat(JSON.stringify(o))),Array.isArray(o)||(o=[o]),(d=this.adFuel.logger)!=null&&d.log("#################### Should process inclusions?",0<o.length),o.length<1||((d=this.adFuel.logger)!=null&&d.log("#################### Processing inclusions:",o),(d=this.adFuel.logger)!=null&&d.log("#################### Pre Inclusions: ",a.wrappedSlots),d=a.wrappedSlots.where(function(u){return o.includes(u.slotId)}).toArray().map(function(u){return u.isExcluded=!1,u}),a.wrappedSlots=new p.List(d),(a=this.adFuel.logger)!=null&&a.log("#################### Post Inclusions: ",d))},e.OptionsParser=i},{"./SlotWrapper":43,"linq-collections":23}],40:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayLoader=void 0;var r=t("@turnercode/digital-ads-utilities/dist/localization");function g(p){this.adFuel=p,this._overlaysHidden=!0}Object.defineProperty(g.prototype,"overlaysHidden",{get:function(){return this._overlaysHidden},enumerable:!1,configurable:!0}),g.prototype._togglePageOverlay=function(){var p,i,o,a;(p=this.adFuel.logger)!=null&&p.log("===== OVERLAY LOADER ===== Toggling Page Overlay...",this.overlaysHidden),this.overlaysHidden&&((p=document.createElement("style")).innerHTML=`
        html::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }
        html body::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }
      `,(i=document.createElement("div")).className="pos_overlay",i.id="page_overlay",i.style.position="fixed",i.style.bottom="0",i.style.left="10",i.style.textAlign="left",i.style.padding="5px",i.style.marginBottom="25px",i.style.fontFamily="Verdana",i.style.fontSize="12px",i.style.fontWeight="normal",i.style.lineHeight="12px",i.style.background="rgba(0,50,100,0.7)",i.style.color="#ffffff",i.style.zIndex="2147483000",i.style.overflow="hidden",i.style.overflowY="auto",i.style.overflowX="auto",i.style.width="500px",i.style.height="30vh",(o=document.createElement("ul")).style.listStyleType="none",o.style.margin="0px",o.style.marginTop="5px",o.style.marginBottom="5px",o.style.padding="5px",o.innerHTML=o.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; align: right; text-align: right; display: inline-block;"><a style="cursor: copy; color: white;" onClick="copyPageInfo()">[COPY]</a></div>',a=this.adFuel,["afv","uc","mv","reg"].forEach(function(d){var u,s=document.createElement("li"),l=(s.style.margin="5px",s.style.padding="0px",a.version()),m=a.registeredModules.getKeys(),f=a.fetchedRegistries.keys(),v=((u=a.logger)!=null&&u.log("Version: ",l),(u=a.logger)!=null&&u.log("Modules: ",m),(u=a.logger)!=null&&u.log("Registries: ",f),((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getRegion())||"global"),n=v==="global"?"N/A":JSON.stringify((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getConsentState(),null,2);switch((u=a.logger)!=null&&u.log("Consent Region: -".concat(v,"-")),(u=a.logger)!=null&&u.log("Consent Status: ",n),s.style.direction="ltr",d){case"afv":s.innerHTML='<b style="font-size: 1.25em;">AdFuel v'.concat(l,"</b>");break;case"mv":s.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Modules:</b>',s.innerHTML=s.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',m.forEach(function(h){var _,h=a.registeredModules.get(h);s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px;">'.concat((_=h.unWrappedModule)==null?void 0:_.MODULE_NAME," v").concat((_=h.unWrappedModule)==null?void 0:_.MODULE_VERSION,"</li>")}),s.innerHTML=s.innerHTML+"</ul>";break;case"reg":s.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Registries:</b>',s.innerHTML=s.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',Array.from(f).forEach(function(h){var _=a.fetchedRegistries.get(h),c=null;_&&(c=_[0]),s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Name:</b> '.concat(c==null?void 0:c.rktr_id,"</li>"),s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Website:</b> <a style="color: yellow;" href="'.concat(h,'" target="_blank">').concat(h,"</a></li>"),s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px; padding-bottom: 5px; border-bottom: solid 1px white;"><b>Last Updated:</b> '.concat(c==null?void 0:c.rktr_deployed_date,"<br /></li>")}),s.innerHTML=s.innerHTML+"</ul>";break;case"uc":s.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>User Consent:</b>',s.innerHTML=s.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Region:</b> '.concat(v.toUpperCase(),"</li>"),s.innerHTML=s.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Status:</b> '.concat(n?"Granted":"Denied","</li>"),s.innerHTML=s.innerHTML+"</ul>"}o.appendChild(s)}),i.appendChild(o),window.copyPageInfo=function(){var d=(d=document.getElementById("page_overlay"))==null?void 0:d.innerText.replace("[COPY]","");return console.log("Overlay Text: ",d),navigator.clipboard.writeText(d||""),d},this.showTemporalData(i),document.head.appendChild(p),document.body.appendChild(i))},g.prototype._toggleOverlays=function(){var p,i,o=this;if(this._overlaysHidden){(a=this.adFuel.logger)!=null&&a.log("===== OVERLAY LOADER ===== Showing Overlays..."),this._togglePageOverlay();var a=document.querySelectorAll(".adfuel-rendered");(p=this.adFuel.logger)!=null&&p.log("===== OVERLAY LOADER ===== Ad Slots:",a),u=a.length,a.forEach(function(l){var m=l.id,f=document.getElementById(m)||document.createElement("div"),v=(f.style.position="relative",(n=o.adFuel)==null?void 0:n.processedData),n=v.getKeys(),h={},_=(n.forEach(function(b){var E=v.get(b);(b=o.adFuel.logger)!=null&&b.log("===== OVERLAY LOADER ===== Registry:",E),E.wrappedSlots.forEach(function(S){S.unWrappedSlot.rktr_slot_id===m&&S.isBuilt&&S.gSlot&&((h=S).parentRegistry=E.url)})}),(n=o.adFuel.logger)!=null&&n.log("===== OVERLAY LOADER ===== data: ",{processedData:v,adElement:l,adFuel:Object.keys(o.adFuel),activeSlot:h}),m.substring(m.indexOf("_")+1)),n=document.createElement("div"),c=(n.className="pos_overlay",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.textAlign="left",n.style.padding="5px",n.style.fontFamily="Verdana",n.style.fontSize="12px",n.style.fontWeight="normal",n.style.lineHeight="12px",n.style.background="rgba(0,100,0,0.7)",n.style.color="#ffffff",n.style.zIndex="2147483000",n.style.resize="both",n.style.overflow="hidden",n.style.overflowY="auto",n.style.overflowX="auto",n.style.width=f.style.width+"px",n.style.height=f.style.height+"px",n.id="overlay_"+m,document.createElement("ul"));c.style.listStyleType="none",c.style.margin="0px",c.style.marginTop="5px",c.style.marginBottom="5px",c.style.padding="5px",c.innerHTML=c.innerHTML+`<div style="position: absolute; top: 5px; right: 5px; display: inline-block; align: right; text-align: right"><a style="cursor: copy; color: white;" onClick="copySlotInfo('`.concat(m,`')">[COPY]</a></div>`),["Slot","Details","Response","Programmatic","Bids","Targeting"].forEach(function(b){function E(D){return'<ul style="list-style-type: none; margin: 0px; margin-left: '.concat(D,'px; padding-top: 2px; padding-bottom: 2px;">')}function S(D){return'<li style="direction: ltr; margin-left: '.concat(D,'px; padding: 0px;">')}switch(c.innerHTML=c.innerHTML+S(5),b){case"Slot":c.innerHTML=c.innerHTML+'<b style="font-size: 1.25em;">Slot: '.concat(m,"</b>");break;case"Details":c.innerHTML=c.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Details:</b>',c.innerHTML=c.innerHTML+E(10),c.innerHTML=c.innerHTML+S(10)+"<b>POS:</b> "+_+"</li>",c.innerHTML=c.innerHTML+S(10)+"<b>AdUnit:</b> "+((h==null?void 0:h.adUnitMap)||(h==null?void 0:h.unWrappedSlot.rktr_ad_id))+"</li>",c.innerHTML=c.innerHTML+S(10)+"<b>Registry:</b> "+(h==null?void 0:h.parentRegistry)+"</li>",c.innerHTML=c.innerHTML+S(10)+"<b>Monetized:</b> "+(h&&h.monetization?h.monetization.isMonetized:"false")+"</li>",c.innerHTML=c.innerHTML+"</ul>";break;case"Response":c.innerHTML=c.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Response:</b>',c.innerHTML=c.innerHTML+E(10);var C,L=h.responseData;if(L)for(var O in L)O!=="renderedSize"&&(C=L[O])!==null&&(c.innerHTML=c.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>'.concat(O,":</b> ").concat(JSON.stringify(C),"</li>"));c.innerHTML=c.innerHTML+S(10)+"<b>Rendered Size:</b> ".concat(typeof h.responseData.renderedSize!="string"?h.responseData.renderedSize.join("x"):h.responseData.renderedSize,"</li>"),c.innerHTML=c.innerHTML+"</ul>";break;case"Programmatic":c.innerHTML=c.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Programmatic:</b>',c.innerHTML=c.innerHTML+E(10),Object.keys(h.programmatic).forEach(function(D){var P;switch(c.innerHTML=c.innerHTML+S(10),D){case"a9":(P=o.adFuel.logger)!=null&&P.log("===== OVERLAY LOADER ===== A9: ",h.programmatic.a9),c.innerHTML=c.innerHTML+"<b>A9:</b> ",c.innerHTML=c.innerHTML+E(15),c.innerHTML=c.innerHTML+S(15)+"<b>SlotName:</b> "+h.programmatic.a9.slotName+"</li>",c.innerHTML=c.innerHTML+"</ul>";break;case"ias":(P=o.adFuel.logger)!=null&&P.log("===== OVERLAY LOADER ===== IAS: ",h.programmatic.ias),c.innerHTML=c.innerHTML+"<b>IAS:</b> ",c.innerHTML=c.innerHTML+E(15),c.innerHTML=c.innerHTML+S(15)+"<b>adUnitPath:</b> "+h.programmatic.ias.adUnitPath+"</li>",c.innerHTML=c.innerHTML+"</ul>";break;case"krux":(P=o.adFuel.logger)!=null&&P.log("===== OVERLAY LOADER ===== Krux: ",h.programmatic.krux),c.innerHTML=c.innerHTML+"<b>Krux:</b> ",c.innerHTML=c.innerHTML+E(15),c.innerHTML=c.innerHTML+S(15)+"<b>controlTag:</b> "+((0,r.isIntl)()?h.programmatic.krux.intl_controltag:h.programmatic.krux.dom_controltag)+"</li>",c.innerHTML=c.innerHTML+"</ul>";break;case"prebid":(P=o.adFuel.logger)!=null&&P.log("===== OVERLAY LOADER ===== Prebid: ",h.programmatic.prebid),c.innerHTML=c.innerHTML+"<b>Prebid:</b> ",c.innerHTML=c.innerHTML+E(15),Object.keys(h.programmatic.prebid).forEach(function(j){j!=="bids"&&(c.innerHTML=c.innerHTML+S(15)+"<b>".concat(j.toUpperCase(),":</b><br />"),c.innerHTML=c.innerHTML+E(20),Object.keys(h.programmatic.prebid[j]).forEach(function(q){var W=q!=="keywords"?h.programmatic.prebid[j][q]:JSON.stringify(h.programmatic.prebid[j][q]);c.innerHTML=c.innerHTML+S(20)+"<b>".concat(q,":</b> ").concat(W,"</li>")}),c.innerHTML=c.innerHTML+"</ul>",c.innerHTML=c.innerHTML+"</li>")}),c.innerHTML=c.innerHTML+"</ul>"}c.innerHTML=c.innerHTML+"</li>"}),c.innerHTML=c.innerHTML+"</ul>";break;case"Targeting":c.innerHTML=c.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Targeting:</b>',c.innerHTML=c.innerHTML+E(10),Object.keys(h.requestedSlotTargets).forEach(function(D){0<h.requestedSlotTargets[D].length?c.innerHTML=c.innerHTML+S(10)+"<b>".concat(D,":</b> ").concat(JSON.stringify(h.requestedSlotTargets[D].join(", ")),"</li>"):(D=o.adFuel.logger)!=null&&D.log("===== OVERLAY LOADER ===== No Slot Targets [".concat(h.slotId,"]"))}),c.innerHTML=c.innerHTML+"</ul>"}c.innerHTML=c.innerHTML+"</li>"}),window.copySlotInfo=function(b){return b=(b=document.getElementById("overlay_"+b))==null?void 0:b.innerText.replace("[COPY]",""),console.log("Overlay Text: ",b),navigator.clipboard.writeText(b||""),b},n.appendChild(c),f.appendChild(n)}),this._overlaysHidden=!1}else{(p=this.adFuel.logger)!=null&&p.log("===== OVERLAY LOADER ===== Removing Overlays...");for(var d=document.querySelectorAll(".pos_overlay"),u=d.length,s=0;s<u;s++)(i=d[s].parentNode)!=null&&i.removeChild(d[s]);this._overlaysHidden=!0}},g.prototype.startConsoleTool=function(){var p,i=this;try{document.addEventListener("keydown",function(o){o.isComposing||o.keyCode===229||o.code==="229"||o.code==="KeyZ"&&o.ctrlKey&&o.shiftKey&&i._toggleOverlays()})}catch(o){(p=this.adFuel.logger)!=null&&p.log("Error Starting Console Tool: ",o)}},g.prototype.getTemporalData=function(){var p=[];return performance.getEntries().forEach(function(i,o){o===0?["connectEnd","connectStart","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive","domainLookupStart","domainLookupEnd","fetchStart","loadEventEnd","loadEventStart","requestStart","responseStart","responseEnd"].forEach(function(a){i[a]!==1&&p.push({name:a,startTime:i[a],duration:0,entryType:"navigation"})}):(0<=i.name.indexOf("ADFUEL")||0<=["gpt-tag-load","gpt-first-ad-request","gpt-first-ad-render"].indexOf(i.name))&&p.push(i)}),p.sort(function(i,o){return i.startTime>o.startTime?1:i.startTime<o.startTime?-1:0}),p},g.prototype.showTemporalData=function(p){var i=document.createElement("div"),o=(i.style.textAlign="left",i.innerHTML="<b>Performance Data:</b>",this.getTemporalData()),a=["name","entryType","startTime","duration"],d=document.createElement("table"),u=(d.border="1",d.style.width="100%",document.createElement("thead")),s=document.createElement("tr"),l=(u.appendChild(s),a.forEach(function(m){var f=document.createElement("td");f.innerHTML=m.toUpperCase(),f.style.padding="5px",f.style.paddingLeft="5px",f.style.paddingRight="5px",f.style.fontSize="1em",f.style.fontWeight="bolder",f.style.textAlign="center",s.appendChild(f)}),document.createElement("tbody"));o.forEach(function(m){var f=document.createElement("tr");f.style.padding="15px",a.forEach(function(v){var n=document.createElement("td");switch(v){case"name":n.innerHTML=m[v].replace("[ADFUEL TS] ","");break;case"startTime":case"duration":n.innerHTML=parseFloat(m[v]).toFixed(4);break;default:n.innerHTML=m[v]}n.style.padding="2px",n.style.paddingLeft="5px",n.style.paddingRight="5px",n.style.fontSize=".8em",n.style.fontWeight="normal",f.appendChild(n)}),l.appendChild(f)}),d.appendChild(u),d.appendChild(l),i.appendChild(d),p.appendChild(i)},e.OverlayLoader=g},{"@turnercode/digital-ads-utilities/dist/localization":13}],41:[function(t,y,e){"use strict";var r,g,p=this&&this.__extends||(r=function(v,n){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(h,_){h.__proto__=_}:function(h,_){for(var c in _)Object.prototype.hasOwnProperty.call(_,c)&&(h[c]=_[c])}))(v,n)},function(v,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function h(){this.constructor=v}r(v,n),v.prototype=n===null?Object.create(n):(h.prototype=n.prototype,new h)}),i=this&&this.__awaiter||function(v,n,h,_){return new(h=h||Promise)(function(c,b){function E(L){try{C(_.next(L))}catch(O){b(O)}}function S(L){try{C(_.throw(L))}catch(O){b(O)}}function C(L){var O;L.done?c(L.value):((O=L.value)instanceof h?O:new h(function(D){D(O)})).then(E,S)}C((_=_.apply(v,n||[])).next())})},o=this&&this.__generator||function(v,n){var h,_,c,b={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]},E={next:S(0),throw:S(1),return:S(2)};return typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(C){return function(L){var O=[C,L];if(h)throw new TypeError("Generator is already executing.");for(;b=E&&O[E=0]?0:b;)try{if(h=1,_&&(c=2&O[0]?_.return:O[0]?_.throw||((c=_.return)&&c.call(_),0):_.next)&&!(c=c.call(_,O[1])).done)return c;switch(_=0,(O=c?[2&O[0],c.value]:O)[0]){case 0:case 1:c=O;break;case 4:return b.label++,{value:O[1],done:!1};case 5:b.label++,_=O[1],O=[0];continue;case 7:O=b.ops.pop(),b.trys.pop();continue;default:if(!(c=0<(c=b.trys).length&&c[c.length-1])&&(O[0]===6||O[0]===2)){b=0;continue}if(O[0]===3&&(!c||O[1]>c[0]&&O[1]<c[3]))b.label=O[1];else if(O[0]===6&&b.label<c[1])b.label=c[1],c=O;else{if(!(c&&b.label<c[2])){c[2]&&b.ops.pop(),b.trys.pop();continue}b.label=c[2],b.ops.push(O)}}O=n.call(v,b)}catch(D){O=[6,D],_=0}finally{h=c=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}}},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.RegistryLoader=void 0,t("./AController")),d=t("@turnercode/digital-ads-utilities"),u=t("linq-collections"),s=t("../system"),l=t("."),m=t("./OptionsParser"),t=(g=a.AController,p(f,g),Object.defineProperty(f.prototype,"readyId",{get:function(){return"registry"},enumerable:!1,configurable:!0}),f.prototype.loadRegistryFromUrl=function(v,n){var h;return i(this,void 0,void 0,function(){var _,c=this;return o(this,function(b){return(h=this.adFuel.logger)!=null&&h.info("Loading registry JSON from ".concat(v)),typeof v!="string"?(h=this.adFuel.logger)!=null&&h.log("loadRegistryFromUrl was given a Url value that wasn't a string.",console.trace()):(v.slice(2+(v.lastIndexOf(".")-1>>>0))==="js"&&((h=this.adFuel.logger)!=null&&h.warn("The 'min.js' and '.js' registry file formats are deprecated. Please change your code to use the '.json' registry file."),(_=v.split(".")).pop(),v="".concat(_.filter(function(E){return E.toLowerCase()!=="min"}).join("."),".json"),(h=this.adFuel.logger)!=null)&&h.info("Converting input to use '.json' registry file. Converted to: ".concat(v,". ")),v=(0,d.normalizeUrl)(v),(h=this.adFuel.logger)!=null&&h.log("Looking for Registry JSON: ",v),this.fetchedRegistries.has(v)?((h=this.adFuel.logger)!=null&&h.log("Fetching Registry object from Cache"),_=this.fetchedRegistries.get(v),(h=this.adFuel.logger)!=null&&h.log("===== [RegistryLoader/loadRegistryFromUrl] Registry: ",_),this.loadRegistryFromJson(JSON.parse(JSON.stringify(_)),n,v)):((h=this.adFuel.logger)!=null&&h.log("Fetching Registry JSON from CDN"),(h=this.adFuel.perf)!=null&&h.addMark("Loading Registry JSON START"),fetch(v).then(function(E){return E.json()}).then(function(E){return c.fetchedRegistries.set(v,JSON.parse(JSON.stringify(E.registry))),E.registry}).then(function(E){var S;(S=c.adFuel.perf)!=null&&S.addMark("Loading Registry JSON END"),(S=c.adFuel.perf)!=null&&S.addMeasure("Loading Registry JSON"),c.loadRegistryFromJson(E,n,v)}).catch(function(E){var S;throw(S=c.adFuel.logger)!=null&&S.error("Error loading ".concat(v),E),Error(E)}))),[2]})})},f.prototype.loadRegistryFromJson=function(v,n,h){(E=this.adFuel.perf)!=null&&E.addMark("Processing Registry [".concat(v[0].rktr_id,"]")),h=h||"".concat(v[0].rktr_id),(E=this.adFuel.logger)!=null&&E.log("===== [RegistryLoader/loadRegistryFromJson] Registry: ",{registry:v,jsonUrl:h});var _,c=new u.List,b=v[0];b.slots=[],(E=this.adFuel.logger)!=null&&E.log("===== [RegistryLoader/loadRegistryFromJson] Options: ",n);for(var E,S=1;S<v.length;S++)b.slots.push(JSON.parse(JSON.stringify(v[S]))),n.slots&&n.slots.length!==0?0<=n.slots.indexOf(JSON.parse(JSON.stringify(v[S])).rktr_slot_id)&&((_=this.adFuel.logger)!=null&&_.log("===== [RegistryLoader/loadRegistryFromJson] Selective Slot: ",v[S]),c.push(new s.SlotWrapper(JSON.parse(JSON.stringify(v[S]))))):((_=this.adFuel.logger)!=null&&_.log("===== [RegistryLoader/loadRegistryFromJson] All Slots: ",v[S]),c.push(new s.SlotWrapper(JSON.parse(JSON.stringify(v[S])))));E=new l.GptProcessData().build(b,c,n,h),(h=this.adFuel.logger)!=null&&h.log("data variable in loadRegistryfromJson",E),this.loadRegistryFromObject(E)},f.prototype.loadRegistryFromObject=function(v){var n;v=new m.OptionsParser(this.adFuel).processOptions(v),(n=this.adFuel.logger)!=null&&n.info("GptProcessDataObject for processing",v),this.adFuel.missionControl.processQueue.push(v),this.missionControl.setReady(this)},f);function f(v){var n=g.call(this,v.missionControl)||this;return n.adFuel=v,n.fetchedRegistries=new Map,n}e.RegistryLoader=t},{".":45,"../system":45,"./AController":31,"./OptionsParser":39,"@turnercode/digital-ads-utilities":11,"linq-collections":23}],42:[function(t,y,e){"use strict";function r(g){this.unwrapped=g}Object.defineProperty(e,"__esModule",{value:!0}),e.SizeWrapper=void 0,Object.defineProperty(r.prototype,"width",{get:function(){return+this.unwrapped[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return+this.unwrapped[1]},enumerable:!1,configurable:!0}),e.SizeWrapper=r},{}],43:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlotWrapper=void 0;var r=t("./Monetization"),g=t("./SizeWrapper"),p=t("./ViewportWrapper");function i(o){this.unWrappedSlot=o,this._sync=!1,this._isExcluded=!1,this._hasBeenDisplayed=!1,this._gslot=void 0,this._monetization={isMonetized:!1,filteredSizes:[],isSuppressed:!1},this._adUnitMap="",this._parentRegistry="",this._responsive=[],this._sizes=[],this._requestedSlotTargets={},this._posMap="",this.programmatic={},this.responseData={advertiserId:void 0,campaignId:void 0,creativeId:void 0,isEmpty:!0,lineItemId:void 0,renderedSize:"",sourceAgnosticCreativeId:void 0,sourceAgnosticLineItemId:void 0},this._adUnitMap=o.rktr_ad_id,this._posMap="";for(var a=0,d=this.targeting;a<d.length;a++){var u=d[a];if(u[0]==="pos"){this._posMap=u[1][0];break}}this.unWrappedSlot.responsive=this.formatResponsiveMapping(o);for(var s=0,l=this.unWrappedSlot.responsive;s<l.length;s++){var m=l[s];this._responsive.push(new p.ViewportWrapper(m))}for(var f=0,v=this.unWrappedSlot.sizes;f<v.length;f++){var n=v[f];this._sizes.push(new g.SizeWrapper(n))}this._monetization=new r.Monetization(this),this._parentRegistry=""}i.prototype.formatResponsiveMapping=function(o){return o.responsive.map(function(a){return a.map(function(d){return d[0]==="suppress"?[]:d.map(function(u){return Array.isArray(u)?u.map(function(s){return typeof s!="string"||s==="fluid"?s:parseInt(s,10)}):typeof u=="string"?parseInt(u,10):u})})})},Object.defineProperty(i.prototype,"slotId",{get:function(){return this.unWrappedSlot.rktr_slot_id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sync",{get:function(){return this._sync},set:function(o){this._sync=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isOutOfPage",{get:function(){return 1<=this.unWrappedSlot.rktr_slot_id.indexOf("_oop")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBuilt",{get:function(){return!!this._gslot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isExcluded",{get:function(){return this._isExcluded},set:function(o){this._isExcluded=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasBeenDisplayed",{get:function(){return this._hasBeenDisplayed},set:function(o){this._hasBeenDisplayed=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"slotExistsOnPage",{get:function(){return!!document.getElementById(this.slotId)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gSlot",{get:function(){return this._gslot},set:function(o){this._gslot=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monetization",{get:function(){return this._monetization},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentRegistry",{get:function(){return this._parentRegistry},set:function(o){this._parentRegistry=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adUnitMap",{get:function(){return this._adUnitMap},set:function(o){this._adUnitMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"posMap",{get:function(){return this._posMap||""},set:function(o){this._posMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"targeting",{get:function(){return this.unWrappedSlot.targeting},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"responsive",{get:function(){return this._responsive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sizes",{get:function(){return this._sizes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSinglton",{get:function(){return this.unWrappedSlot.rktr_slot_id.indexOf("ad_mod")===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestedSlotTargets",{get:function(){return this._requestedSlotTargets},set:function(o){this._requestedSlotTargets=o},enumerable:!1,configurable:!0}),i.prototype.toLogging=function(){return{slotId:this.slotId,isExcluded:this.isExcluded,isBuilt:this.isBuilt,hasBeenDisplayed:this.hasBeenDisplayed,slotExistsOnPage:this.slotExistsOnPage,isOOP:this.isOutOfPage}},e.SlotWrapper=i},{"./Monetization":38,"./SizeWrapper":42,"./ViewportWrapper":44}],44:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportWrapper=void 0;var r=t("./SizeWrapper"),t=(Object.defineProperty(g.prototype,"viewport",{get:function(){return new r.SizeWrapper(this.unwrapped[0])},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"sizes",{get:function(){for(var p={sizes:[],suppressed:!1},i=0,o=this.unwrapped[1];i<o.length;i++){var a=o[i];Array.isArray(a)?p.sizes.push(new r.SizeWrapper(a)):p.suppressed=!0}return p},enumerable:!1,configurable:!0}),g);function g(p){this.unwrapped=p}e.ViewportWrapper=t},{"./SizeWrapper":42}],45:[function(t,y,e){"use strict";var r=this&&this.__createBinding||(Object.create?function(p,i,o,a){a===void 0&&(a=o);var d=Object.getOwnPropertyDescriptor(i,o);d&&("get"in d?i.__esModule:!d.writable&&!d.configurable)||(d={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(p,a,d)}:function(p,i,o,a){p[a=a===void 0?o:a]=i[o]}),g=this&&this.__exportStar||function(p,i){for(var o in p)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||r(i,p,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.processors=void 0,e.processors=t("../processors/index"),g(t("./MissionControl"),e),g(t("./SlotWrapper"),e),g(t("./ViewportWrapper"),e),g(t("./SizeWrapper"),e),g(t("./GoogleApi"),e),g(t("./GptProcessData"),e),g(t("./RegistryLoader"),e),g(t("./ModuleManager"),e),g(t("./GptScriptLoader"),e),g(t("./OverlayLoader"),e),g(t("./BaseAdFuelOptions"),e)},{"../processors/index":30,"./BaseAdFuelOptions":32,"./GoogleApi":33,"./GptProcessData":34,"./GptScriptLoader":35,"./MissionControl":36,"./ModuleManager":37,"./OverlayLoader":40,"./RegistryLoader":41,"./SizeWrapper":42,"./SlotWrapper":43,"./ViewportWrapper":44}],46:[function(t,y,e){y.exports={family:"Neon Nightwing",major:3,minor:0,revision:46}},{}]},{},[25])(25)})});var ge=hs();function Is(){ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableCep")&&ys(),ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableInViewRefresh")&&_s(),ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableMalvertisingDetection")&&bs(),ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableSourcePoint")&&As(),ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableBlockThrough")&&Ss(),ge.get("TRINITY_CONFIGURATION.international.michonne.features.enableSSAI")&&Fs(),Ls()}(function(){window.AdFuelOptions?Is():window.addEventListener("adfuel.loaded",Is)})();})();
//# sourceMappingURL=cnn-edition-adfuel-body.min.js.map
